var threeD=function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=5)}([function(t,e,i){"use strict";(function(t){var i,n,s="undefined"==typeof self&&void 0!==t&&t.hrtime?function(){var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},o=function(){function t(){this._tweens={},this._tweensAddedDuringUpdate={}}return t.prototype.getAll=function(){var t=this;return Object.keys(this._tweens).map((function(e){return t._tweens[e]}))},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},t.prototype.remove=function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},t.prototype.update=function(t,e){var i=Object.keys(this._tweens);if(0===i.length)return!1;for(t=void 0!==t?t:s();i.length>0;){this._tweensAddedDuringUpdate={};for(var n=0;n<i.length;n++){var o=this._tweens[i[n]];o&&!1===o.update(t)&&!e&&delete this._tweens[i[n]]}i=Object.keys(this._tweensAddedDuringUpdate)}return!0},t}(),h={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-h.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*h.Bounce.In(2*t):.5*h.Bounce.Out(2*t-1)+.5}}},r={Linear:function(t,e){var i=t.length-1,n=i*e,s=Math.floor(n),o=r.Utils.Linear;return e<0?o(t[0],t[1],n):e>1?o(t[i],t[i-1],i-n):o(t[s],t[s+1>i?i:s+1],n-s)},Bezier:function(t,e){for(var i=0,n=t.length-1,s=Math.pow,o=r.Utils.Bernstein,h=0;h<=n;h++)i+=s(1-e,n-h)*s(e,h)*t[h]*o(n,h);return i},CatmullRom:function(t,e){var i=t.length-1,n=i*e,s=Math.floor(n),o=r.Utils.CatmullRom;return t[0]===t[i]?(e<0&&(s=Math.floor(n=i*(1+e))),o(t[(s-1+i)%i],t[s],t[(s+1)%i],t[(s+2)%i],n-s)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-n)-t[0]):e>1?t[i]-(o(t[i],t[i],t[i-1],t[i-1],n-i)-t[i]):o(t[s?s-1:0],t[s],t[i<s+1?i:s+1],t[i<s+2?i:s+2],n-s)},Utils:{Linear:function(t,e,i){return(e-t)*i+t},Bernstein:function(t,e){var i=r.Utils.Factorial;return i(t)/i(e)/i(t-e)},Factorial:(i=[1],function(t){var e=1;if(i[t])return i[t];for(var n=t;n>1;n--)e*=n;return i[t]=e,e}),CatmullRom:function(t,e,i,n,s){var o=.5*(i-t),h=.5*(n-e),r=s*s;return(2*e-2*i+o+h)*(s*r)+(-3*e+3*i-2*o-h)*r+o*s+e}}},a=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),l=function(){function t(t,e){void 0===e&&(e=u),this._object=t,this._group=e,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=u.Easing.Linear.None,this._interpolationFunction=u.Interpolation.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=u.nextId(),this._isChainStopped=!1}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.to=function(t,e){for(var i in t)this._valuesEnd[i]=t[i];return void 0!==e&&(this._duration=e),this},t.prototype.duration=function(t){return this._duration=t,this},t.prototype.start=function(t){if(this._isPlaying)return this;if(this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var e in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(e),this._valuesStart[e]=this._valuesStartRepeat[e];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==t?"string"==typeof t?u.now()+parseFloat(t):t:u.now(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},t.prototype._setupProperties=function(t,e,i,n){for(var s in i){var o=t[s],h=Array.isArray(o),r=h?"array":typeof o,a=!h&&Array.isArray(i[s]);if("undefined"!==r&&"function"!==r){if(a){var l=i[s];if(0===l.length)continue;l=l.map(this._handleRelativeValue.bind(this,o)),i[s]=[o].concat(l)}if("object"!==r&&!h||!o||a)void 0===e[s]&&(e[s]=o),h||(e[s]*=1),n[s]=a?i[s].slice().reverse():e[s]||0;else{for(var c in e[s]=h?[]:{},o)e[s][c]=o[c];n[s]=h?[]:{},this._setupProperties(o,e[s],i[s],n[s])}}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this.update(1/0),this},t.prototype.pause=function(t){return this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=void 0===t?u.now():t,this._group.remove(this)),this},t.prototype.resume=function(t){return this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=(void 0===t?u.now():t)-this._pauseStart,this._pauseStart=0,this._group.add(this),this):this},t.prototype.stopChainedTweens=function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop();return this},t.prototype.group=function(t){return this._group=t,this},t.prototype.delay=function(t){return this._delayTime=t,this},t.prototype.repeat=function(t){return this._initialRepeat=t,this._repeat=t,this},t.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},t.prototype.yoyo=function(t){return this._yoyo=t,this},t.prototype.easing=function(t){return this._easingFunction=t,this},t.prototype.interpolation=function(t){return this._interpolationFunction=t,this},t.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._chainedTweens=t,this},t.prototype.onStart=function(t){return this._onStartCallback=t,this},t.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},t.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},t.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},t.prototype.onStop=function(t){return this._onStopCallback=t,this},t.prototype.update=function(t){var e,i;if(t>this._startTime+this._duration&&!this._isPlaying)return!1;if(this.isPlaying||this.start(t),t<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),i=(t-this._startTime)/this._duration,i=0===this._duration||i>1?1:i;var n=this._easingFunction(i);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,n),this._onUpdateCallback&&this._onUpdateCallback(this._object,i),1===i){if(this._repeat>0){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[e]||(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo&&this._swapEndStartRepeatValues(e),this._valuesStart[e]=this._valuesStartRepeat[e];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,o=this._chainedTweens.length;s<o;s++)this._chainedTweens[s].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(t,e,i,n){for(var s in i)if(void 0!==e[s]){var o=e[s]||0,h=i[s],r=Array.isArray(t[s]),a=Array.isArray(h);!r&&a?t[s]=this._interpolationFunction(h,n):"object"==typeof h&&h?this._updateProperties(t[s],o,h,n):"number"==typeof(h=this._handleRelativeValue(o,h))&&(t[s]=o+(h-o)*n)}},t.prototype._handleRelativeValue=function(t,e){return"string"!=typeof e?e:"+"===e.charAt(0)||"-"===e.charAt(0)?t+parseFloat(e):parseFloat(e)},t.prototype._swapEndStartRepeatValues=function(t){var e=this._valuesStartRepeat[t];"string"==typeof this._valuesEnd[t]?this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(this._valuesEnd[t]):this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=e},t}(),c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),u=new(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.version="18.6.0",e.now=s,e.Group=o,e.Easing=h,e.Interpolation=r,e.nextId=a.nextId,e.Tween=l,e}return c(e,t),e}(o));e.a=u}).call(this,i(6))},function(t,e){var i=2*Math.PI,n=Math.PI/2,s=3*Math.PI/2,o=Math.tan(Math.PI/12),h=180/Math.PI;t.exports={TWO_PI:i,TAN_PI_BY_12:o,PI_BY_2:n,THREE_PI_BY_2:s,ONE_EIGHTY_BY_PI:h}},function(t,e,i){"use strict";i.r(e),i.d(e,"hexToRgb",(function(){return s})),i.d(e,"getLengthOfPath",(function(){return o})),i.d(e,"getDistance",(function(){return h})),i.d(e,"getMidPoint",(function(){return r})),i.d(e,"getNorm",(function(){return a})),i.d(e,"getUnitVector",(function(){return l})),i.d(e,"getUnitVectorInplace",(function(){return c})),i.d(e,"getAngleCC",(function(){return u})),i.d(e,"getAngle",(function(){return d})),i.d(e,"getXYFromTheta",(function(){return p})),i.d(e,"getAngleFrom3Points",(function(){return f})),i.d(e,"getRadian",(function(){return x}));var n=i(1),s=function(t){return t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,i,n){return"#"+e+e+i+i+n+n})).substring(1).match(/.{2}/g).map((function(t){return parseInt(t,16)}))};function o(t){for(var e=0,i=0;i<t.length;i++)e+=Math.sqrt(Math.pow(t[i].x-t[(i+1)%t.length].x,2)+Math.pow(t[i].y-t[(i+1)%t.length].y,2));return e}function h(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function r(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function a(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}function l(t){var e=Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:t.x/e,y:t.y/e}}function c(t,e){var i=Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2));e.x=t.x/i,e.y=t.y/i}function u(t){var e=Math.atan2(t.y,t.x);return e<0?n.TWO_PI+e:e}function d(t){var e=Math.atan2(t.y,t.x);return e<0?-e:n.TWO_PI-e}function p(t,e,i){return{x:e*Math.cos(t),y:i*Math.sin(t)}}function f(t,e,i){return this.angle1=d({x:t.x-e.x,y:t.y-e.y}),this.angle2=d({x:i.x-e.x,y:i.y-e.y}),this.angle2<this.angle1?this.angle=n.TWO_PI+this.angle2-this.angle1:this.angle=this.angle2-this.angle1,this.angle}function x(t){return t*Math.PI/180}},function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}i.d(e,"a",(function(){return s}));var s=function(){function t(e,i){for(var n in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.frame=document.createElement("div"),this.frame.style.position="absolute",this.frame.style.left="0px",this.frame.style.top="0px",this.width=150,this.height=150,this.background="#00f00033",this.borderWidth=1,this.borderRaidus=6,this.borderColor="#333333",this.horizontalAlign=t.HORIZONTAL_ALIGN_LEFT,this.verticalAlign=t.VERTICAL_ALIGN_TOP,this.reactable=!0,i)null==this[n]&&console.warn(t.name+": "+n+" parameter is undefined."),this[n]=i[n];this.style=this.frame.style,this.style.fontFamily="Computer Modern",this.style.width=this.width+"px","auto"===this.height?this.style.height="auto":this.style.height=this.height+"px",this.style.display="flex",this.style.justifyContent="center",this.style.alignItems="center",this.style.padding="3px",this.visible=!1,this.parent=e,this.parent.appendChild(this.frame),this.reactable||(this.style.pointerEvents="none"),this.boundingRect=this.frame.getBoundingClientRect(),this.horizontalAlign==t.HORIZONTAL_ALIGN_MIDDLE&&this.verticalAlign==t.VERTICAL_ALIGN_BOTTOM&&(this.style.transformOrigin="50% 100%")}var e,i,s;return e=t,(i=[{key:"getDOM",value:function(){return this.frame}},{key:"getFrameSize",value:function(){return{width:this.width,height:this.height}}},{key:"setPosition",value:function(t,e){this.style.left=t-this.boundingRect.width*this.horizontalAlign+"px",this.style.top=e-this.boundingRect.height*this.verticalAlign+"px"}},{key:"setAngle",value:function(t){this.style.transform="rotate("+(t+90)+"deg)"}},{key:"setFrameSize",value:function(t,e){this.width=t,this.height=e,this.frame.style.width=this.width+"px",this.frame.style.height=this.height+"px"}},{key:"show",value:function(){this.frame.classList.remove("label-fadeOut"),this.frame.classList.add("label-fadeIn")}},{key:"hide",value:function(){this.frame.classList.remove("label-fadeIn"),this.frame.classList.add("label-fadeOut")}},{key:"delete",value:function(){this.frame.classList.remove("label-fadeIn"),this.frame.classList.remove("label-fadeOut"),this.frame.style.visibility="hidden",this.frame.style.opacity=0,this.parent.removeChild(this.frame)}}])&&n(e.prototype,i),s&&n(e,s),t}();s.HORIZONTAL_ALIGN_LEFT=0,s.HORIZONTAL_ALIGN_MIDDLE=.5,s.HORIZONTAL_ALIGN_RIGHT=1,s.VERTICAL_ALIGN_TOP=0,s.VERTICAL_ALIGN_MIDDLE=.5,s.VERTICAL_ALIGN_BOTTOM=1},function(t,e,i){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=(t/=n)*t,o=s*t;return e+i*(5.95*o*s+8.045*s*s+-31.99*o+18.995*s)}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=o(-e/2);return Math.clip((o(e*(t-.5))-i)/(1-2*i),0,1)}function o(t){return 1/(1+Math.exp(-t))}i.r(e),i.d(e,"selectionEasing",(function(){return n})),i.d(e,"smooth",(function(){return s})),Math.clip=function(t,e,i){return Math.max(e,Math.min(t,i))}},function(t,e,i){"use strict";i.r(e);var n=i(0);i(3),i(1);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}var r=i(9),a=i(8),l=i(2),c=new r.Stage("container_2d"),u=c.getGrid();function d(t){requestAnimationFrame(d),n.a.update(t),c.render()}var p={x:-2.8,y:.7},f={x:2.2,y:.7},x={x:3.9207,y:3.1575},g={x:-1.0793,y:3.1575},P={x:p.x-f.x,y:p.y-f.y},y={x:x.x-f.x,y:x.y-f.y},v={x:g.x-x.x,y:g.y-x.y},m=(l.getAngleCC(P),l.getAngleCC(y)),C=l.getAngleCC(v),T=(Math.PI,l.getDistance(f,x),l.getDistance(x,g),new r.Line(p,f,{autoDraw:!1}));u.addItem(T),a.WebFontConfig={},a.load({custom:{families:["Computer Modern"],urls:["styles/font.css"]},timeout:5e3,active:function(){d()}}),document.getElementById("btnPlay").addEventListener("click",(function(t){B.play()})),document.getElementById("btnHome").addEventListener("click",(function(t){c.grid.moveAndScale({x:0,y:0})}));var w=function(){function t(){s(this,t),this.constructionLineAB=new r.LineConstructor(new r.LineConstructor.StartAndEndPoint(p,f),u),this.labelA=new r.Text("A",[g,p,f],[]),this.labelB=new r.Text("B",[p,f,x],[]),this.labelAB=new r.Text("5 cm",[p,f],[]),u.addItem(this.labelA),u.addItem(this.labelB),u.addItem(this.labelAB),this.slideManger=void 0,this.slideIndex=void 0}return h(t,[{key:"play",value:function(){var t=this;this.constructionLineAB.draw((function(e){t.labelA.show(),t.labelB.show(),t.labelAB.show((function(){setTimeout((function(){t.completed()}),1500)}))}))}},{key:"completed",value:function(){this.slideManger&&this.slideManger.completed(this.slideIndex)}},{key:"instantDraw",value:function(){this.constructionLineAB.instantDraw(),this.labelA.instantDraw(),this.labelB.instantDraw(),this.labelAB.instantDraw()}},{key:"destroyAll",value:function(){this.labelA.delete(),this.labelB.delete(),this.labelAB.delete(),this.constructionLineAB.destroyAll()}}]),t}(),k={x:g.x-p.x,y:g.y-p.y},b=l.getAngleCC(k),R=function(){function t(){s(this,t),this.construction=new r.LineConstructor(new r.LineConstructor.RefLineAndAngle(f,p,b,l.getDistance(p,g)+.5,!0),u),this.labelP=new r.Text("P",[p,{x:-.84517,y:3.55762},p],[]),u.addItem(this.labelP),this.angleDAB=new r.Angle([g,p,f],[]),u.addItem(this.angleDAB)}return h(t,[{key:"play",value:function(){var t=this;this.construction.draw((function(e){t.labelP.show(),t.angleDAB.show((function(){setTimeout((function(){t.completed()}),1e3)}))}))}},{key:"completed",value:function(){this.slideManger&&this.slideManger.completed(this.slideIndex)}},{key:"instantDraw",value:function(){this.construction.instantDraw(),this.labelP.instantDraw(),this.angleDAB.instantDraw()}},{key:"destroyAll",value:function(){this.construction.destroyAll(),this.labelP.delete(),this.angleDAB.delete()}}]),t}(),A=function(){function t(){s(this,t),this.arcConstructor=new r.ArcConstructor(new r.ArcConstructor.CenterRadiusStartEndAngle(p,l.getDistance(p,g),l.getRadian(61),l.getRadian(49),!1),u,{color:"#444444",lineWidth:1}),this.labelD=new r.Text("D",[x,g,p],[]),u.addItem(this.labelD),this.labelDA=new r.Text("3 cm",[g,p],[]),u.addItem(this.labelDA)}return h(t,[{key:"play",value:function(){var t=this;this.arcConstructor.draw((function(e){t.labelD.show(),t.labelDA.show((function(){t.completed()}))}))}},{key:"completed",value:function(){this.slideManger&&this.slideManger.completed(this.slideIndex)}},{key:"instantDraw",value:function(){this.arcConstructor.instantDraw(),this.labelD.instantDraw(),this.labelDA.instantDraw()}},{key:"destroyAll",value:function(){this.arcConstructor.destroyAll(),this.labelD.delete(),this.labelDA.delete()}}]),t}(),_=function(){function t(){s(this,t),this.construction=new r.ArcConstructor(new r.ArcConstructor.CenterRadiusStartEndAngle(f,3,l.getRadian(64.5),l.getRadian(47.5),!1),u,{color:"#444444",lineWidth:1})}return h(t,[{key:"play",value:function(){var t=this;this.construction.draw((function(e){t.completed()}))}},{key:"completed",value:function(){this.slideManger&&this.slideManger.completed(this.slideIndex)}},{key:"instantDraw",value:function(){this.construction.instantDraw()}},{key:"destroyAll",value:function(){this.construction.destroyAll()}}]),t}(),I=function(){function t(){s(this,t),this.construction=new r.ArcConstructor(new r.ArcConstructor.CenterRadiusStartEndAngle(g,5,l.getRadian(6),l.getRadian(-6),!1),u,{color:"#444444",lineWidth:1}),this.labelC=new r.Text("C",[f,x,g],[]),u.addItem(this.labelC)}return h(t,[{key:"play",value:function(){var t=this;this.construction.draw((function(e){t.labelC.show((function(){t.completed()}))}))}},{key:"completed",value:function(){this.slideManger&&this.slideManger.completed(this.slideIndex)}},{key:"instantDraw",value:function(){this.construction.instantDraw(),this.labelC.instantDraw()}},{key:"destroyAll",value:function(){this.construction.destroyAll(),this.labelC.delete()}}]),t}(),L=function(){function t(){s(this,t),this.construction=new r.MultilineConstructor([new r.MultilineConstructor.StartAndEndPoint(f,x,!0),new r.MultilineConstructor.StartAndEndPoint(g,x,!0)],u),this.labelCD=new r.Text("5 cm",[x,g],[]),this.labelBC=new r.Text("3 cm",[f,x],[]),u.addItem(this.labelCD),u.addItem(this.labelBC)}return h(t,[{key:"play",value:function(){var t=this;this.construction.draw((function(e){t.labelCD.show(),t.labelBC.show((function(){t.completed()}))}))}},{key:"completed",value:function(){this.slideManger&&this.slideManger.completed(this.slideIndex)}},{key:"instantDraw",value:function(){this.construction.instantDraw(),this.labelCD.instantDraw(),this.labelBC.instantDraw()}},{key:"destroyAll",value:function(){this.construction.destroyAll(),this.labelCD.delete(),this.labelBC.delete()}}]),t}(),B=new r.SlideManager,S=(Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),function(t){var e=new w,i=new R,n=new A,s=new _,o=new I,h=new L;t.addSlide(e),t.addSlide(i),t.addSlide(n),t.addSlide(s),t.addSlide(o),t.addSlide(h)});B.createSlides=S,S(B)},function(t,e){var i,n,s=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}function r(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{n="function"==typeof clearTimeout?clearTimeout:h}catch(t){n=h}}();var a,l=[],c=!1,u=-1;function d(){c&&a&&(c=!1,a.length?l=a.concat(l):u=-1,l.length&&p())}function p(){if(!c){var t=r(d);c=!0;for(var e=l.length;e;){for(a=l,l=[];++u<e;)a&&a[u].run();u=-1,e=l.length}a=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===h||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function x(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new f(t,e)),1!==l.length||c||r(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=x,s.addListener=x,s.once=x,s.off=x,s.removeListener=x,s.removeAllListeners=x,s.emit=x,s.prependListener=x,s.prependOnceListener=x,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,e,i){var n;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */!function(s,o,h,r){"use strict";var a,l=["","webkit","Moz","MS","ms","o"],c=o.createElement("div"),u=Math.round,d=Math.abs,p=Date.now;function f(t,e,i){return setTimeout(C(t,i),e)}function x(t,e,i){return!!Array.isArray(t)&&(g(t,i[e],i),!0)}function g(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(void 0!==t.length)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function P(t,e,i){var n="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=s.console&&(s.console.warn||s.console.log);return o&&o.call(s.console,n,i),t.apply(this,arguments)}}a="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var s in n)n.hasOwnProperty(s)&&(e[s]=n[s])}return e}:Object.assign;var y=P((function(t,e,i){for(var n=Object.keys(e),s=0;s<n.length;)(!i||i&&void 0===t[n[s]])&&(t[n[s]]=e[n[s]]),s++;return t}),"extend","Use `assign`."),v=P((function(t,e){return y(t,e,!0)}),"merge","Use `assign`.");function m(t,e,i){var n,s=e.prototype;(n=t.prototype=Object.create(s)).constructor=t,n._super=s,i&&a(n,i)}function C(t,e){return function(){return t.apply(e,arguments)}}function T(t,e){return"function"==typeof t?t.apply(e&&e[0]||void 0,e):t}function w(t,e){return void 0===t?e:t}function k(t,e,i){g(_(e),(function(e){t.addEventListener(e,i,!1)}))}function b(t,e,i){g(_(e),(function(e){t.removeEventListener(e,i,!1)}))}function R(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function A(t,e){return t.indexOf(e)>-1}function _(t){return t.trim().split(/\s+/g)}function I(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function L(t){return Array.prototype.slice.call(t,0)}function B(t,e,i){for(var n=[],s=[],o=0;o<t.length;){var h=e?t[o][e]:t[o];I(s,h)<0&&n.push(t[o]),s[o]=h,o++}return i&&(n=e?n.sort((function(t,i){return t[e]>i[e]})):n.sort()),n}function S(t,e){for(var i,n,s=e[0].toUpperCase()+e.slice(1),o=0;o<l.length;){if((n=(i=l[o])?i+s:e)in t)return n;o++}}var E=1;function M(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||s}var D="ontouchstart"in s,F=void 0!==S(s,"PointerEvent"),O=D&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),G=["x","y"],W=["clientX","clientY"];function H(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){T(t.options.enable,[t])&&i.handler(e)},this.init()}function V(t,e,i){var n=i.pointers.length,s=i.changedPointers.length,o=1&e&&n-s==0,h=12&e&&n-s==0;i.isFirst=!!o,i.isFinal=!!h,o&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,n=e.pointers,s=n.length;i.firstInput||(i.firstInput=N(e));s>1&&!i.firstMultiple?i.firstMultiple=N(e):1===s&&(i.firstMultiple=!1);var o=i.firstInput,h=i.firstMultiple,r=h?h.center:o.center,a=e.center=z(n);e.timeStamp=p(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=X(r,a),e.distance=Y(r,a),function(t,e){var i=e.center,n=t.offsetDelta||{},s=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(s=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y});e.deltaX=s.x+(i.x-n.x),e.deltaY=s.y+(i.y-n.y)}(i,e),e.offsetDirection=j(e.deltaX,e.deltaY);var l=U(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=d(l.x)>d(l.y)?l.x:l.y,e.scale=h?(c=h.pointers,u=n,Y(u[0],u[1],W)/Y(c[0],c[1],W)):1,e.rotation=h?function(t,e){return X(e[1],e[0],W)+X(t[1],t[0],W)}(h.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,n,s,o,h=t.lastInterval||e,r=e.timeStamp-h.timeStamp;if(8!=e.eventType&&(r>25||void 0===h.velocity)){var a=e.deltaX-h.deltaX,l=e.deltaY-h.deltaY,c=U(r,a,l);n=c.x,s=c.y,i=d(c.x)>d(c.y)?c.x:c.y,o=j(a,l),t.lastInterval=e}else i=h.velocity,n=h.velocityX,s=h.velocityY,o=h.direction;e.velocity=i,e.velocityX=n,e.velocityY=s,e.direction=o}(i,e);var c,u;var f=t.element;R(e.srcEvent.target,f)&&(f=e.srcEvent.target);e.target=f}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function N(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:u(t.pointers[i].clientX),clientY:u(t.pointers[i].clientY)},i++;return{timeStamp:p(),pointers:e,center:z(e),deltaX:t.deltaX,deltaY:t.deltaY}}function z(t){var e=t.length;if(1===e)return{x:u(t[0].clientX),y:u(t[0].clientY)};for(var i=0,n=0,s=0;s<e;)i+=t[s].clientX,n+=t[s].clientY,s++;return{x:u(i/e),y:u(n/e)}}function U(t,e,i){return{x:e/t||0,y:i/t||0}}function j(t,e){return t===e?1:d(t)>=d(e)?t<0?2:4:e<0?8:16}function Y(t,e,i){i||(i=G);var n=e[i[0]]-t[i[0]],s=e[i[1]]-t[i[1]];return Math.sqrt(n*n+s*s)}function X(t,e,i){i||(i=G);var n=e[i[0]]-t[i[0]],s=e[i[1]]-t[i[1]];return 180*Math.atan2(s,n)/Math.PI}H.prototype={handler:function(){},init:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(M(this.element),this.evWin,this.domHandler)}};var q={mousedown:1,mousemove:2,mouseup:4};function Q(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,H.apply(this,arguments)}m(Q,H,{handler:function(t){var e=q[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var Z={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},$={2:"touch",3:"pen",4:"mouse",5:"kinect"},J="pointerdown",K="pointermove pointerup pointercancel";function tt(){this.evEl=J,this.evWin=K,H.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}s.MSPointerEvent&&!s.PointerEvent&&(J="MSPointerDown",K="MSPointerMove MSPointerUp MSPointerCancel"),m(tt,H,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),s=Z[n],o=$[t.pointerType]||t.pointerType,h="touch"==o,r=I(e,t.pointerId,"pointerId");1&s&&(0===t.button||h)?r<0&&(e.push(t),r=e.length-1):12&s&&(i=!0),r<0||(e[r]=t,this.callback(this.manager,s,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(r,1))}});var et={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function it(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,H.apply(this,arguments)}function nt(t,e){var i=L(t.touches),n=L(t.changedTouches);return 12&e&&(i=B(i.concat(n),"identifier",!0)),[i,n]}m(it,H,{handler:function(t){var e=et[t.type];if(1===e&&(this.started=!0),this.started){var i=nt.call(this,t,e);12&e&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}});var st={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function ot(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},H.apply(this,arguments)}function ht(t,e){var i=L(t.touches),n=this.targetIds;if(3&e&&1===i.length)return n[i[0].identifier]=!0,[i,i];var s,o,h=L(t.changedTouches),r=[],a=this.target;if(o=i.filter((function(t){return R(t.target,a)})),1===e)for(s=0;s<o.length;)n[o[s].identifier]=!0,s++;for(s=0;s<h.length;)n[h[s].identifier]&&r.push(h[s]),12&e&&delete n[h[s].identifier],s++;return r.length?[B(o.concat(r),"identifier",!0),r]:void 0}m(ot,H,{handler:function(t){var e=st[t.type],i=ht.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}});function rt(){H.apply(this,arguments);var t=C(this.handler,this);this.touch=new ot(this.manager,t),this.mouse=new Q(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function at(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,lt.call(this,e)):12&t&&lt.call(this,e)}function lt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout((function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)}),2500)}}function ct(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var s=this.lastTouches[n],o=Math.abs(e-s.x),h=Math.abs(i-s.y);if(o<=25&&h<=25)return!0}return!1}m(rt,H,{handler:function(t,e,i){var n="touch"==i.pointerType,s="mouse"==i.pointerType;if(!(s&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)at.call(this,e,i);else if(s&&ct.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ut=S(c.style,"touchAction"),dt=void 0!==ut,pt=function(){if(!dt)return!1;var t={},e=s.CSS&&s.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(i){t[i]=!e||s.CSS.supports("touch-action",i)})),t}();function ft(t,e){this.manager=t,this.set(e)}ft.prototype={set:function(t){"compute"==t&&(t=this.compute()),dt&&this.manager.element.style&&pt[t]&&(this.manager.element.style[ut]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return g(this.manager.recognizers,(function(e){T(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(A(t,"none"))return"none";var e=A(t,"pan-x"),i=A(t,"pan-y");if(e&&i)return"none";if(e||i)return e?"pan-x":"pan-y";if(A(t,"manipulation"))return"manipulation";return"auto"}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,s=A(n,"none")&&!pt.none,o=A(n,"pan-y")&&!pt["pan-y"],h=A(n,"pan-x")&&!pt["pan-x"];if(s){var r=1===t.pointers.length,a=t.distance<2,l=t.deltaTime<250;if(r&&a&&l)return}if(!h||!o)return s||o&&6&i||h&&24&i?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};function xt(t){this.options=a({},this.defaults,t||{}),this.id=E++,this.manager=null,this.options.enable=w(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function gt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Pt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function yt(t,e){var i=e.manager;return i?i.get(t):t}function vt(){xt.apply(this,arguments)}function mt(){vt.apply(this,arguments),this.pX=null,this.pY=null}function Ct(){vt.apply(this,arguments)}function Tt(){xt.apply(this,arguments),this._timer=null,this._input=null}function wt(){vt.apply(this,arguments)}function kt(){vt.apply(this,arguments)}function bt(){xt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Rt(t,e){return(e=e||{}).recognizers=w(e.recognizers,Rt.defaults.preset),new At(t,e)}xt.prototype={defaults:{},set:function(t){return a(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(x(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=yt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return x(t,"dropRecognizeWith",this)||(t=yt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(x(t,"requireFailure",this))return this;var e=this.requireFail;return-1===I(e,t=yt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(x(t,"dropRequireFailure",this))return this;t=yt(t,this);var e=I(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<8&&n(e.options.event+gt(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=8&&n(e.options.event+gt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=a({},t);if(!T(this.options.enable,[this,e]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},m(vt,xt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=6&e,s=this.attrTest(t);return n&&(8&i||!s)?16|e:n||s?4&i?8|e:2&e?4|e:2:32}}),m(mt,vt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push("pan-y"),24&t&&e.push("pan-x"),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,s=t.direction,o=t.deltaX,h=t.deltaY;return s&e.direction||(6&e.direction?(s=0===o?1:o<0?2:4,i=o!=this.pX,n=Math.abs(t.deltaX)):(s=0===h?1:h<0?8:16,i=h!=this.pY,n=Math.abs(t.deltaY))),t.direction=s,i&&n>e.threshold&&s&e.direction},attrTest:function(t){return vt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Pt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),m(Ct,vt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),m(Tt,xt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,s=t.deltaTime>e.time;if(this._input=t,!n||!i||12&t.eventType&&!s)this.reset();else if(1&t.eventType)this.reset(),this._timer=f((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),m(wt,vt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),m(kt,vt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return mt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return 30&i?e=t.overallVelocity:6&i?e=t.overallVelocityX:24&i&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&d(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=Pt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),m(bt,xt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,s=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(n&&s&&i){if(4!=t.eventType)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,h=!this.pCenter||Y(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,h&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=f((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return 32},failTimeout:function(){return this._timer=f((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Rt.VERSION="2.0.7",Rt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[wt,{enable:!1}],[Ct,{enable:!1},["rotate"]],[kt,{direction:6}],[mt,{direction:6},["swipe"]],[bt],[bt,{event:"doubletap",taps:2},["tap"]],[Tt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function At(t,e){var i;this.options=a({},Rt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(F?tt:O?ot:D?rt:Q))(i,V),this.touchAction=new ft(this,this.options.touchAction),_t(this,!0),g(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function _t(t,e){var i,n=t.element;n.style&&(g(t.options.cssProps,(function(s,o){i=S(n.style,o),e?(t.oldCssProps[i]=n.style[i],n.style[i]=s):n.style[i]=t.oldCssProps[i]||""})),e||(t.oldCssProps={}))}At.prototype={set:function(t){return a(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,s=e.curRecognizer;(!s||s&&8&s.state)&&(s=e.curRecognizer=null);for(var o=0;o<n.length;)i=n[o],2===e.stopped||s&&i!=s&&!i.canRecognizeWith(s)?i.reset():i.recognize(t),!s&&14&i.state&&(s=e.curRecognizer=i),o++}},get:function(t){if(t instanceof xt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(x(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(x(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=I(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(void 0!==t&&void 0!==e){var i=this.handlers;return g(_(t),(function(t){i[t]=i[t]||[],i[t].push(e)})),this}},off:function(t,e){if(void 0!==t){var i=this.handlers;return g(_(t),(function(t){e?i[t]&&i[t].splice(I(i[t],e),1):delete i[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var i=o.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&_t(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},a(Rt,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:At,Input:H,TouchAction:ft,TouchInput:ot,MouseInput:Q,PointerEventInput:tt,TouchMouseInput:rt,SingleTouchInput:it,Recognizer:xt,AttrRecognizer:vt,Tap:bt,Pan:mt,Swipe:kt,Pinch:Ct,Rotate:wt,Press:Tt,on:k,off:b,each:g,merge:v,extend:y,assign:a,inherit:m,bindFn:C,prefixed:S}),(void 0!==s?s:"undefined"!=typeof self?self:{}).Hammer=Rt,void 0===(n=function(){return Rt}.call(e,i,e,t))||(t.exports=n)}(window,document)},function(t,e,i){var n;!function(){function s(t,e,i){return t.call.apply(t.bind,arguments)}function o(t,e,i){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function h(t,e,i){return(h=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?s:o).apply(null,arguments)}var r=Date.now||function(){return+new Date};function a(t,e){this.a=t,this.o=e||t,this.c=this.o.document}var l=!!window.FontFace;function c(t,e,i,n){if(e=t.c.createElement(e),i)for(var s in i)i.hasOwnProperty(s)&&("style"==s?e.style.cssText=i[s]:e.setAttribute(s,i[s]));return n&&e.appendChild(t.c.createTextNode(n)),e}function u(t,e,i){(t=t.c.getElementsByTagName(e)[0])||(t=document.documentElement),t.insertBefore(i,t.lastChild)}function d(t){t.parentNode&&t.parentNode.removeChild(t)}function p(t,e,i){e=e||[],i=i||[];for(var n=t.className.split(/\s+/),s=0;s<e.length;s+=1){for(var o=!1,h=0;h<n.length;h+=1)if(e[s]===n[h]){o=!0;break}o||n.push(e[s])}for(e=[],s=0;s<n.length;s+=1){for(o=!1,h=0;h<i.length;h+=1)if(n[s]===i[h]){o=!0;break}o||e.push(n[s])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function f(t,e){for(var i=t.className.split(/\s+/),n=0,s=i.length;n<s;n++)if(i[n]==e)return!0;return!1}function x(t,e,i){function n(){r&&s&&o&&(r(h),r=null)}e=c(t,"link",{rel:"stylesheet",href:e,media:"all"});var s=!1,o=!0,h=null,r=i||null;l?(e.onload=function(){s=!0,n()},e.onerror=function(){s=!0,h=Error("Stylesheet failed to load"),n()}):setTimeout((function(){s=!0,n()}),0),u(t,"head",e)}function g(t,e,i,n){var s=t.c.getElementsByTagName("head")[0];if(s){var o=c(t,"script",{src:e}),h=!1;return o.onload=o.onreadystatechange=function(){h||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(h=!0,i&&i(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&s.removeChild(o))},s.appendChild(o),setTimeout((function(){h||(h=!0,i&&i(Error("Script load timeout")))}),n||5e3),o}return null}function P(){this.a=0,this.c=null}function y(t){return t.a++,function(){t.a--,m(t)}}function v(t,e){t.c=e,m(t)}function m(t){0==t.a&&t.c&&(t.c(),t.c=null)}function C(t){this.a=t||"-"}function T(t,e){this.c=t,this.f=4,this.a="n";var i=(e||"n4").match(/^([nio])([1-9])$/i);i&&(this.a=i[1],this.f=parseInt(i[2],10))}function w(t){var e=[];t=t.split(/,\s*/);for(var i=0;i<t.length;i++){var n=t[i].replace(/['"]/g,"");-1!=n.indexOf(" ")||/^\d/.test(n)?e.push("'"+n+"'"):e.push(n)}return e.join(",")}function k(t){return t.a+t.f}function b(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function R(t){var e=4,i="n",n=null;return t&&((n=t.match(/(normal|oblique|italic)/i))&&n[1]&&(i=n[1].substr(0,1).toLowerCase()),(n=t.match(/([1-9]00|normal|bold)/i))&&n[1]&&(/bold/i.test(n[1])?e=7:/[1-9]00/.test(n[1])&&(e=parseInt(n[1].substr(0,1),10)))),i+e}function A(t,e){this.c=t,this.f=t.o.document.documentElement,this.h=e,this.a=new C("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function _(t){if(t.g){var e=f(t.f,t.a.c("wf","active")),i=[],n=[t.a.c("wf","loading")];e||i.push(t.a.c("wf","inactive")),p(t.f,i,n)}I(t,"inactive")}function I(t,e,i){t.j&&t.h[e]&&(i?t.h[e](i.c,k(i)):t.h[e]())}function L(){this.c={}}function B(t,e){this.c=t,this.f=e,this.a=c(this.c,"span",{"aria-hidden":"true"},this.f)}function S(t){u(t.c,"body",t.a)}function E(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+w(t.c)+";font-style:"+b(t)+";font-weight:"+t.f+"00;"}function M(t,e,i,n,s,o){this.g=t,this.j=e,this.a=n,this.c=i,this.f=s||3e3,this.h=o||void 0}function D(t,e,i,n,s,o,h){this.v=t,this.B=e,this.c=i,this.a=n,this.s=h||"BESbswy",this.f={},this.w=s||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new B(this.c,this.s),this.h=new B(this.c,this.s),this.j=new B(this.c,this.s),this.m=new B(this.c,this.s),t=E(t=new T(this.a.c+",serif",k(this.a))),this.g.a.style.cssText=t,t=E(t=new T(this.a.c+",sans-serif",k(this.a))),this.h.a.style.cssText=t,t=E(t=new T("serif",k(this.a))),this.j.a.style.cssText=t,t=E(t=new T("sans-serif",k(this.a))),this.m.a.style.cssText=t,S(this.g),S(this.h),S(this.j),S(this.m)}C.prototype.c=function(t){for(var e=[],i=0;i<arguments.length;i++)e.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},M.prototype.start=function(){var t=this.c.o.document,e=this,i=r(),n=new Promise((function(n,s){!function o(){r()-i>=e.f?s():t.fonts.load(function(t){return b(t)+" "+t.f+"00 300px "+w(t.c)}(e.a),e.h).then((function(t){1<=t.length?n():setTimeout(o,25)}),(function(){s()}))}()})),s=null,o=new Promise((function(t,i){s=setTimeout(i,e.f)}));Promise.race([o,n]).then((function(){s&&(clearTimeout(s),s=null),e.g(e.a)}),(function(){e.j(e.a)}))};var F={D:"serif",C:"sans-serif"},O=null;function G(){if(null===O){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);O=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return O}function W(t,e,i){for(var n in F)if(F.hasOwnProperty(n)&&e===t.f[F[n]]&&i===t.f[F[n]])return!0;return!1}function H(t){var e,i=t.g.a.offsetWidth,n=t.h.a.offsetWidth;(e=i===t.f.serif&&n===t.f["sans-serif"])||(e=G()&&W(t,i,n)),e?r()-t.A>=t.w?G()&&W(t,i,n)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?V(t,t.v):V(t,t.B):function(t){setTimeout(h((function(){H(this)}),t),50)}(t):V(t,t.v)}function V(t,e){setTimeout(h((function(){d(this.g.a),d(this.h.a),d(this.j.a),d(this.m.a),e(this.a)}),t),0)}function N(t,e,i){this.c=t,this.a=e,this.f=0,this.m=this.j=!1,this.s=i}D.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=r(),H(this)};var z=null;function U(t){0==--t.f&&t.j&&(t.m?((t=t.a).g&&p(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),I(t,"active")):_(t.a))}function j(t){this.j=t,this.a=new L,this.h=0,this.f=this.g=!0}function Y(t,e,i,n,s){var o=0==--t.h;(t.f||t.g)&&setTimeout((function(){var t=s||null,r=n||{};if(0===i.length&&o)_(e.a);else{e.f+=i.length,o&&(e.j=o);var a,l=[];for(a=0;a<i.length;a++){var c=i[a],u=r[c.c],d=e.a,f=c;if(d.g&&p(d.f,[d.a.c("wf",f.c,k(f).toString(),"loading")]),I(d,"fontloading",f),d=null,null===z)if(window.FontFace){f=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var x=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);z=f?42<parseInt(f[1],10):!x}else z=!1;d=z?new M(h(e.g,e),h(e.h,e),e.c,c,e.s,u):new D(h(e.g,e),h(e.h,e),e.c,c,e.s,t,u),l.push(d)}for(a=0;a<l.length;a++)l[a].start()}}),0)}function X(t,e){this.c=t,this.a=e}function q(t,e){this.c=t,this.a=e}function Q(t,e){this.c=t||Z,this.a=[],this.f=[],this.g=e||""}N.prototype.g=function(t){var e=this.a;e.g&&p(e.f,[e.a.c("wf",t.c,k(t).toString(),"active")],[e.a.c("wf",t.c,k(t).toString(),"loading"),e.a.c("wf",t.c,k(t).toString(),"inactive")]),I(e,"fontactive",t),this.m=!0,U(this)},N.prototype.h=function(t){var e=this.a;if(e.g){var i=f(e.f,e.a.c("wf",t.c,k(t).toString(),"active")),n=[],s=[e.a.c("wf",t.c,k(t).toString(),"loading")];i||n.push(e.a.c("wf",t.c,k(t).toString(),"inactive")),p(e.f,n,s)}I(e,"fontinactive",t),U(this)},j.prototype.load=function(t){this.c=new a(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,function(t,e,i){var n=[],s=i.timeout;!function(t){t.g&&p(t.f,[t.a.c("wf","loading")]),I(t,"loading")}(e);n=function(t,e,i){var n,s=[];for(n in e)if(e.hasOwnProperty(n)){var o=t.c[n];o&&s.push(o(e[n],i))}return s}(t.a,i,t.c);var o=new N(t.c,e,s);for(t.h=n.length,e=0,i=n.length;e<i;e++)n[e].load((function(e,i,n){Y(t,o,e,i,n)}))}(this,new A(this.c,t),t)},X.prototype.load=function(t){var e=this,i=e.a.projectId,n=e.a.version;if(i){var s=e.c.o;g(this.c,(e.a.api||"https://fast.fonts.net/jsapi")+"/"+i+".js"+(n?"?v="+n:""),(function(n){n?t([]):(s["__MonotypeConfiguration__"+i]=function(){return e.a},function e(){if(s["__mti_fntLst"+i]){var n,o=s["__mti_fntLst"+i](),h=[];if(o)for(var r=0;r<o.length;r++){var a=o[r].fontfamily;null!=o[r].fontStyle&&null!=o[r].fontWeight?(n=o[r].fontStyle+o[r].fontWeight,h.push(new T(a,n))):h.push(new T(a))}t(h)}else setTimeout((function(){e()}),50)}())})).id="__MonotypeAPIScript__"+i}else t([])},q.prototype.load=function(t){var e,i,n=this.a.urls||[],s=this.a.families||[],o=this.a.testStrings||{},h=new P;for(e=0,i=n.length;e<i;e++)x(this.c,n[e],y(h));var r=[];for(e=0,i=s.length;e<i;e++)if((n=s[e].split(":"))[1])for(var a=n[1].split(","),l=0;l<a.length;l+=1)r.push(new T(n[0],a[l]));else r.push(new T(n[0]));v(h,(function(){t(r,o)}))};var Z="https://fonts.googleapis.com/css";function $(t){this.f=t,this.a=[],this.c={}}var J={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},K={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},tt={i:"i",italic:"i",n:"n",normal:"n"},et=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function it(t,e){this.c=t,this.a=e}var nt={Arimo:!0,Cousine:!0,Tinos:!0};function st(t,e){this.c=t,this.a=e}function ot(t,e){this.c=t,this.f=e,this.a=[]}it.prototype.load=function(t){var e=new P,i=this.c,n=new Q(this.a.api,this.a.text),s=this.a.families;!function(t,e){for(var i=e.length,n=0;n<i;n++){var s=e[n].split(":");3==s.length&&t.f.push(s.pop());var o="";2==s.length&&""!=s[1]&&(o=":"),t.a.push(s.join(o))}}(n,s);var o=new $(s);!function(t){for(var e=t.f.length,i=0;i<e;i++){var n=t.f[i].split(":"),s=n[0].replace(/\+/g," "),o=["n4"];if(2<=n.length){var h;if(h=[],r=n[1])for(var r,a=(r=r.split(",")).length,l=0;l<a;l++){var c;if((c=r[l]).match(/^[\w-]+$/))if(null==(d=et.exec(c.toLowerCase())))c="";else{if(c=null==(c=d[2])||""==c?"n":tt[c],null==(d=d[1])||""==d)d="4";else var u=K[d],d=u||(isNaN(d)?"4":d.substr(0,1));c=[c,d].join("")}else c="";c&&h.push(c)}0<h.length&&(o=h),3==n.length&&(h=[],0<(n=(n=n[2])?n.split(","):h).length&&(n=J[n[0]])&&(t.c[s]=n))}for(t.c[s]||(n=J[s])&&(t.c[s]=n),n=0;n<o.length;n+=1)t.a.push(new T(s,o[n]))}}(o),x(i,function(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,i=[],n=0;n<e;n++)i.push(t.a[n].replace(/ /g,"+"));return e=t.c+"?family="+i.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}(n),y(e)),v(e,(function(){t(o.a,o.c,nt)}))},st.prototype.load=function(t){var e=this.a.id,i=this.c.o;e?g(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",(function(e){if(e)t([]);else if(i.Typekit&&i.Typekit.config&&i.Typekit.config.fn){e=i.Typekit.config.fn;for(var n=[],s=0;s<e.length;s+=2)for(var o=e[s],h=e[s+1],r=0;r<h.length;r++)n.push(new T(o,h[r]));try{i.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(n)}}),2e3):t([])},ot.prototype.load=function(t){var e=this.f.id,i=this.c.o,n=this;e?(i.__webfontfontdeckmodule__||(i.__webfontfontdeckmodule__={}),i.__webfontfontdeckmodule__[e]=function(e,i){for(var s=0,o=i.fonts.length;s<o;++s){var h=i.fonts[s];n.a.push(new T(h.name,R("font-weight:"+h.weight+";font-style:"+h.style)))}t(n.a)},g(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(t){return t.o.location.hostname||t.a.location.hostname}(this.c)+"/"+e+".js",(function(e){e&&t([])}))):t([])};var ht=new j(window);ht.a.c.custom=function(t,e){return new q(e,t)},ht.a.c.fontdeck=function(t,e){return new ot(e,t)},ht.a.c.monotype=function(t,e){return new X(e,t)},ht.a.c.typekit=function(t,e){return new st(e,t)},ht.a.c.google=function(t,e){return new it(e,t)};var rt={load:h(ht.load,ht)};void 0===(n=function(){return rt}.call(e,i,e,t))||(t.exports=n)}()},function(t,e,i){"use strict";i.r(e),i.d(e,"Stage",(function(){return y})),i.d(e,"Layer",(function(){return m})),i.d(e,"Point",(function(){return k})),i.d(e,"Circle",(function(){return I})),i.d(e,"Triangle",(function(){return S})),i.d(e,"Vector",(function(){return u})),i.d(e,"Line",(function(){return D})),i.d(e,"Text",(function(){return W})),i.d(e,"Arc",(function(){return N})),i.d(e,"Angle",(function(){return X})),i.d(e,"Ruler",(function(){return Z})),i.d(e,"Pencil",(function(){return tt})),i.d(e,"Protractor",(function(){return rt})),i.d(e,"Compass",(function(){return dt})),i.d(e,"Clock",(function(){return ft})),i.d(e,"Vector2",(function(){return h})),i.d(e,"Slide",(function(){return gt})),i.d(e,"SlideManager",(function(){return yt})),i.d(e,"LineConstructor",(function(){return wt})),i.d(e,"MultilineConstructor",(function(){return At})),i.d(e,"ArcConstructor",(function(){return Bt}));var n=i(0);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;s(this,t),this.x=e,this.y=i}var e,i,n;return e=t,(i=[{key:"set",value:function(t,e){this.x=t,this.y=e}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"getLength",value:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}},{key:"getUnitVector",value:function(){var e=this.getLength();return new t(this.x/e,this.y/e)}},{key:"getVectorOfNLength",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=this.getLength();return new t(this.x/i*e,this.y/i*e)}},{key:"makeVectorOfNLength",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this.getLength();this.x=this.x/e*t,this.y=this.y/e*t}},{key:"copyFrom",value:function(t){this.x=t.x,this.y=t.y}},{key:"subtractFrom",value:function(e){return new t(e.x-this.x,e.y-this.y)}},{key:"copyTo",value:function(t){}}])&&o(e.prototype,i),n&&o(e,n),t}(),r=i(1),a=i.n(r);function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}i(1);var c=i(2),u=function(){function t(e,i,n){for(var s in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pos=new h(e.x,e.y),this.direction=new h(i.x,i.y),this.color="#ff3300",this.lineWidth=1.6,this.headLineWidth=1,n)null==this[s]&&console.warn(t.name+": "+s+" parameter is undefined."),this[s]=n[s];this.posPx={},this.posTipPx={},this.headBaseLeftPx={},this.headBaseRightPx={},this.neckLocationPx={},this.visible=!0,this.type="Vector",this.calculatePoints()}var e,i,n;return e=t,(i=[{key:"setContext",value:function(t,e){this.context=t,this.container=e,this.updatePixelLocation(),this.lineWidth=this.lineWidth*this.container.devicePixelRatio,this.headLineWidth=this.headLineWidth*this.container.devicePixelRatio}},{key:"render",value:function(){this.context.beginPath(),this.context.lineWidth=this.lineWidth,this.context.strokeStyle=this.color,this.context.fillStyle=this.color,this.context.moveTo(this.posPx.x,this.posPx.y),this.context.lineTo(this.posTipPx.x,this.posTipPx.y),this.context.stroke(),this.context.lineJoin="round",this.context.lineWidth=this.headLineWidth,this.context.beginPath(),this.context.moveTo(this.posTipPx.x,this.posTipPx.y),this.context.lineTo(this.headBaseLeftPx.x,this.headBaseLeftPx.y),this.context.lineTo(this.headBaseRightPx.x,this.headBaseRightPx.y),this.context.closePath(),this.context.stroke(),this.context.fill()}},{key:"calculatePoints",value:function(){this.normalVector={x:-this.direction.y,y:this.direction.x},this.normalUnitVector=c.getUnitVector(this.normalVector),this.unitVector=c.getUnitVector(this.direction),this.neckLeftVector={x:6*this.normalUnitVector.x,y:-6*this.normalUnitVector.y},this.neckVectorPx={x:-16*this.unitVector.x,y:16*this.unitVector.y}}},{key:"update",value:function(t,e){this.pos.copyFrom(t),this.direction.copyFrom(e),this.calculatePoints(),this.updatePixelLocation()}},{key:"updatePixelLocation",value:function(){this.container.getPixFromCoorPtFT(this.pos,this.posPx),this.container.getPixFromCoorPtFT({x:this.pos.x+this.direction.x,y:this.pos.y+this.direction.y},this.posTipPx),this.neckLocationPx.x=this.posTipPx.x+this.neckVectorPx.x,this.neckLocationPx.y=this.posTipPx.y+this.neckVectorPx.y,this.headBaseLeftPx.x=this.neckLocationPx.x+this.neckLeftVector.x,this.headBaseLeftPx.y=this.neckLocationPx.y+this.neckLeftVector.y,this.headBaseRightPx.x=this.neckLocationPx.x-this.neckLeftVector.x,this.headBaseRightPx.y=this.neckLocationPx.y-this.neckLeftVector.y}},{key:"getBoundingBoxCoor",value:function(){}}])&&l(e.prototype,i),n&&l(e,n),t}();function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,i){return e&&p(t.prototype,e),i&&p(t,i),t}var x=function(){function t(e,i,n){d(this,t),this.stage=n,this.context=e,this.contextInstrument=i,this.steps=[5,2,1],this.minorAxisDivders=[5,4,5],this.scaleBy=1.06,this.devicePixelRatio=n.ratio,this.defaultFontSize=n.defaultFontSize,this.font1Unit=n.font1Unit,this.drawMinorGridLines=!1,this.drawMajorGuidLines=!0,this.drawAxes=!0,this.gridType=t.GRID_TYPE_PAPER,this.colorGrid="#7c7c7c",this.colorText="#32003f",this.tickFontSize=12*this.devicePixelRatio,this.tickFontSizeText=this.tickFontSize+"pt Calibri",this.tickLabelBackground=this.stage.canvas.style.background,this.tickBackgroundHeight=this.tickFontSize+4,this.stage.canvas.width>1e3?this.initialScale=.02:this.initialScale=.01;var s=this.stage.canvasCSSWidth/50,o=s,r=this.stage.canvasCSSHeight*(s/this.stage.canvasCSSWidth);if(2*o<19/1.8?r=(o=19/1.8/2)*this.stage.canvasCSSHeight/this.stage.canvasCSSWidth:(r<o||2*r>15.625)&&(o=(r=7.8125)*this.stage.canvasCSSWidth/this.stage.canvasCSSHeight),this.updatingScaleOrRange=!1,this.tick_pos_px={},this.ptOriginPx={},this.points=[],this.lines=[],this.segments=[],this.circles=[],this.rectangles=[],this.triangles=[],this.angles=[],this.vectors=[],this.lines=[],this.instruments=[],this.texts=[],this.pinchLastPointPx=new h,this.last_mouse_loc_coor=new h,this.panStartPointPx=new h,this.groupPoints=new g,this.groupLines=new g,this.groupShapes=new g,this.gridType==t.GRID_TYPE_PAPER){this.paperLineWidth=.5*this.devicePixelRatio,this.marginLineWidth=.6*this.defaultCoorPerPixel;if(this.stage.canvasCSSWidth/this.stage.canvasCSSHeight<19/1.8*10/156.25){var a=156.25*o/(19/1.8*10);this.paperTopLeftPtCoor=new h(-o,a),this.paperTopRightPtCoor=new h(o,a),this.paperBottomLeftPtCoor=new h(-o,-a),this.paperBottomRightPtCoor=new h(o,-a)}else{var l=r*(19/1.8*10)/156.25;this.paperTopLeftPtCoor=new h(-l,r),this.paperTopRightPtCoor=new h(l,r),this.paperBottomLeftPtCoor=new h(-l,-r),this.paperBottomRightPtCoor=new h(l,-r)}this.paperTopLeftPtPx=new h,this.paperTopRightPtPx=new h,this.paperBottomLeftPtPx=new h,this.paperBottomRightPtPx=new h;this.lineHeight=.7;var c=this.paperTopLeftPtCoor.y-this.paperBottomLeftPtCoor.y-1-.8;this.noOfLines=parseInt(c/this.lineHeight),this.marginWidth=1.1,this.noOfLines%2==0?this.firstLineStartCoor=new h(this.paperTopLeftPtCoor.x,(this.noOfLines/2-1)*this.lineHeight):this.firstLineStartCoor=new h(this.paperTopLeftPtCoor.x,parseInt(this.noOfLines/2)*this.lineHeight),this.marginTopCoor=new h(this.paperTopLeftPtCoor.x+this.marginWidth,this.paperTopLeftPtCoor.y),this.marginTopPx=new h,this.firstLineStartPx=new h}else this.minMajorGridWidth=150*this.devicePixelRatio;this.updateBoundaryCoordinateLRTB(-o,o,r,-r),this.defaultCoorPerPixel=this.coorPerPixel}return f(t,[{key:"addItem",value:function(e){if("Ruler"==e.type||"Pencil"==e.type||"Protractor"==e.type||"Compass"==e.type)this.instruments.push(e),e.setContext(this.contextInstrument,this);else{if("Text"==e.type)return this.texts.push(e),void e.setContext(this);"Point"===e.type?(this.points.push(e),this.groupPoints.add(e)):"Angle"==e.type?(this.angles.push(e),this.groupPoints.add(e)):"Circle"===e.type?(this.circles.push(e),this.groupShapes.add(e)):"Triangle"===e.type?(this.triangles.push(e),this.groupShapes.add(e)):"Vector"==e.type?(this.vectors.push(e),this.groupLines.add(e)):"Line"!=e.type&&"Arc"!=e.type||(this.lines.push(e),this.groupLines.add(e)),e.setContext(this.context,this)}this.gridType===t.GRID_TYPE_PAPER?this.render=this.renderPaper:(this.gridType,t.GRID_TYPE_GRID,this.render=this.renderGrid)}},{key:"removeItem",value:function(t){"Ruler"==t.type||"Pencil"==t.type||"Protractor"==t.type||"Compass"==t.type?this.removeFromArray(this.instruments,t):"Text"==t.type?this.removeFromArray(this.texts,t):"Point"===t.type?(this.removeFromArray(this.points,t),this.groupPoints.remove(t)):"Angle"==t.type?(this.removeFromArray(this.angles,t),this.groupPoints.remove(t)):"Circle"===t.type?(this.removeFromArray(this.circles,t),this.groupShapes.remove(t)):"Triangle"===t.type?(this.removeFromArray(this.triangles,t),this.groupShapes.remove(t)):"Vector"==t.type?(this.removeFromArray(this.vectors,t),this.groupLines.remove(t)):"Line"!=t.type&&"Arc"!=t.type||(this.removeFromArray(this.lines,t),this.groupLines.remove(t))}},{key:"renderPaper",value:function(){this.context.beginPath(),this.context.strokeStyle="#33333355",this.context.lineJoin="round",this.context.lineWidth=1,this.context.fillStyle="#fffef9",this.context.moveTo(this.paperTopLeftPtPx.x,this.paperTopLeftPtPx.y),this.context.lineTo(this.paperTopRightPtPx.x,this.paperTopRightPtPx.y),this.context.lineTo(this.paperBottomRightPtPx.x,this.paperBottomRightPtPx.y),this.context.lineTo(this.paperBottomLeftPtPx.x,this.paperBottomLeftPtPx.y),this.context.closePath(),this.context.stroke(),this.context.fill(),this.context.lineWidth=this.paperLineWidth,this.context.strokeStyle="#6CCFF6",this.context.beginPath();for(var t=this.firstLineStartPx.y,e=0;e<this.noOfLines;e++)this.context.moveTo(this.paperTopLeftPtPx.x,t),this.context.lineTo(this.paperBottomRightPtPx.x,t),t+=this.lineHeightPx;this.context.stroke(),this.context.lineWidth=this.marginLineWidth,this.context.beginPath(),this.context.strokeStyle="#6CCFF688",this.context.moveTo(this.marginTopPx.x,this.marginTopPx.y),this.context.lineTo(this.marginTopPx.x,this.paperBottomLeftPtPx.y),this.context.stroke(),this.renderItems()}},{key:"renderGrid",value:function(){var t=this;for(this.go=!0,this.n=1;this.go;){this.possibleSteps=this.steps.map((function(e){return e*Math.pow(10,t.widthCoor.toFixed(0).length-t.n)})),this.n++;for(var e=0;e<this.possibleSteps.length;e++)if(this.pixel_per_step=this.stage.canvasWidth/(this.widthCoor/this.possibleSteps[e]),this.pixel_per_step<this.minMajorGridWidth){this.left_to_start=Math.ceil(this.left/this.possibleSteps[e])*this.possibleSteps[e],this.bottom_to_start=Math.ceil(this.bottom/this.possibleSteps[e])*this.possibleSteps[e],this.step=this.possibleSteps[e],this.minorGridDivider=this.minorAxisDivders[e],this.stepPx=parseInt(this.step/this.coorPerPixel/this.minorGridDivider),this.go=!1;break}}if(this.context.beginPath(),this.context.strokeStyle=this.colorGrid,this.context.lineWidth=1,this.context.font=this.tickFontSizeText,this.context.textAlign="center",this.context.textBaseline="bottom",this.context.mozImageSmoothingEnabled=!1,this.yTickOffsetRight=5,this.no_of_ticks_x=(this.right-this.left_to_start)/this.step,this.no_of_ticks_y=(this.top-this.bottom_to_start)/this.step,this.drawMajorGuidLines){for(var i=0;i<this.no_of_ticks_x;i++)this.tick_value=parseFloat((this.left_to_start+i*this.step).toFixed(10)),this.getPixFromCoorFT(this.tick_value,0,this.tick_pos_px),0!=this.tick_value&&(this.context.moveTo(this.tick_pos_px.x,this.stage.canvasHeight),this.context.lineTo(this.tick_pos_px.x,0));for(var n=0;n<this.no_of_ticks_y;n++)this.pt_for_lb=(this.bottom_to_start+n*this.step).toFixed(10),this.tick_value=parseFloat(this.pt_for_lb),this.getPixFromCoorFT(0,this.tick_value,this.tick_pos_px),0!=this.tick_value&&(this.context.moveTo(0,this.tick_pos_px.y),this.context.lineTo(this.stage.canvasWidth,this.tick_pos_px.y))}if(this.context.stroke(),this.drawAxes){this.getPixFromCoorFT(0,0,this.ptOriginPx),this.context.beginPath(),this.context.strokeStyle="#000000",this.context.lineWidth=1.3,this.context.moveTo(0,this.ptOriginPx.y),this.context.lineTo(this.stage.canvasWidth,this.ptOriginPx.y),this.context.moveTo(this.ptOriginPx.x,0),this.context.lineTo(this.ptOriginPx.x,this.stage.canvasHeight),this.context.stroke(),this.context.lineWidth=.3,this.context.strokeStyle="#222222",this.context.textBaseline="top";for(var s=-1;s<this.no_of_ticks_x;s++)if(this.tick_value=parseFloat((this.left_to_start+s*this.step).toFixed(10)),this.getPixFromCoorFT(this.tick_value,0,this.tick_pos_px),this.widthXLabel=this.context.measureText(this.tick_value).width,0==this.tick_value?(this.context.textAlign="right",this.context.fillStyle=this.colorText,this.context.fillText(this.tick_value,this.tick_pos_px.x-this.yTickOffsetRight,this.tick_pos_px.y+4),this.context.textAlign="center"):-1!=s&&(this.context.fillStyle=this.stage.bgColor,this.context.fillRect(this.tick_pos_px.x-2-this.widthXLabel/2,this.tick_pos_px.y+3,this.widthXLabel+4,this.tickBackgroundHeight),this.context.fillStyle=this.colorText,this.context.fillText(this.tick_value,this.tick_pos_px.x,this.tick_pos_px.y+4)),this.drawMinorGridLines)for(var o=1;o<this.minorGridDivider;o++)this.context.moveTo(this.tick_pos_px.x+this.stepPx*o,this.stage.canvasHeight),this.context.lineTo(this.tick_pos_px.x+this.stepPx*o,0);this.context.textAlign="right",this.context.textBaseline="middle";for(var h=-1;h<this.no_of_ticks_y;h++)if(this.tick_value=parseFloat((this.bottom_to_start+h*this.step).toFixed(10)),this.getPixFromCoorFT(0,this.tick_value,this.tick_pos_px),0!=this.tick_value&&-1!=h&&(this.labelWidth=this.context.measureText(this.tick_value).width+4,this.context.fillStyle=this.stage.bgColor,this.context.fillRect(this.tick_pos_px.x-this.labelWidth-this.yTickOffsetRight,this.tick_pos_px.y-this.tickFontSize/2,this.labelWidth,this.tickFontSize),this.context.fillStyle=this.colorText,this.context.fillText(this.tick_value,this.tick_pos_px.x-this.yTickOffsetRight,this.tick_pos_px.y)),this.drawMinorGridLines)for(var r=1;r<this.minorGridDivider;r++)this.context.moveTo(0,this.tick_pos_px.y-this.stepPx*r),this.context.lineTo(this.stage.canvasWidth,this.tick_pos_px.y-this.stepPx*r);this.context.stroke()}this.renderItems()}},{key:"renderItems",value:function(){this.groupShapes.render(),this.groupLines.render(),this.groupPoints.render(),this.instruments.forEach((function(t){t.render()}))}},{key:"tapHanlder",value:function(t){var e;for(this.itemTapped=!1,this.tempItem,e=0;e<this.groupPoints.items.length;e++)this.tempItem=this.groupPoints.items[e],this.tempItem.checkSelection(t)&&!this.itemTapped?(this.groupPoints.items[e].handleTap(!0),this.itemTapped=!0):this.tempItem.handleTap(!1);for(e=0;e<this.groupShapes.items.length;e++)this.groupShapes.items[e].checkSelection(t)&&!this.itemTapped?(this.groupShapes.items[e].handleTap(!0),this.itemTapped=!0):this.groupShapes.items[e].handleTap(!1)}},{key:"wheelHandler",value:function(t,e){this.updatingScaleOrRange=!0,this.mouseLocCoor=this.getCoorFromPixPt(t),this.updateBoundaryCoordinateLRTB(this.mouseLocCoor.x-(this.mouseLocCoor.x-this.left)*e,this.mouseLocCoor.x-(this.mouseLocCoor.x-this.right)*e,this.mouseLocCoor.y-(this.mouseLocCoor.y-this.top)*e,this.mouseLocCoor.y-(this.mouseLocCoor.y-this.bottom)*e),this.updatingScaleOrRange=!1}},{key:"pinchStartHandler",value:function(t){this.pinchLastPointPx.copyFrom(t),this.last_scale=1,this.updatingScaleOrRange=!0}},{key:"pinchHandler",value:function(t,e){this.scale=this.last_scale/e,this.mouse_loc_coor=this.getCoorFromPixPt(t),this.getCoorFromPixPtFT(this.pinchLastPointPx,this.last_mouse_loc_coor),this.updateBoundaryCoordinateLRTB(this.mouse_loc_coor.x-(this.mouse_loc_coor.x-this.left)*this.scale-(this.mouse_loc_coor.x-this.last_mouse_loc_coor.x),this.mouse_loc_coor.x+(this.right-this.mouse_loc_coor.x)*this.scale-(this.mouse_loc_coor.x-this.last_mouse_loc_coor.x),this.mouse_loc_coor.y+(this.top-this.mouse_loc_coor.y)*this.scale-(this.mouse_loc_coor.y-this.last_mouse_loc_coor.y),this.mouse_loc_coor.y-(this.mouse_loc_coor.y-this.bottom)*this.scale-(this.mouse_loc_coor.y-this.last_mouse_loc_coor.y)),this.last_scale=e,this.pinchLastPointPx=t}},{key:"pinchEndHandler",value:function(t){this.updatingScaleOrRange=!1}},{key:"pinchCancelHandler",value:function(t){this.updatingScaleOrRange=!1}},{key:"panStartHandler",value:function(t){var e,i;for(e=0;e<this.groupShapes.items.length;e++)if((i=this.groupPoints.items[e]).visible&&i.pannable&&i.checkSelection(t))return i.handlePanStart(t),this.pannedItem=i,!0;for(e=0;e<this.instruments.length;e++)if((i=this.instruments[e]).visible&&i.pannable&&i.checkSelection(t))return i.handlePanStart(t),this.pannedItem=i,!0;this.panStartPointPx.copyFrom(t),this.updatingScaleOrRange=!0}},{key:"panMoveHandler",value:function(t){this.pannedItem?this.pannedItem.handlePanMove(t):(this.updateBoundaryCoordinateDelta((t.x-this.panStartPointPx.x)*(this.widthCoor/this.stage.canvasWidth),(t.y-this.panStartPointPx.y)*(this.widthCoor/this.stage.canvasWidth)),this.panStartPointPx.copyFrom(t))}},{key:"panEndHandler",value:function(t){this.pannedItem?(this.pannedItem.handlePanEnd(t),this.pannedItem=void 0):(this.updatingScaleOrRange=!1,this.pannedItem=void 0)}},{key:"moveAndScale",value:function(t,e){var i,s=this;this.oldCenter={x:(this.right+this.left)/2,y:(this.top+this.bottom)/2,coorPerPixel:this.coorPerPixel},e||(i={x:t.x,y:t.y,coorPerPixel:this.defaultCoorPerPixel});var o=this.stage.canvasWidth/2,h=this.stage.canvasHeight/2,r=new n.a.Tween(this.oldCenter).to(i,500).easing(n.a.Easing.Quadratic.InOut).onUpdate((function(t){s.updateBoundaryCoordinateLRTB(t.x-o*t.coorPerPixel,t.x+o*t.coorPerPixel,t.y+h*t.coorPerPixel,t.y-h*t.coorPerPixel),s.adjustMesurementScales(),s.updatingScaleOrRange&&n.a.remove(r)})).start()}},{key:"updateBoundaryCoordinateLRTB",value:function(t,e,i,n){this.left=t,this.right=e,this.widthCoor=e-t,this.top=i,this.bottom=n,this.heightCoor=i-n,this.coorPerPixel=this.widthCoor/this.stage.canvasWidth,this.adjustMesurementScales(),this.updatePixelLocation()}},{key:"updateBoundaryCoordinate",value:function(t,e,i,n){this.left=t,this.right=t+e,this.widthCoor=e,this.top=i,this.bottom=i-n,this.heightCoor=n,this.coorPerPixel=e/this.stage.canvasWidth,this.updatePixelLocation()}},{key:"updateBoundaryCoordinateDelta",value:function(t,e){this.left-=t,this.right=this.left+this.widthCoor,this.top+=e,this.bottom=this.top-this.heightCoor,this.updatePixelLocation()}},{key:"getPixFromCoorPt",value:function(t){return{x:this.stage.canvasWidth*(t.x-this.left)/this.widthCoor,y:this.stage.canvasHeight-this.stage.canvasHeight*(t.y-this.bottom)/this.heightCoor}}},{key:"getPixFromCoorPtFT",value:function(t,e){e.x=this.stage.canvasWidth*(t.x-this.left)/this.widthCoor,e.y=this.stage.canvasHeight-this.stage.canvasHeight*(t.y-this.bottom)/this.heightCoor}},{key:"getPixFromCoorPtVT",value:function(t,e){e.set(this.stage.canvasWidth*(t.x-this.left)/this.widthCoor,this.stage.canvasHeight-this.stage.canvasHeight*(t.y-this.bottom)/this.heightCoor)}},{key:"getPixFromCoorPtFTwOF",value:function(t,e,i){e.x=i.x+this.stage.canvasWidth*(t.x-this.left)/this.widthCoor,e.y=i.y+this.stage.canvasHeight-this.stage.canvasHeight*(t.y-this.bottom)/this.heightCoor}},{key:"getPixFromCoorPtRounded",value:function(t){return{x:this.stage.canvasWidth*(t.x-this.left)/this.widthCoor,y:this.stage.canvasHeight-this.stage.canvasHeight*(t.y-this.bottom)/this.heightCoor}}},{key:"getPixFromCoor",value:function(t,e){return{x:this.stage.canvasWidth*(t-this.left)/this.widthCoor,y:this.stage.canvasHeight-this.stage.canvasHeight*(e-this.bottom)/this.heightCoor}}},{key:"getPixFromCoorFT",value:function(t,e,i){i.x=this.stage.canvasWidth*(t-this.left)/this.widthCoor,i.y=this.stage.canvasHeight-this.stage.canvasHeight*(e-this.bottom)/this.heightCoor}},{key:"getPixFromCoorRounded",value:function(t,e){return{x:this.stage.canvasWidth*(t-this.left)/this.widthCoor,y:this.stage.canvasHeight-this.stage.canvasHeight*(e-this.bottom)/this.heightCoor}}},{key:"getCoorFromPixPt",value:function(t){return{x:this.left+this.widthCoor*(t.x/this.stage.canvasWidth),y:this.bottom+this.heightCoor*((this.stage.canvasHeight-t.y)/this.stage.canvasHeight)}}},{key:"getCoorFromPixPtFT",value:function(t,e){e.x=this.left+this.widthCoor*(t.x/this.stage.canvasWidth),e.y=this.bottom+this.heightCoor*((this.stage.canvasHeight-t.y)/this.stage.canvasHeight)}},{key:"getCoorFromPixFT",value:function(t,e,i){i.x=this.left+this.widthCoor*(t/this.stage.canvasWidth),i.y=this.bottom+this.heightCoor*((this.stage.canvasHeight-e)/this.stage.canvasHeight)}},{key:"getCoorFromPix",value:function(t,e){return{x:this.left+this.widthCoor*(t/this.stage.canvasWidth),y:this.bottom+this.heightCoor*((this.stage.canvasHeight-e)/this.stage.canvasHeight)}}},{key:"updatePixelLocation",value:function(){this.gridType==t.GRID_TYPE_PAPER&&(this.getPixFromCoorPtFT(this.paperTopLeftPtCoor,this.paperTopLeftPtPx),this.getPixFromCoorPtFT(this.paperTopRightPtCoor,this.paperTopRightPtPx),this.getPixFromCoorPtFT(this.paperBottomLeftPtCoor,this.paperBottomLeftPtPx),this.getPixFromCoorPtFT(this.paperBottomRightPtCoor,this.paperBottomRightPtPx),this.getPixFromCoorPtFT(this.firstLineStartCoor,this.firstLineStartPx),this.getPixFromCoorPtFT(this.marginTopCoor,this.marginTopPx),this.lineHeightPx=this.lineHeight/this.coorPerPixel),this.groupPoints.items.forEach((function(t){t.visible&&t.updatePixelLocation()})),this.groupShapes.items.forEach((function(t){t.visible&&t.updatePixelLocation()})),this.groupLines.items.forEach((function(t){t.visible&&t.updatePixelLocation()})),this.instruments.forEach((function(t){t.visible&&t.updatePixelLocation()})),this.texts.forEach((function(t){t.visible&&t.updatePixelLocation()}))}},{key:"adjustMesurementScales",value:function(){this.angles.forEach((function(t){t.adjustScale()})),this.instruments.forEach((function(t){t.adjustScale()}))}},{key:"removeFromArray",value:function(t,e){for(var i=0;i<t.length;i++)if(t[i].id===e.id){t.splice(i,1);break}}}]),t}(),g=function(){function t(){d(this,t),this.items=[]}return f(t,[{key:"add",value:function(t){this.items.push(t)}},{key:"remove",value:function(t){for(var e=0;e<this.items.length;e++)if(this.items[e].id===t.id){this.items.splice(e,1);break}}},{key:"render",value:function(){this.items.forEach((function(t){t.render()}))}}]),t}();function P(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}x.GRID_TYPE_PAPER=0,x.GRID_TYPE_GRID=1,i(7);var y=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bgColor="#fafafa",this.containerElement=document.getElementById(e),this.containerElement.style.overflow="hidden",this.containerElement.style.position="relative",this.positionInfo=this.containerElement.getBoundingClientRect(),this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.background=this.bgColor,this.canvasInstruments=document.createElement("canvas"),this.canvasInstruments.style.position="absolute",this.canvasInstruments.style.background="transparent",this.canvasInstruments.style.zIndex=2,this.canvas.style.width=this.positionInfo.width+"px",this.canvas.style.height=this.positionInfo.height+"px",this.canvasInstruments.style.width=this.positionInfo.width+"px",this.canvasInstruments.style.height=this.positionInfo.height+"px",this.ratio=window.devicePixelRatio,console.log("window.devicePixelRatio "+window.devicePixelRatio),this.canvas.width=Math.floor(this.positionInfo.width*this.ratio),this.canvas.height=Math.floor(this.positionInfo.height*this.ratio),this.canvasInstruments.width=Math.floor(this.positionInfo.width*this.ratio),this.canvasInstruments.height=Math.floor(this.positionInfo.height*this.ratio),this.containerElement.appendChild(this.canvas),this.containerElement.appendChild(this.canvasInstruments),this.context=this.canvas.getContext("2d"),this.contextInstrument=this.canvasInstruments.getContext("2d"),this.canvasWidth=this.canvas.width,this.canvasHeight=this.canvas.height,this.canvasCSSWidth=parseInt(this.canvas.style.width.substring(0,this.canvas.style.width.length-2)),this.canvasCSSHeight=parseInt(this.canvas.style.height.substring(0,this.canvas.style.height.length-2)),this.hammer=new Hammer(this.canvasInstruments,{domEvents:!0}),this.hammer.get("pan").set({direction:Hammer.DIRECTION_ALL,threshold:0}),this.hammer.get("pinch").set({enable:!0,threshold:0}),this.hammer.on("panstart",(function(t){return i.panStartHandler(t)})),this.hammer.on("panmove",(function(t){return i.panMoveHandler(t)})),this.hammer.on("panend",(function(t){return i.panEndHandler(t)})),this.hammer.on("pinchstart",(function(t){return i.pinchStartHandler(t)})),this.hammer.on("pinch",(function(t){return i.pinchHandler(t)})),this.hammer.on("pinchend",(function(t){return i.pinchEndHandler(t)})),this.hammer.on("pinchcancel",(function(t){return i.pinchCancelHandler(t)})),this.hammer.on("tap",(function(t){return i.tapHandler(t)})),this.canvasInstruments.addEventListener("wheel",(function(t){return i.wheelHandler(t)})),this.currentPointerPos=new h,this.layers=[],this.grid=void 0;var n=Math.min(window.outerWidth,window.outerHeight);this.defaultFontSize=(8*this.getFontSize(n)).toFixed(2),this.font1Unit=this.defaultFontSize/14.8;var s=(8*this.getTextFontSize(n)).toFixed(2);document.getElementById("description_panel").style.fontSize=s+"px",this.console=document.getElementById("console")}var e,i,n;return e=t,(i=[{key:"getGrid",value:function(){return this.grid||(this.grid=new x(this.context,this.contextInstrument,this),this.grid.devicePixelRatio=this.ratio),this.grid}},{key:"tapHandler",value:function(t){this.currentCanvasPos=this.canvas.getBoundingClientRect(),this.currentPointerPos.set((t.center.x-this.currentCanvasPos.left)*this.grid.devicePixelRatio,(t.center.y-this.currentCanvasPos.top)*this.grid.devicePixelRatio),this.grid.tapHanlder(this.currentPointerPos)}},{key:"pinchStartHandler",value:function(t){this.currentCanvasPos=this.canvas.getBoundingClientRect(),this.currentPointerPos.set((t.center.x-this.currentCanvasPos.left)*this.grid.devicePixelRatio,(t.center.y-this.currentCanvasPos.top)*this.grid.devicePixelRatio),this.grid&&this.grid.pinchStartHandler(this.currentPointerPos)}},{key:"pinchHandler",value:function(t){this.currentCanvasPos=this.canvas.getBoundingClientRect(),this.currentPointerPos.set((t.center.x-this.currentCanvasPos.left)*this.grid.devicePixelRatio,(t.center.y-this.currentCanvasPos.top)*this.grid.devicePixelRatio),this.grid&&this.grid.pinchHandler(this.currentPointerPos,t.scale)}},{key:"pinchEndHandler",value:function(t){this.currentCanvasPos=this.canvas.getBoundingClientRect(),this.currentPointerPos.set((t.center.x-this.currentCanvasPos.left)*this.grid.devicePixelRatio,(t.center.y-this.currentCanvasPos.top)*this.grid.devicePixelRatio),this.grid&&this.grid.pinchEndHandler(this.currentPointerPos)}},{key:"pinchCancelHandler",value:function(t){this.currentCanvasPos=this.canvas.getBoundingClientRect(),this.currentPointerPos.set((t.center.x-this.currentCanvasPos.left)*this.grid.devicePixelRatio,(t.center.y-this.currentCanvasPos.top)*this.grid.devicePixelRatio),this.grid&&this.grid.pinchCancelHandler(this.currentPointerPos)}},{key:"panStartHandler",value:function(t){this.currentCanvasPos=this.canvas.getBoundingClientRect(),this.currentPointerPos.set((t.center.x-this.currentCanvasPos.left)*this.grid.devicePixelRatio,(t.center.y-this.currentCanvasPos.top)*this.grid.devicePixelRatio),this.grid&&this.grid.panStartHandler(this.currentPointerPos)}},{key:"panMoveHandler",value:function(t){this.currentCanvasPos=this.canvas.getBoundingClientRect(),this.currentPointerPos.set((t.center.x-this.currentCanvasPos.left)*this.grid.devicePixelRatio,(t.center.y-this.currentCanvasPos.top)*this.grid.devicePixelRatio),this.grid&&this.grid.panMoveHandler(this.currentPointerPos)}},{key:"panEndHandler",value:function(t){this.currentCanvasPos=this.canvas.getBoundingClientRect(),this.currentPointerPos.set((t.center.x-this.currentCanvasPos.left)*this.grid.devicePixelRatio,(t.center.y-this.currentCanvasPos.top)*this.grid.devicePixelRatio),this.grid&&this.grid.panEndHandler(this.currentPointerPos)}},{key:"wheelHandler",value:function(t){this.grid&&this.grid.wheelHandler({x:t.layerX*this.grid.devicePixelRatio,y:t.layerY*this.grid.devicePixelRatio},Math.pow(this.grid.scaleBy,Math.sign(t.deltaY)))}},{key:"addLayer",value:function(t){this.layers.push(t),t.setContext(this.context,this)}},{key:"render",value:function(){this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.contextInstrument.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.context.fillStyle=this.bgColor,this.context.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.grid&&this.grid.render()}},{key:"renderTest",value:function(){var t=80;this.context.beginPath(),this.context.lineWidth=.3,this.context.strokeStyle="#308EB2bb";for(var e=0;e<30;e++)this.context.moveTo(0,t),this.context.lineTo(this.canvasWidth,t),t+=30;this.context.stroke(),this.context.beginPath(),this.context.lineWidth=.9,this.context.strokeStyle="#0a7193",this.context.moveTo(80,0),this.context.lineTo(80,this.canvasHeight),this.context.stroke()}},{key:"writeToConsole",value:function(t){this.console.innerHTML+="<p>"+t+"</p>",this.console.scrollTop=this.console.scrollHeight}},{key:"getFontSize",value:function(t){var e=Math.pow(Math.pow(20,2.5),1/1.5),i=t*e/360;return this.fontSizeFunction(i,20,2.5)/e*1.85}},{key:"fontSizeFunction",value:function(t,e,i){return e*Math.pow(t,1/i)}},{key:"getTextFontSize",value:function(t){var e=Math.pow(Math.pow(20,1.7),1/.7),i=t*e/360;return this.fontSizeFunction(i,20,1.7)/e*1.85}}])&&P(e.prototype,i),n&&P(e,n),t}();function v(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var m=function(){function t(e){for(var i in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.smallItems=[],this.largeItems=[],this.widthCoor=200,e)null==this[i]&&console.warn(t.name+": "+i+" parameter is undefined."),this[i]=e[i]}var e,i,n;return e=t,(i=[{key:"setContext",value:function(t,e){this.context||(this.smallItems.forEach((function(e){e.setContext(t,container)})),this.largeItems.forEach((function(e){e.setContext(t,container)}))),this.context=t,this.stage=e,this.heightCoor=e.canvasHeight/e.canvasWidth*this.widthCoor,this.coorPerPixel=this.widthCoor/e.canvasWidth}},{key:"addItem",value:function(t){"Small"===t.itemSize?this.smallItems.push(t):"Large"===t.itemSize&&this.largeItems.push(t),t.setContext(this.context,this)}},{key:"removeItem",value:function(){}},{key:"render",value:function(){this.smallItems.forEach((function(t){t.render()})),this.largeItems.forEach((function(t){t.render()}))}},{key:"getPixFromCoorPt",value:function(t){return{x:Math.round(t.x/this.coorPerPixel)+.5,y:Math.round(this.stage.canvasHeight-t.y/this.coorPerPixel)+.5}}}])&&v(e.prototype,i),n&&v(e,n),t}();function C(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var T=i(1),w=i(2),k=function(){function t(e,i){for(var s in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type="Point",this.pos=new h(e.x,e.y),this.posPx={},this.color="#000000",this.borderColor=this.color+"55",this.fadeInTime=1e3,this.size=2,this.selected=!1,this.easingFunction=n.a.Easing.Elastic.Out,i)null==this[s]&&console.warn(t.name+": "+s+" parameter is undefined."),this[s]=i[s];this.borderColor=this.color+"55",this.attachedItemCallbacks=[],this.id="Point"+t.idCounter++}var e,i,s;return e=t,(i=[{key:"setContext",value:function(t,e){this.context=t,this.container=e,this.context&&this.container.getPixFromCoorPtFT(this.pos,this.posPx),this.adjustSizesWithPixelDensity(),this.borderSize=3*this.size,this.defaultSize=this.size}},{key:"show",value:function(){var t=this;this.borderSize=0,new n.a.Tween({size:0}).to({size:this.defaultSize},this.fadeInTime).easing(this.easingFunction).onStart((function(){t.visible=!0})).onUpdate((function(e){t.size=e.size,t.borderSize=3*e.size})).start()}},{key:"hide",value:function(t){var e=this;new n.a.Tween({size:this.size}).to({size:0},this.fadeInTime).onStart((function(){})).onUpdate((function(t){e.size=t.size,e.borderSize=3*t.size})).onComplete((function(){e.visible=!1,t&&t()})).start()}},{key:"render",value:function(){this.visible&&(this.context.beginPath(),this.context.arc(this.posPx.x,this.posPx.y,this.size,0,T.TWO_PI,!1),this.context.fillStyle=this.color,this.context.fill(),this.selected&&(this.context.lineWidth=this.borderSize,this.context.strokeStyle=this.borderColor,this.context.stroke()))}},{key:"handleTap",value:function(t){var e=this;t&&new n.a.Tween({size:0}).to({size:this.defaultSize},1e3).easing(n.a.Easing.Elastic.Out).onUpdate((function(t){e.size=t.size,e.borderSize=3*t.size})).start()}},{key:"updatePosCoor",value:function(t){this.pos.set(t.x,t.y),this.updatePixelLocation()}},{key:"updatePixelLocation",value:function(){this.container.getPixFromCoorPtFT(this.pos,this.posPx),this.notifyChanges()}},{key:"checkSelection",value:function(t){return w.getDistance(this.posPx,t)<this.borderSize+5}},{key:"getBoundingBoxCoor",value:function(){return{startX:this.pos.x,startY:this.pos.y,endX:this.pos.x,endY:this.pos.y}}},{key:"adjustSizesWithPixelDensity",value:function(){this.size=this.size*this.container.devicePixelRatio}},{key:"addAttachedItemCallback",value:function(t){this.attachedItemCallbacks.push(t)}},{key:"removeAttachedItemCallback",value:function(t){}},{key:"notifyChanges",value:function(){this.attachedItemCallbacks.forEach((function(t){t()}))}},{key:"delete",value:function(){this.container.removeItem(this)}}])&&C(e.prototype,i),s&&C(e,s),t}();k.idCounter=0;function b(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var R=i(1),A=i(2),_=i(4),I=function(){function t(e,i,n){for(var s in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.center=e,this.radius=i,this.color="#00bf19",this.innerColorOpacity=.1,this.borderWidth=2,this.angle=R.TWO_PI,n)null==this[s]&&console.warn(t.name+": "+s+" parameter is undefined."),this[s]=n[s];this.innerColorRGB=A.hexToRgb(this.color),this.innerColorRGBa="rgba("+this.innerColorRGB[0]+", "+this.innerColorRGB[1]+", "+this.innerColorRGB[2]+", "+this.innerColorOpacity+")",this.glowColorRGB=A.hexToRgb(this.color),this.glowColorRGBa="rgba("+this.glowColorRGB[0]+", "+this.glowColorRGB[1]+", "+this.glowColorRGB[2]+", 0.25)",this.type="Circle",this.shadowBlur=0,this.defaultShadowBlur=8,this.centerPx=new h,this.pannable=!0,this.visible=!1}var e,i,s;return e=t,(i=[{key:"setContext",value:function(t,e){var i=this;this.context=t,this.container=e,this.context&&(this.container.getPixFromCoorPtFT(this.center,this.centerPx),this.radiusPx=this.radius/this.container.coorPerPixel),this.originalAngle=this.angle,this.angle=0,this.innerColorRGBa="rgba("+this.innerColorRGB[0]+", "+this.innerColorRGB[1]+", "+this.innerColorRGB[2]+", 0)";var s=new n.a.Tween({opacity:0}).to({opacity:this.innerColorOpacity},200).easing(n.a.Easing.Quadratic.InOut).on("update",(function(t){i.innerColorRGBa="rgba("+i.innerColorRGB[0]+", "+i.innerColorRGB[1]+", "+i.innerColorRGB[2]+", "+t.opacity+")"}));new n.a.Tween({angle:0}).to({angle:this.originalAngle},900).easing(_.smooth).onStart((function(){i.visible=!0})).on("update",(function(t){i.angle=t.angle})).onComplete((function(){s.start()})).start()}},{key:"render",value:function(){this.context.beginPath(),this.context.arc(this.centerPx.x,this.centerPx.y,this.radiusPx,0,this.angle,!1),this.context.lineWidth=this.borderWidth,this.context.strokeStyle=this.color,this.context.stroke(),this.context.lineWidth=this.shadowBlur,this.context.strokeStyle=this.glowColorRGBa,this.context.stroke(),this.context.shadowBlur=0,this.context.fillStyle=this.innerColorRGBa,this.context.fill(),this.context.beginPath(),this.context.arc(this.centerPx.x,this.centerPx.y,3,0,this.angle,!1),this.context.fillStyle=this.color,this.context.fill()}},{key:"updatePosCoor",value:function(t,e){var i,s=this,o={centerX:this.center.x,centerY:this.center.y,radius:this.radius};i=e?{centerX:t.x,centerY:t.y,radius:e}:{centerX:t.x,centerY:t.y,radius:this.radius},new n.a.Tween(o).to(i,800).easing(n.a.Easing.Quadratic.InOut).on("update",(function(t){s.center.x=t.centerX,s.center.y=t.centerY,s.radius=t.radius,s.updatePixelLocation()})).start()}},{key:"handleTap",value:function(t){t?this.select():this.unselect()}},{key:"handlePanStart",value:function(t){console.log("pan start... ")}},{key:"handlePanMove",value:function(t){console.log("pan move..... ")}},{key:"select",value:function(){var t=this;this.selected?this.unselect():new n.a.Tween({val:0}).to({val:this.defaultShadowBlur},300).easing(_.selectionEasing).on("start",(function(){t.selected=!0})).on("update",(function(e){t.shadowBlur=e.val})).start()}},{key:"unselect",value:function(){var t=this;new n.a.Tween({val:this.shadowBlur}).to({val:0},500).easing(n.a.Easing.Quartic.Out).onStart((function(){t.selected=!1})).on("update",(function(e){t.shadowBlur=e.val})).start()}},{key:"animateSelectionEffect",value:function(){var t=this;this.shadowBlur=(Math.sin(10*this.selectionClock.getElapsedTime())+1)*this.defaultShadowBlur,this.selectionAniId=requestAnimationFrame((function(){return t.animateSelectionEffect()}))}},{key:"updatePixelLocation",value:function(){this.container.getPixFromCoorPtFT(this.center,this.centerPx),this.radiusPx=this.radius/this.container.coorPerPixel}},{key:"checkSelection",value:function(t){return A.getDistance(this.centerPx,t)<this.radiusPx}},{key:"getBoundingBoxCoor",value:function(){return{startX:this.center.x-this.radius.x,startY:this.center.y+this.radius.y,endX:this.center.x+this.radius.x,endY:this.center.y-this.radius.y}}}])&&b(e.prototype,i),s&&b(e,s),t}();function L(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}i(1);var B=i(2),S=function(){function t(e,i,n,s){for(var o in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.color="#ff0000",this.innerColorOpacity=.15,this.borderWidth=2.5,this.completeCallback=function(){},s)null==this[o]&&console.warn(t.name+": "+o+" parameter is undefined."),this[o]=s[o];this.innerColorRGB=B.hexToRgb(this.color),this.innerColorRGBa="rgba("+this.innerColorRGB[0]+", "+this.innerColorRGB[1]+", "+this.innerColorRGB[2]+", "+this.innerColorOpacity+")",this.vertexArr=[e,i,n],this.type="Triangle",this.completeConstruction=!1,this.attachedItems=[]}var e,i,s;return e=t,(i=[{key:"setContext",value:function(t,e){var i=this;this.context=t,this.container=e,this.vertexArrPx=[this.container.getPixFromCoorPt(this.vertexArr[0]),this.container.getPixFromCoorPt(this.vertexArr[1]),this.container.getPixFromCoorPt(this.vertexArr[2])],this.currentVtxIdx=0,this.currentSegmentsLength=0,this.vertexArrPx.length=0,this.totalSideLength=B.getLengthOfPath(this.vertexArr),this.vertexArrPx[0]=this.container.getPixFromCoorPt(this.vertexArr[0]),this.endPointPx=this.container.getPixFromCoorPt(this.vertexArr[0]);var s=new n.a.Tween({len:0}).to({len:this.totalSideLength},1800).easing(n.a.Easing.Sinusoidal.InOut).on("update",(function(t){i.getVerticesToDraw(t.len)})).onComplete((function(t){i.container.getPixFromCoorPtFT(i.vertexArr[0],i.endPointPx),i.completeConstruction=!0,o.start()}));this.innerColorRGBa="rgba("+this.innerColorRGB[0]+", "+this.innerColorRGB[1]+", "+this.innerColorRGB[2]+", 0)";var o=new n.a.Tween({opacity:0}).to({opacity:this.innerColorOpacity},200).easing(n.a.Easing.Quadratic.InOut).on("update",(function(t){i.innerColorRGBa="rgba("+i.innerColorRGB[0]+", "+i.innerColorRGB[1]+", "+i.innerColorRGB[2]+", "+t.opacity+")"})).onComplete((function(){i.completeCallback&&i.completeCallback()}));s.start()}},{key:"render",value:function(){this.context.beginPath(),this.context.strokeStyle=this.color,this.context.lineWidth=this.borderWidth,this.context.lineJoin="round",this.context.fillStyle=this.innerColorRGBa,this.context.moveTo(this.vertexArrPx[0].x,this.vertexArrPx[0].y);for(var t=1;t<this.vertexArrPx.length;t++)this.context.lineTo(this.vertexArrPx[t].x,this.vertexArrPx[t].y);this.completeConstruction?this.context.closePath():this.context.lineTo(this.endPointPx.x,this.endPointPx.y),this.context.stroke(),this.context.fill()}},{key:"updatePixelLocation",value:function(){for(var t=0;t<this.vertexArrPx.length;t++)this.container.getPixFromCoorPtFT(this.vertexArr[t],this.vertexArrPx[t]);this.container.getPixFromCoorPtFT(this.vertexArr[0],this.endPointPx)}},{key:"geometryChanged",value:function(){for(var t=0;t<this.attachedItems.length;t++)this.attachedItems[t].parentGeometryChanged()}},{key:"getBoundingBoxCoor",value:function(){return{}}},{key:"getVerticesToDraw",value:function(t){for(var e=this.currentVtxIdx;e<this.vertexArr.length;e++){if(t<this.currentSegmentsLength+B.getDistance(this.vertexArr[e],this.vertexArr[(e+1)%this.vertexArr.length])){var i=t-this.currentSegmentsLength,n={x:this.vertexArr[(e+1)%this.vertexArr.length].x-this.vertexArr[e].x,y:this.vertexArr[(e+1)%this.vertexArr.length].y-this.vertexArr[e].y},s=B.getNorm(n);this.container.getPixFromCoorPtFT({x:this.vertexArr[e].x+n.x/s*i,y:this.vertexArr[e].y+n.y/s*i},this.endPointPx);break}e!=this.vertexArr.length-1&&(this.currentSegmentsLength+=B.getDistance(this.vertexArr[e],this.vertexArr[e+1]),this.vertexArrPx.push(this.container.getPixFromCoorPt(this.vertexArr[e+1])),this.currentVtxIdx++)}}}])&&L(e.prototype,i),s&&L(e,s),t}();function E(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}i(1);var M=i(2),D=function(){function t(e,i,n){for(var s in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.color="#333333",this.lineWidth=1.5,this.autoDraw=!0,this.animate=!0,this.segments=[],n)null!=this[s]||"pencil"!=this[s]&&"ruler"!=this[s]||console.warn(t.name+": "+s+" parameter is undefined."),this[s]=n[s];this.attachedItemCallbacks=[],this.type="Line",this.startPt=new h(e.x,e.y),this.endPt=new h(i.x,i.y),this.startPtPx=new h(0,0),this.endPtPx=new h(0,0),this.colorRGB=M.hexToRgb(this.color),this.colorRGBa="rgba("+this.colorRGB[0]+", "+this.colorRGB[1]+", "+this.colorRGB[2]+", 1)",this.id="Line"+t.id++}var e,i,s;return e=t,(i=[{key:"setContext",value:function(t,e){this.context=t,this.container=e,this.visible=this.autoDraw,this.autoDraw&&this.instantDraw(),this.updatePixelLocation(),this.adjustSizesWithPixelDensity()}},{key:"instantDraw",value:function(){this.updatePixelLocation(),this.visible=!0}},{key:"show",value:function(){this.visible=!0}},{key:"animateHide",value:function(t){var e=this;new n.a.Tween({opacity:1}).to({opacity:0},500).easing(n.a.Easing.Circular.In).onStart((function(){})).onUpdate((function(t){e.colorRGBa="rgba("+e.colorRGB[0]+", "+e.colorRGB[1]+", "+e.colorRGB[2]+", "+t.opacity+")"})).onComplete((function(){e.visible=!1,t&&t()})).start()}},{key:"getLength",value:function(){return M.getDistance(this.startPt,this.endPt)}},{key:"render",value:function(){this.visible&&(this.context.beginPath(),this.context.strokeStyle=this.colorRGBa,this.context.lineWidth=this.lineWidth,this.context.lineCap="round",this.context.setLineDash(this.segments),this.context.moveTo(this.startPtPx.x,this.startPtPx.y),this.context.lineTo(this.endPtPx.x,this.endPtPx.y),this.context.stroke(),this.context.setLineDash([]))}},{key:"update",value:function(t,e){this.startPt.set(t.x,t.y),this.endPt.set(e.x,e.y),this.updatePixelLocation()}},{key:"animateUpdate",value:function(t,e){var i=this,s=new n.a.Tween({x1:this.startPt.x,y1:this.startPt.y,x2:this.endPt.x,y2:this.endPt.y}).to({x1:t.x,y1:t.y,x2:e.x,y2:e.y},1e3).easing(n.a.Easing.Quadratic.InOut).onStart((function(){})).onUpdate((function(t){i.startPt.set(t.x1,t.y1),i.endPt.set(t.x2,t.y2),i.updatePixelLocation()})).onComplete((function(){}));this.isActive&&s.start()}},{key:"updatePixelLocation",value:function(){this.container.getPixFromCoorPtVT(this.startPt,this.startPtPx),this.container.getPixFromCoorPtVT(this.endPt,this.endPtPx),this.notifyChanges()}},{key:"getBoundingBoxCoor",value:function(){}},{key:"addAttachedItemCallback",value:function(t){this.attachedItemCallbacks.push(t)}},{key:"removeAttachedItemCallback",value:function(t){}},{key:"notifyChanges",value:function(){this.attachedItemCallbacks.forEach((function(t){t()}))}},{key:"adjustSizesWithPixelDensity",value:function(){this.lineWidth=this.lineWidth*this.container.devicePixelRatio;for(var t=0;t<this.segments.length;t++)this.segments[t]=this.segments[t]*this.container.devicePixelRatio}},{key:"delete",value:function(){this.stopAllTween(),this.container.removeItem(this)}},{key:"stopAllTween",value:function(){}},{key:"addTween",value:function(t){this.runningTweens||(this.runningTweens=[]),this.runningTweens.push(t)}}])&&E(e.prototype,i),s&&E(e,s),t}();function F(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}D.id=0;i(1);var G=i(2),W=function(){function t(e){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3?arguments[3]:void 0,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];for(var a in F(this,t),this.text=e,this.frame=document.createElement("div"),this.frame.style.position="absolute",this.frame.style.left="0px",this.frame.style.top="0px",this.frame.style.width="80px",this.frame.style.height="30px",this.style=this.frame.style,this.style.display="flex",this.textElement=document.createElement("p"),this.textElement.style.fontFamily="Computer Modern",this.textElement.style.margin="auto",this.textElement.style.fontWeight="bold",this.textElement.style.textAlign="center",this.textElement.style.verticalAlign="middle",this.textElement.innerText=this.text,this.frame.appendChild(this.textElement),this.frame.classList.add("label-fadeOut"),this.type="Text",this.fontSize=1,this.textColor="#444444",o)null==this[a]&&console.warn(t.name+": "+a+" parameter is undefined."),this[a]=o[a];this.zIndex&&(this.frame.style.zIndex=this.zIndex),this.textElement.style.color=this.textColor,this.position=new h,this.rotation=0,this.midPoint={},this.vector=new h,this.points=n,this.attachingItems=s,this.correctedStart=new h,this.correctedEnd=new h,this.visible=!1,r?1==n.length?this.updater=this.updatePosition1Pt:2==n.length?this.updater=this.updatePosition2Pts:3==n.length&&(this.updater=this.updatePosition3Pts,this.vector12=new h,this.vector10=new h,this.testVector1=new u({x:0,y:0},{x:1,y:1},{color:"#ff00f0"}),this.testVector2=new u({x:0,y:0},{x:1,y:1},{color:"#1f00f0"}),this.testVector3=new u({x:0,y:1},{x:1,y:1},{color:"#00ff00"})):1==n.length&&(this.updater=this.updatePosition1PtPx),this.lbVector=new h,this.lbPositionPx=new h,this.attachingItems.forEach((function(t){t.addAttachedItemCallback((function(){return i.updater()}))})),this.reactable||(this.style.pointerEvents="none"),this.angle=0,this.id="Text"+t.id++}var e,i,n;return e=t,(i=[{key:"setContext",value:function(t){this.container=t,this.container.stage.containerElement.appendChild(this.frame),this.addedToParent=!0,this.boundingRect=this.frame.getBoundingClientRect(),this.textElement.style.fontSize=this.fontSize*this.container.defaultFontSize+"px",this.updater()}},{key:"setAngle",value:function(t){this.angle=t}},{key:"updatePosition1PtPx",value:function(){this.style.transform="rotate("+180*this.angle/Math.PI+"deg)",this.setPosition(this.points[0].x/this.container.devicePixelRatio,this.points[0].y/this.container.devicePixelRatio)}},{key:"updatePosition1Pt",value:function(){this.style.transform="rotate("+180*this.angle/Math.PI+"deg)",this.setPosition(this.points[0].x/this.container.devicePixelRatio,this.points[0].y/this.container.devicePixelRatio)}},{key:"updatePosition2Pts",value:function(){this.vector.x=this.points[1].x-this.points[0].x,this.vector.y=this.points[1].y-this.points[0].y,this.container.getPixFromCoorPtFT(G.getMidPoint(this.points[0],this.points[1]),this.lbPositionPx),this.vector.makeVectorOfNLength(.6*this.container.defaultFontSize);var t=this.vector.y,e=-this.vector.x;this.style.transform="rotate("+(360-180*Math.atan(this.vector.y/this.vector.x)/Math.PI)+"deg)",this.setPosition(this.lbPositionPx.x/this.container.devicePixelRatio+t,this.lbPositionPx.y/this.container.devicePixelRatio-e)}},{key:"updatePosition3Pts",value:function(){this.vector12.set(this.points[2].x-this.points[1].x,this.points[2].y-this.points[1].y),this.vector10.set(this.points[0].x-this.points[1].x,this.points[0].y-this.points[1].y),this.angle12=G.getAngleCC(this.vector12),this.angle10=G.getAngleCC(this.vector10),this.angle10<this.angle12&&(this.angle10+=a.a.TWO_PI),this.angle=Math.PI+this.angle12+(this.angle10-this.angle12)%a.a.TWO_PI/2,this.lbVector.set(Math.cos(this.angle),Math.sin(this.angle)),this.container.getPixFromCoorFT(this.points[1].x,this.points[1].y,this.lbPositionPx),this.setPosition(this.lbPositionPx.x/this.container.devicePixelRatio+11*this.lbVector.x*this.container.font1Unit,this.lbPositionPx.y/this.container.devicePixelRatio-11*this.lbVector.y*this.container.font1Unit)}},{key:"updatePixelLocation",value:function(){0==this.attachingItems.length&&this.updater()}},{key:"show",value:function(t){this.updatePixelLocation(),this.visible=!0,this.frame.classList.remove("label-fadeOut"),this.frame.classList.add("label-fadeIn"),t&&t()}},{key:"instantDraw",value:function(){this.updatePixelLocation(),this.visible=!0,this.frame.classList.remove("label-fadeOut"),this.frame.classList.remove("label-fadeIn"),this.frame.style.opacity=1,this.frame.style.visibility="visible"}},{key:"hide",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?(this.frame.classList.remove("label-fadeIn"),this.frame.classList.add("label-fadeOut")):(this.frame.classList.remove("label-fadeIn"),this.frame.classList.remove("label-fadeOut"),this.frame.style.visibility="hidden",this.frame.style.opacity=0),this.visible=!1}},{key:"setPosition",value:function(t,e){this.style.left=t-.5*this.boundingRect.width+"px",this.style.top=e-.5*this.boundingRect.height+"px"}},{key:"setText",value:function(t){this.textElement.innerText=t}},{key:"destroyAll",value:function(){this.hide(!1)}},{key:"delete",value:function(){this.container.stage.containerElement.removeChild(this.frame),this.frame.classList.remove("label-fadeIn"),this.frame.classList.remove("label-fadeOut"),this.visible=!1,this.container.removeItem(this)}}])&&O(e.prototype,i),n&&O(e,n),t}();function H(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}W.id=0;var V=i(2),N=function(){function t(e,i,n,s,o){for(var r in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.color="#000000",this.centerPt=new h,this.animate=!1,this.lineWidth=1.5,o)null!=this[r]||"pencil"!=this[r]&&"ruler"!=this[r]||console.warn(t.name+": "+r+" parameter is undefined."),this[r]=o[r];this.type="Arc",this.attachedItemCallbacks=[],this.colorRGB=V.hexToRgb(this.color),this.visible=!1,this.centerPt=e,this.startAngle=n,this.endAngle=s,this.radius=i,this.centerPtPx=new h,this.updateOpacity(1),this.id="Arc"+t.idCounter++}var e,i,s;return e=t,(i=[{key:"setContext",value:function(t,e){this.context=t,this.container=e,this.adjustSizesWithPixelDensity(),this.autoDraw&&(this.animate?this.animateDraw():this.instantDraw())}},{key:"render",value:function(){this.visible&&(this.context.strokeStyle=this.colorRGBa,this.context.lineWidth=this.lineWidth,this.context.beginPath(),this.context.arc(this.centerPtPx.x,this.centerPtPx.y,this.radiusPx,this.startAngle,this.endAngle,this.isCounterClockwise),this.context.stroke())}},{key:"animateDraw",value:function(){var t=this;new n.a.Tween({endAngle:this.startAngle}).to({endAngle:this.endAngle},1e3).onStart((function(){t.endAngle=t.startAngle,t.updatePixelLocation(),t.visible=!0})).onUpdate((function(e){t.endAngle=e.endAngle})).onComplete((function(){console.log("complelte... arc ")})).start()}},{key:"instantDraw",value:function(){this.updatePixelLocation(),this.visible=!0,console.log("drawn..")}},{key:"draw",value:function(t){this.drawingFunction(t)}},{key:"getLength",value:function(){}},{key:"update",value:function(t,e){}},{key:"updatePixelLocation",value:function(){this.container.getPixFromCoorPtFT(this.centerPt,this.centerPtPx),this.radiusPx=this.radius/this.container.coorPerPixel}},{key:"updateOpacity",value:function(t){this.colorRGBa="rgba("+this.colorRGB[0]+", "+this.colorRGB[1]+", "+this.colorRGB[2]+", "+t+")"}},{key:"getBoundingBoxCoor",value:function(){}},{key:"adjustSizesWithPixelDensity",value:function(){this.lineWidth=this.lineWidth*this.container.devicePixelRatio}},{key:"addAttachedItemCallback",value:function(t){this.attachedItemCallbacks.push(t)}},{key:"removeAttachedItemCallback",value:function(t){}},{key:"notifyChanges",value:function(){this.attachedItemCallbacks.forEach((function(t){t()}))}},{key:"delete",value:function(){this.container.removeItem(this)}}])&&H(e.prototype,i),s&&H(e,s),t}();function z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}N.idCounter=0;var j=i(1),Y=i(2),X=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>2?arguments[2]:void 0;for(var n in z(this,t),this.points=e,this.defaultArcRadius=13,this.defaultFontSize=11,this.lineWidth=1.3,this.color="#444444",this.textColor="#333333",this.thresholdSide=this.arcRadius/j.TAN_PI_BY_12,this.slopeForFontSize=this.defaultFontSize/this.thresholdSide,this.locLabel={},this.originPt=new h,this.originPtPx=new h,this.completeCallback=function(){},i)null==this[n]&&console.warn(t.name+": "+n+" parameter is undefined."),this[n]=i[n];3==e.length?(this.point1Coor=e[0],this.point2Coor=e[1],this.point3Coor=e[2],this.updater=this.update3Points):e.length,this.textColorArr=Y.hexToRgb(this.textColor),this.textColor="rgba("+this.textColorArr[0]+", "+this.textColorArr[1]+", "+this.textColorArr[2]+", 1)",this.textStrokeColor="rgba("+this.textColorArr[0]+", "+this.textColorArr[1]+", "+this.textColorArr[2]+", 1)",this.attachedItemCallbacks=[],this.lbLocationPx=new h,this.visible=!1,this.type="Angle",this.labelFontSize=.8,this.label=new W("12.3°",[this.lbLocationPx],[this],{fontSize:this.labelFontSize}),this.runningTweens=[],this.finishedListeners=[],this.id="Angle"+t.idCounter++}var e,i,s;return e=t,(i=[{key:"setContext",value:function(t,e){this.context=t,this.container=e,this.container.addItem(this.label),this.testVector1=new u({x:0,y:0},{x:1,y:1},{color:"#ff00f0"}),this.testVector2=new u({x:0,y:0},{x:2,y:1},{color:"#1f00f0"}),this.defaultArcRadius=this.defaultArcRadius*this.container.font1Unit,this.arcRadius=this.defaultArcRadius,this.adjustSizesWithPixelDensity(),this.updater(),this.updatePixelLocation()}},{key:"instantDraw",value:function(){this.updater(),this.updatePixelLocation(),this.visible=!0,this.label.instantDraw()}},{key:"show",value:function(t){var e=this;this.angleClone=this.angle2,this.angle2=this.angle1,new n.a.Tween({angle:this.angle1}).to({angle:this.angleClone,opacity:1},1e3).easing(n.a.Easing.Sinusoidal.InOut).onStart((function(){e.visible=!0,e.angle2=e.angle1})).onUpdate((function(t){e.angle2=t.angle,e.updatePixelLocation()})).onComplete((function(){e.label.show((function(){t&&t()}))})).start()}},{key:"render",value:function(){this.visible&&(this.context.beginPath(),this.context.lineWidth=this.lineWidth,this.context.strokeStyle=this.color,this.context.arc(this.originPtPx.x,this.originPtPx.y,this.arcRadius,this.angle1,this.angle2,!1),this.context.stroke())}},{key:"update3Points",value:function(){this.originPt.copyFrom(this.points[1]),this.vector1={x:this.point1Coor.x-this.point2Coor.x,y:this.point1Coor.y-this.point2Coor.y},this.vector2={x:this.point3Coor.x-this.point2Coor.x,y:this.point3Coor.y-this.point2Coor.y},this.angle1=Y.getAngle(this.vector1),this.angle2=Y.getAngle(this.vector2),this.angle2<this.angle1&&(this.angle2+=j.TWO_PI),this.angleDiff=this.angle2-this.angle1,this.angleText=(180*this.angleDiff/Math.PI).toFixed(1)+"°",this.label.setText(this.angleText),this.labelAngle=(this.angle1+this.angleDiff/2)%j.TWO_PI}},{key:"updateAngle",value:function(){}},{key:"updatePixelLocation",value:function(){this.container.getPixFromCoorPtFT(this.originPt,this.originPtPx),this.lbLocationPx.copyFrom(Y.getXYFromTheta(this.labelAngle,2.3*this.defaultArcRadius,1.6*this.defaultArcRadius)),this.label.setPosition(this.originPtPx.x/this.container.devicePixelRatio+this.lbLocationPx.x,this.originPtPx.y/this.container.devicePixelRatio+this.lbLocationPx.y)}},{key:"adjustScale",value:function(){}},{key:"addAttachedItemCallback",value:function(t){this.attachedItemCallbacks.push(t)}},{key:"removeAttachedItemCallback",value:function(t){}},{key:"handleTap",value:function(t){}},{key:"checkSelection",value:function(){return!1}},{key:"notifyChanges",value:function(){this.attachedItemCallbacks.forEach((function(t){t()}))}},{key:"adjustSizesWithPixelDensity",value:function(){this.lineWidth=this.lineWidth*this.container.devicePixelRatio,this.arcRadius=this.arcRadius*this.container.devicePixelRatio}},{key:"addToRunningTweens",value:function(t){this.runningTweens.push(t)}},{key:"removeFromRunningTweens",value:function(t){for(var e=0;e<this.runningTweens.length;e++)if(this.runningTweens[e]._id==t._id){this.runningTweens.splice(e,1);break}}},{key:"stopAllRunningTweens",value:function(){this.runningTweens.forEach((function(t){t.stop()})),this.runningTweens.length=0}},{key:"addFinishedListener",value:function(t){this.finishedListeners.push(t)}},{key:"triggerFinishedEvent",value:function(){this.finished=!0,this.finishedListeners.forEach((function(t){t()}))}},{key:"delete",value:function(){this.stopAllRunningTweens(),this.label.delete(),this.container.removeItem(this)}}])&&U(e.prototype,i),s&&U(e,s),t}();function q(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}X.idCounter=0;var Q=i(2),Z=function(){function t(e){for(var i in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rulerWidth=2.3,this.rulerLength=20,this.lineWidth=1,this.endOffset=.5,this.centiTickLength=.85,this.tickDistFromFront=this.centiTickLength+.2,this.halfCentiTickLength=.6,this.milliTickLength=.4,this.color="#a1bb3a",this.tickColor="#444444",this.textColor="#000000",e)null==this[i]&&console.warn(t.name+": "+i+" parameter is undefined."),this[i]=e[i];this.labelSizeInCoor=.3,this.borderColor=this.color+"88",this.type="Ruler",this.visible=!1,this.defaultBorderOpacity=.45,this.defaultInnerOpacity=.7,this.defaultTextOpacity=1,this.defaultTickOpacity=1,this.colorRGB=Q.hexToRgb(this.color),this.tickColorRGB=Q.hexToRgb(this.tickColor),this.textColorRGB=Q.hexToRgb(this.textColor),this.updateOpacity(0),this.cmTickDirFactor=0,this.cmTickDirFactor1=1,this.vectToMoveBackPx={x:0,y:0},this.startPtPx=new h,this.totalLength=2*this.endOffset+this.rulerLength,this.fromPtPx=new h,this.vector=new h,this.unitVector=new h,this.unitNormalVector=new h,this.startPtPx=new h,this.endPtPx=new h,this.endPtBackPx=new h,this.startPtBackPx=new h,this.normalVector=new h,this.newUnTranslatedVector=new h;var n=10*this.rulerLength;this.tickStartsPx=[],this.tickEndsPx=[];for(var s=0;s<=n;s++)this.tickStartsPx.push(new h),this.tickEndsPx.push(new h);this.labelsPos=[];for(var o=0;o<=20;o++)this.labelsPos.push(new h);console.log("ruler color "+this.color),this.runningTweens=[],this.id="Ruler"+t.id++}var e,i,s;return e=t,(i=[{key:"setContext",value:function(t,e){this.context=t,this.container=e,this.fromPt=new h(-13.915577381639636,-10.939421080115627),this.toPt=new h(-8.271002421318794,-7.024922997496031),this.testVector=new u(this.fromPt,this.fromPt.subtractFrom(this.toPt),{color:"#000000"}),this.testVectorNormal=new u(this.fromPt,this.fromPt.subtractFrom(this.toPt),{color:"#00ff00"}),this.faceLeft=this.getLeftFacing({x:this.toPt.x-this.fromPt.x,y:this.toPt.y-this.fromPt.y}),this.adjustScale(),this.updatePixelLocation(),this.adjustSizesWithPixelDensity()}},{key:"generatePoints",value:function(){this.vector.x=this.toPt.x-this.fromPt.x,this.vector.y=this.toPt.y-this.fromPt.y,Q.getUnitVectorInplace(this.vector,this.unitVector),this.getLeftFacing(this.vector)?(this.normalVector.x=-this.unitVector.y*this.rulerWidth,this.normalVector.y=this.unitVector.x*this.rulerWidth):(this.normalVector.x=this.unitVector.y*this.rulerWidth,this.normalVector.y=-this.unitVector.x*this.rulerWidth),Q.getUnitVectorInplace(this.normalVector,this.unitNormalVector),this.vectToMoveBackPx.x=1.6*this.unitNormalVector.x,this.vectToMoveBackPx.y=-1.6*this.unitNormalVector.y,this.fromPtPx.x+=this.vectToMoveBackPx.x,this.fromPtPx.y+=this.vectToMoveBackPx.y,this.startPtPx.x=this.fromPtPx.x-this.unitVector.x*this.endOffsetPx,this.startPtPx.y=+this.fromPtPx.y+this.unitVector.y*this.endOffsetPx,this.endPtPx.x=this.startPtPx.x+this.unitVector.x*this.totalLengthPx,this.endPtPx.y=this.startPtPx.y-this.unitVector.y*this.totalLengthPx,this.endPtBackPx.x=this.endPtPx.x+this.unitNormalVector.x*this.rulerWidthPx,this.endPtBackPx.y=this.endPtPx.y-this.unitNormalVector.y*this.rulerWidthPx,this.startPtBackPx.x=this.startPtPx.x+this.unitNormalVector.x*this.rulerWidthPx,this.startPtBackPx.y=this.startPtPx.y-this.unitNormalVector.y*this.rulerWidthPx;for(var t=0;t<this.tickStartsPx.length;t++)this.tickStartsPx[t].x=this.fromPtPx.x+this.unitVector.x*this.distBetweenMinorTicks*t,this.tickStartsPx[t].y=this.fromPtPx.y-this.unitVector.y*this.distBetweenMinorTicks*t,t%10==0?(this.labelsPos[t/10].x=this.tickStartsPx[t].x+this.unitNormalVector.x*this.tickDistFromFrontPx,this.labelsPos[t/10].y=this.tickStartsPx[t].y-this.unitNormalVector.y*this.tickDistFromFrontPx,this.tickEndsPx[t].x=this.tickStartsPx[t].x+this.unitNormalVector.x*this.centiTickLengthPx,this.tickEndsPx[t].y=this.tickStartsPx[t].y-this.unitNormalVector.y*this.centiTickLengthPx):t%5==0?(this.tickEndsPx[t].x=this.tickStartsPx[t].x+this.unitNormalVector.x*this.halfCentiTickLenPx,this.tickEndsPx[t].y=this.tickStartsPx[t].y-this.unitNormalVector.y*this.halfCentiTickLenPx):(this.tickEndsPx[t].x=this.tickStartsPx[t].x+this.unitNormalVector.x*this.milliTickLengthPx,this.tickEndsPx[t].y=this.tickStartsPx[t].y-this.unitNormalVector.y*this.milliTickLengthPx)}},{key:"render",value:function(){if(this.visible){this.context.beginPath(),this.context.font=this.labelSize,this.context.lineWidth=this.lineWidth,this.context.lineJoin="round",this.context.strokeStyle=this.borderColorA,this.context.moveTo(this.startPtPx.x,this.startPtPx.y),this.context.lineTo(this.endPtPx.x,this.endPtPx.y),this.context.lineTo(this.endPtBackPx.x,this.endPtBackPx.y),this.context.lineTo(this.startPtBackPx.x,this.startPtBackPx.y),this.context.closePath(),this.context.fillStyle=this.innerColorA,this.context.stroke(),this.context.fill(),this.context.beginPath(),this.context.strokeStyle=this.tickColorA;for(var t=0;t<this.tickStartsPx.length;t++)this.context.moveTo(this.tickStartsPx[t].x,this.tickStartsPx[t].y),this.context.lineTo(this.tickEndsPx[t].x,this.tickEndsPx[t].y);this.context.stroke(),this.context.fillStyle=this.textColorA,this.context.textAlign="center",this.context.textBaseline="Alphabetic";for(var e=0;e<this.labelsPos.length;e++)this.context.translate(this.labelsPos[e].x,this.labelsPos[e].y),this.context.rotate(this.lbAngle),this.context.fillText(e,0,0),this.context.rotate(-this.lbAngle),this.context.translate(-this.labelsPos[e].x,-this.labelsPos[e].y)}}},{key:"updatePixelLocation",value:function(){this.endOffsetPx=this.endOffset/this.container.coorPerPixel,this.totalLengthPx=this.totalLength/this.container.coorPerPixel,this.rulerWidthPx=this.rulerWidth/this.container.coorPerPixel,this.container.getPixFromCoorPtFT(this.fromPt,this.fromPtPx),this.generatePoints()}},{key:"moveTo",value:function(t,e,i){var s,o=this,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=this.getLeftFacing({x:e.x-t.x,y:e.y-t.y});this.unitVector=Q.getUnitVector(this.vector),this.faceLeft=this.getLeftFacing(this.vector),s=this.faceLeft?r?this.fromPt:{x:this.fromPt.x+this.unitVector.x*this.rulerLength,y:this.fromPt.y+this.unitVector.y*this.rulerLength}:r?{x:this.fromPt.x+this.unitVector.x*this.rulerLength,y:this.fromPt.y+this.unitVector.y*this.rulerLength}:this.fromPt;var a=Q.getUnitVector({x:this.toPt.x-s.x,y:this.toPt.y-s.y}),l=Q.getDistance(e,t);this.newUnTranslatedVector.set(a.x*l,a.y*l);var c,u,d,p,f=Q.getAngleCC({x:s.x-this.toPt.x,y:s.y-this.toPt.y})-Q.getAngleCC({x:t.x-e.x,y:t.y-e.y}),x=t.x-(Math.cos(f)*s.x+Math.sin(f)*s.y),g=t.y-(-Math.sin(f)*s.x+Math.cos(f)*s.y),P={x:s.x,y:s.y};this.visible?new n.a.Tween({dx:0,dy:0,angle:0,textAngTimer:0}).to({dx:x,dy:g,angle:f,textAngTimer:1},1200).easing(n.a.Easing.Sinusoidal.Out).delay(h).onStart((function(){})).onUpdate((function(i){c=Math.cos(i.angle),u=Math.sin(i.angle),d=-Math.sin(i.angle),p=Math.cos(i.angle),o.fromPt.x=c*P.x+u*P.y+i.dx,o.fromPt.y=d*P.x+p*P.y+i.dy,o.toPt.x=o.fromPt.x+c*o.newUnTranslatedVector.x+u*o.newUnTranslatedVector.y,o.toPt.y=o.fromPt.y+d*o.newUnTranslatedVector.x+p*o.newUnTranslatedVector.y,i.textAngTimer<=.6?o.textColorA="rgba("+o.textColorRGB[0]+", "+o.textColorRGB[1]+", "+o.textColorRGB[2]+", "+(1-i.textAngTimer/.6)+")":i.textAngTimer>.8?o.textColorA="rgba("+o.textColorRGB[0]+", "+o.textColorRGB[1]+", "+o.textColorRGB[2]+", "+(1-(1-i.textAngTimer)/.2)+")":i.textAngTimer>.6&&!o.textAngChanged&&(o.lbAngle=r?Q.getAngle({x:e.x-t.x,y:e.y-t.y}):Q.getAngle({x:e.x-t.x,y:e.y-t.y})+Math.PI,o.textAngChanged=!0),o.updatePixelLocation()})).onComplete((function(){i&&i(),o.textAngChanged=!1})).start():(c=Math.cos(f),u=Math.sin(f),d=-Math.sin(f),p=Math.cos(f),this.fromPt.x=c*P.x+u*P.y+x,this.fromPt.y=d*P.x+p*P.y+g,this.toPt.x=this.fromPt.x+c*this.newUnTranslatedVector.x+u*this.newUnTranslatedVector.y,this.toPt.y=this.fromPt.y+d*this.newUnTranslatedVector.x+p*this.newUnTranslatedVector.y,this.lbAngle=r?Q.getAngle({x:e.x-t.x,y:e.y-t.y}):Q.getAngle({x:e.x-t.x,y:e.y-t.y})+Math.PI,this.updatePixelLocation(),this.ended=!0,new n.a.Tween({opacity:0}).to({opacity:1},600).easing(n.a.Easing.Cubic.In).onStart((function(){o.visible=!0})).onUpdate((function(t){o.updateOpacity(t.opacity)})).onComplete((function(){setTimeout((function(){i&&i()}),400)})).start())}},{key:"hide",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.visible&&new n.a.Tween({opacity:1}).to({opacity:0},500).easing(n.a.Easing.Sinusoidal.In).delay(e).onUpdate((function(e){t.updateOpacity(e.opacity)})).onComplete((function(e){t.visible=!1})).start()}},{key:"updateOpacity",value:function(t){this.borderColorA="rgba("+this.colorRGB[0]+", "+this.colorRGB[1]+", "+this.colorRGB[2]+", "+t*this.defaultBorderOpacity+")",this.innerColorA="rgba("+this.colorRGB[0]+", "+this.colorRGB[1]+", "+this.colorRGB[2]+", "+t*this.defaultInnerOpacity+")",this.tickColorA="rgba("+this.tickColorRGB[0]+", "+this.tickColorRGB[1]+", "+this.tickColorRGB[2]+", "+t*this.defaultTickOpacity+")",this.textColorA="rgba("+this.textColorRGB[0]+", "+this.textColorRGB[1]+", "+this.textColorRGB[2]+", "+t*this.defaultTextOpacity+")"}},{key:"adjustScale",value:function(){this.milliTickLengthPx=this.milliTickLength/this.container.coorPerPixel,this.halfCentiTickLenPx=this.halfCentiTickLength/this.container.coorPerPixel,this.centiTickLengthPx=this.centiTickLength/this.container.coorPerPixel,this.tickDistFromFrontPx=this.tickDistFromFront/this.container.coorPerPixel,this.distBetweenMjrTicks=1/this.container.coorPerPixel,this.distBetweenMinorTicks=.1/this.container.coorPerPixel,this.labelSize="bold "+(this.labelSizeInCoor/this.container.coorPerPixel).toFixed(1)+"pt Computer Modern"}},{key:"adjustSizesWithPixelDensity",value:function(){this.lineWidth=this.lineWidth*this.container.devicePixelRatio}},{key:"getBoundingBoxCoor",value:function(){}},{key:"getLeftFacing",value:function(t){var e=Q.getAngleCC(t);return 0<=e&&e<=Math.PI}},{key:"delete",value:function(){this.container.removeItem(this)}}])&&q(e.prototype,i),s&&q(e,s),t}();function J(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Z.id=0;var K=i(2),tt=function(){function t(e){for(var i in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.color="#5b79ff",this.halfWidth=.29,this.length=11,this.headLength=1.1,this.tipLength=.29,this.tipBaseHalfWidth=.07,this.eraserHeight=.4,this.showValueLabel=!0,this.leadTipColor="#000000",this.headColor="#DEBFAA",this.headColorB="#ceaf9a",this.bodyColor="#5c4b89",this.bodyColorB="#4d4072",this.eraserColor="#B03543",this.eraserColorB="#91323c",e)null==this[i]&&console.warn(t.name+": "+i+" parameter is undefined."),this[i]=e[i];this.colorRGB=K.hexToRgb(this.color),this.leadTipColorRGB=K.hexToRgb(this.leadTipColor),this.headColorRGB=K.hexToRgb(this.headColor),this.headColorBRGB=K.hexToRgb(this.headColorB),this.bodyColorRGB=K.hexToRgb(this.bodyColor),this.bodyColorBRGB=K.hexToRgb(this.bodyColor),this.eraserColorRGB=K.hexToRgb(this.eraserColor),this.eraserColorBRGB=K.hexToRgb(this.eraserColorB),this.updateOpacity(0),this.pos={x:0,y:0},this.posPx={},this.pencilInclinationAngle=Math.PI/3,this.type="Pencil",this.neckLeftPx={x:0,y:0},this.neckRightPx={x:0,y:0},this.endLeftPx={x:0,y:0},this.endRightPx={x:0,y:0},this.tipBaseLeftPx={x:0,y:0},this.tipBaseRightPx={x:0,y:0},this.eraserTopLeftPx={x:0,y:0},this.eraserTopRightPx={x:0,y:0},this.eraserNeckLeftPx={x:0,y:0},this.eraserNeckRightPx={x:0,y:0},this.defaultPoints=[],this.updatedPoints=[],this.visible=!1,this.unitNormalVector=new h,this.valueLbPos=new h,this.valueLbPosPx=new h,this.attachedItemCallbacks=[],this.generatePoints(),this.runningTweens=[],this.id="Pencil"+t.id++}var e,i,s;return e=t,(i=[{key:"setContext",value:function(t,e){this.context=t,this.container=e,this.valueLabel=new W("0.0",[this.valueLbPosPx],[this],{zIndex:2},!1),this.valueLabel.textElement.style.background="#cdcdcdaa",this.valueLabel.textElement.style.padding="5px",this.valueLabel.textElement.style.paddingBottom="4px",this.valueLabel.textElement.style.fontSize="12px",this.valueLabel.textElement.style.lineHeight=".9em",this.valueLabel.textElement.style.borderRadius="3px",this.container.addItem(this.valueLabel),this.testVector=new u({x:0,y:0},{x:1,y:1},{color:"#ff9223"}),this.updatePixelLocation()}},{key:"fadeOutMoveInTween",value:function(t,e){var i=this;new n.a.Tween({opacity:1}).to({opacity:0},400).easing(n.a.Easing.Sinusoidal.Out).onUpdate((function(t){i.updateOpacity(t.opacity)})).onComplete((function(){i.move(t),i.updatePixelLocation(),i.fadeInTween(e)})).start()}},{key:"fadeInTween",value:function(t){var e=this;new n.a.Tween({opacity:0}).to({opacity:1},600).easing(n.a.Easing.Circular.In).onStart((function(){e.updateOpacity(0),e.valueLabel.textElement.style.color="#333333",e.visible=!0})).onUpdate((function(t){e.updateOpacity(t.opacity)})).onComplete((function(){setTimeout((function(){t&&t()}),400)})).start()}},{key:"generatePoints",value:function(){this.pencilVectorD=new h(Math.cos(0)*this.length,Math.sin(0)*this.length),this.pencilVector=this.pencilVectorD.clone(),this.pencilUVect=K.getUnitVector(this.pencilVector),this.normalUVect={x:-this.pencilUVect.y,y:this.pencilUVect.x},this.tipBase=new h(this.pencilUVect.x*this.tipLength,this.pencilUVect.y*this.tipLength),this.tipBaseLeftD=new h(this.tipBase.x+this.normalUVect.x*this.tipBaseHalfWidth,this.tipBase.y+this.normalUVect.y*this.tipBaseHalfWidth),this.defaultPoints.push(this.tipBaseLeftD),this.tipBaseLeft=this.tipBaseLeftD.clone(),this.updatedPoints.push(this.tipBaseLeft),this.tipBaseRightD=new h(this.tipBase.x-this.normalUVect.x*this.tipBaseHalfWidth,this.tipBase.y-this.normalUVect.y*this.tipBaseHalfWidth),this.defaultPoints.push(this.tipBaseRightD),this.tipBaseRight=this.tipBaseRightD.clone(),this.updatedPoints.push(this.tipBaseRight),this.pencilNeckD=new h(this.pencilUVect.x*this.headLength,this.pencilUVect.y*this.headLength),this.defaultPoints.push(this.pencilNeckD),this.pencilNeck=this.pencilNeckD.clone(),this.updatedPoints.push(this.pencilNeck),this.neckLeftD=new h(this.pencilNeck.x+this.normalUVect.x*this.halfWidth,this.pencilNeck.y+this.normalUVect.y*this.halfWidth),this.defaultPoints.push(this.neckLeftD),this.neckLeft=this.neckLeftD.clone(),this.updatedPoints.push(this.neckLeft),this.neckRightD=new h(this.pencilNeck.x-this.normalUVect.x*this.halfWidth,this.pencilNeck.y-this.normalUVect.y*this.halfWidth),this.defaultPoints.push(this.neckRightD),this.neckRight=this.neckRightD.clone(),this.updatedPoints.push(this.neckRight),this.endLeftD=new h(this.pencilVector.x+this.normalUVect.x*this.halfWidth,this.pencilVector.y+this.normalUVect.y*this.halfWidth),this.defaultPoints.push(this.endLeftD),this.endLeft=this.endLeftD.clone(),this.updatedPoints.push(this.endLeft),this.endRightD=new h(this.pencilVector.x-this.normalUVect.x*this.halfWidth,this.pencilVector.y-this.normalUVect.y*this.halfWidth),this.defaultPoints.push(this.endRightD),this.endRight=this.endRightD.clone(),this.updatedPoints.push(this.endRight),this.vectorEraserNeckD=new h(Math.cos(0)*(this.length+this.eraserHeight),Math.sin(0)*(this.length+this.eraserHeight)),this.defaultPoints.push(this.vectorEraserNeckD),this.vectorEraserNeck=this.vectorEraserNeckD.clone(),this.updatedPoints.push(this.vectorEraserNeck),this.eraserNeckLeftD=new h(this.vectorEraserNeck.x+this.normalUVect.x*this.halfWidth,this.vectorEraserNeck.y+this.normalUVect.y*this.halfWidth),this.defaultPoints.push(this.eraserNeckLeftD),this.eraserNeckLeft=this.eraserNeckLeftD.clone(),this.updatedPoints.push(this.eraserNeckLeft),this.eraserNeckRightD=new h(this.vectorEraserNeck.x-this.normalUVect.x*this.halfWidth,this.vectorEraserNeck.y-this.normalUVect.y*this.halfWidth),this.defaultPoints.push(this.eraserNeckRightD),this.eraserNeckRight=this.eraserNeckRightD.clone(),this.updatedPoints.push(this.eraserNeckRight),this.vectorEraserEndD=new h(Math.cos(0)*(this.length+this.eraserHeight+.22),Math.sin(0)*(this.length+this.eraserHeight+.22)),this.defaultPoints.push(this.vectorEraserEndD),this.vectorEraserEnd=this.vectorEraserEndD.clone(),this.updatedPoints.push(this.vectorEraserEnd),this.eraserTopLeftD=new h(this.vectorEraserEnd.x+this.normalUVect.x*this.halfWidth,this.vectorEraserEnd.y+this.normalUVect.y*this.halfWidth),this.defaultPoints.push(this.eraserTopLeftD),this.eraserTopLeft=this.eraserTopLeftD.clone(),this.updatedPoints.push(this.eraserTopLeft),this.eraserTopRightD=new h(this.vectorEraserEnd.x-this.normalUVect.x*this.halfWidth,this.vectorEraserEnd.y-this.normalUVect.y*this.halfWidth),this.defaultPoints.push(this.eraserTopRightD),this.eraserTopRight=this.eraserTopRightD.clone(),this.updatedPoints.push(this.eraserTopRight)}},{key:"move",value:function(t,e){this.pos=t,this.valueLbPos.set(t.x+1.9*this.unitNormalVector.x,t.y+1.9*this.unitNormalVector.y),null!=e&&(this.r1_c1=Math.cos(e),this.r1_c2=-Math.sin(e),this.r2_c1=Math.sin(e),this.r2_c2=Math.cos(e));for(var i=0;i<this.defaultPoints.length;i++)this.updatedPoints[i].x=this.r1_c1*this.defaultPoints[i].x+this.r1_c2*this.defaultPoints[i].y+t.x,this.updatedPoints[i].y=this.r2_c1*this.defaultPoints[i].x+this.r2_c2*this.defaultPoints[i].y+t.y;this.showValueLabel&&this.valueLabel.setText(K.getDistance(this.fromPt,t).toFixed(1)),this.updatePixelLocation()}},{key:"hide",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0;new n.a.Tween({opacity:1}).to({opacity:0},600).easing(n.a.Easing.Quadratic.InOut).delay(e).onStart((function(){t.valueLabel.hide()})).onUpdate((function(e){t.updateOpacity(e.opacity)})).onComplete((function(){t.visible=!1,i&&i()})).start()}},{key:"drawPoint",value:function(t,e,i,n){var s=this,o=this.showValueLabel;this.showValueLabel=!1,e.updatePosCoor(t),this.visible?this.fadeOutMoveInTween(t,(function(){e.show(),s.hide(800,(function(){i&&i()}))})):(this.move(t,n),this.showValueLabel=o,this.fadeInTween((function(){e.show(),s.hide(800,(function(){i&&i()}))})))}},{key:"prepareToDrawLine",value:function(t,e,i){this.fromPt=t,this.lineVector={x:e.x-t.x,y:e.y-t.y},this.unitLineVector=K.getUnitVector(this.lineVector);var n=K.getAngleCC(this.unitLineVector);n>=0&&n<Math.PI?this.unitNormalVector.set(-this.unitLineVector.y,this.unitLineVector.x):this.unitNormalVector.set(this.unitLineVector.y,-this.unitLineVector.x),this.valueLbPos.set(t.x+1*this.unitNormalVector.x,t.y+1*this.unitNormalVector.y),this.angle=K.getAngleCC(this.lineVector);var s,o=K.getAngle(this.lineVector);o<=Math.PI+1e-5&&(o+=Math.PI),this.valueLabel.setAngle(o),s=0<=this.angle&&this.angle<Math.PI?this.angle-this.pencilInclinationAngle:this.angle+this.pencilInclinationAngle,this.updatePixelLocation(),this.visible?this.fadeOutMoveInTween(i):(this.move(t,s),this.visible=!0,this.fadeInTween(i),this.showValueLabel&&this.valueLabel.show())}},{key:"updateOpacity",value:function(t){this.colorRGBa="rgba("+this.colorRGB[0]+", "+this.colorRGB[1]+", "+this.colorRGB[2]+", "+t+")",this.leadTipColorRGBa="rgba("+this.leadTipColorRGB[0]+", "+this.leadTipColorRGB[1]+", "+this.leadTipColorRGB[2]+", "+t+")",this.headColorRGBa="rgba("+this.headColorRGB[0]+", "+this.headColorRGB[1]+", "+this.headColorRGB[2]+", "+t+")",this.headColorBRGBa="rgba("+this.headColorBRGB[0]+", "+this.headColorBRGB[1]+", "+this.headColorBRGB[2]+", "+t+")",this.bodyColorRGBa="rgba("+this.bodyColorRGB[0]+", "+this.bodyColorRGB[1]+", "+this.bodyColorRGB[2]+", "+t+")",this.bodyColorBRGBa="rgba("+this.bodyColorBRGB[0]+", "+this.bodyColorBRGB[1]+", "+this.bodyColorBRGB[2]+", "+t+")",this.eraserColorRGBa="rgba("+this.eraserColorRGB[0]+", "+this.eraserColorRGB[1]+", "+this.eraserColorRGB[2]+", "+t+")",this.eraserColorBRGBa="rgba("+this.eraserColorBRGB[0]+", "+this.eraserColorBRGB[1]+", "+this.eraserColorBRGB[2]+", "+t+")"}},{key:"prepareToDrawPoint",value:function(t,e){}},{key:"updatePixelLocation",value:function(){this.container.getPixFromCoorPtFT(this.pos,this.posPx),this.container.getPixFromCoorPtFT(this.tipBaseLeft,this.tipBaseLeftPx),this.container.getPixFromCoorPtFT(this.tipBaseRight,this.tipBaseRightPx),this.container.getPixFromCoorPtFT(this.neckLeft,this.neckLeftPx),this.container.getPixFromCoorPtFT(this.neckRight,this.neckRightPx),this.container.getPixFromCoorPtFT(this.endLeft,this.endLeftPx),this.container.getPixFromCoorPtFT(this.endRight,this.endRightPx),this.container.getPixFromCoorPtFT(this.eraserTopLeft,this.eraserTopLeftPx),this.container.getPixFromCoorPtFT(this.eraserTopRight,this.eraserTopRightPx),this.container.getPixFromCoorPtFT(this.eraserNeckLeft,this.eraserNeckLeftPx),this.container.getPixFromCoorPtFT(this.eraserNeckRight,this.eraserNeckRightPx),this.container.getPixFromCoorPtFT(this.valueLbPos,this.valueLbPosPx),this.notifyChanges()}},{key:"render",value:function(){this.visible&&(this.context.lineJoin="round",this.context.lineWidth=1,this.context.strokeStyle=this.leadTipColorRGBa,this.context.fillStyle=this.leadTipColorRGBa,this.context.beginPath(),this.context.moveTo(this.posPx.x,this.posPx.y),this.context.lineTo(this.tipBaseLeftPx.x,this.tipBaseLeftPx.y),this.context.lineTo(this.tipBaseRightPx.x,this.tipBaseRightPx.y),this.context.closePath(),this.context.stroke(),this.context.fill(),this.context.strokeStyle=this.headColorBRGBa,this.context.fillStyle=this.headColorRGBa,this.context.beginPath(),this.context.moveTo(this.tipBaseLeftPx.x,this.tipBaseLeftPx.y),this.context.lineTo(this.neckLeftPx.x,this.neckLeftPx.y),this.context.lineTo(this.neckRightPx.x,this.neckRightPx.y),this.context.lineTo(this.tipBaseRightPx.x,this.tipBaseRightPx.y),this.context.fill(),this.context.stroke(),this.context.strokeStyle=this.bodyColorBRGBa,this.context.fillStyle=this.bodyColorRGBa,this.context.beginPath(),this.context.moveTo(this.neckLeftPx.x,this.neckLeftPx.y),this.context.lineTo(this.endLeftPx.x,this.endLeftPx.y),this.context.lineTo(this.endRightPx.x,this.endRightPx.y),this.context.lineTo(this.neckRightPx.x,this.neckRightPx.y),this.context.fill(),this.context.stroke(),this.context.strokeStyle=this.eraserColorBRGBa,this.context.fillStyle=this.eraserColorRGBa,this.context.beginPath(),this.context.moveTo(this.endLeftPx.x,this.endLeftPx.y),this.context.lineTo(this.eraserNeckLeftPx.x,this.eraserNeckLeftPx.y),this.context.bezierCurveTo(this.eraserTopLeftPx.x,this.eraserTopLeftPx.y,this.eraserTopRightPx.x,this.eraserTopRightPx.y,this.eraserNeckRightPx.x,this.eraserNeckRightPx.y),this.context.lineTo(this.endRightPx.x,this.endRightPx.y),this.context.fill(),this.context.stroke())}},{key:"setShowValueLabel",value:function(t){this.showValueLabel=t}},{key:"adjustScale",value:function(){}},{key:"addAttachedItemCallback",value:function(t){this.attachedItemCallbacks.push(t)}},{key:"removeAttachedItemCallback",value:function(t){}},{key:"notifyChanges",value:function(){this.attachedItemCallbacks.forEach((function(t){t()}))}},{key:"delete",value:function(){this.container.removeItem(this),this.showValueLabel&&this.valueLabel.delete()}}])&&J(e.prototype,i),s&&J(e,s),t}();tt.id=0;var et=i(3);function it(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function st(t,e,i){return e&&nt(t.prototype,e),i&&nt(t,i),t}var ot=i(2),ht=i(4),rt=function(){function t(e){for(var i in it(this,t),this.pos=new h(1,0),this.posPx=new h,this.radius=6,this.type="Protractor",this.visible=!1,this.color="#48d0f4",this.tickColor="#000000",this.textColor="#000000",this.tickLineWidth=.8,this.labelSizeInCoor=.25,this.labelSize90Coor=.48,this.isHelperOn=!1,e)null==this[i]&&console.warn(t.name+": "+i+" parameter is undefined."),this[i]=e[i];console.log("protractor color "+this.color),this.minorTickLen=.34,this.midTickLen=.48,this.majorTickLen=.65,this.middleArcRadius=4.72,this.innerArcRadius=4.1,this.outerLbPosRadius=4.86,this.innerLbPosRadius=4.4,this.rightAngLineLen=4.4,this.innerMostArcR=1.2,this.distLbsCoor=.625,this.PIBy180=Math.PI/180,this.PIBy18=Math.PI/18,this.tickPtStarts=[],this.tickPtEnds=[],this.outerLabelPos=[],this.innerLabelPos=[],this.raysPosStart=[],this.raysPosEnd=[];for(var n=0;n<=180;n++)this.tickPtStarts[n]=new h,this.tickPtEnds[n]=new h;for(var s=0;s<=18;s++)this.outerLabelPos.push(new h),this.innerLabelPos.push(new h),this.raysPosStart.push(new h),this.raysPosEnd.push(new h);this.tempAngle=0,this.startAngle=0,this.numberCanvases=[],this.numberWidths=[],this.numberStartX=[],this.noCanvasImgWidths=[],this.noCanvasImgHeights=[],this.defaultBorderOpacity=.3,this.defaultInnerOpacity=.67,this.defaultTextOpacity=1,this.defaultTickOpacity=1,this.colorRGB=ot.hexToRgb(this.color),this.tickColorRGB=ot.hexToRgb(this.tickColor),this.textColorRGB=ot.hexToRgb(this.textColor),this.borderColorA="rgba("+this.colorRGB[0]+", "+this.colorRGB[1]+", "+this.colorRGB[2]+", 0)",this.innerColorA="rgba("+this.colorRGB[0]+", "+this.colorRGB[1]+", "+this.colorRGB[2]+", 0)",this.tickColorA="rgba("+this.tickColorRGB[0]+", "+this.tickColorRGB[1]+", "+this.tickColorRGB[2]+", 0)",this.textColorA="rgba("+this.textColorRGB[0]+", "+this.textColorRGB[1]+", "+this.textColorRGB[2]+", 0)",this.pannable=!0,this.diffFromCenter=new h,this.runningTweens=[],this.id="Protra"+t.id++}return st(t,[{key:"setContext",value:function(t,e){this.context=t,this.container=e,this.defaultTransform=this.context.getTransform(),this.helper=new at(this,this.context),this.adjustSizesWithPixelDensity()}},{key:"render",value:function(){if(this.visible){this.context.beginPath(),this.context.lineWidth=this.tickLineWidth,this.context.strokeStyle=this.borderColorA,this.context.fillStyle=this.innerColorA,this.context.arc(this.posPx.x,this.posPx.y,this.radiusPx,this.startCanvasAngleOF,this.endCanvasAngleOF,!0),this.context.closePath(),this.context.stroke(),this.context.fill(),this.context.strokeStyle=this.tickColorA,this.context.beginPath(),this.context.arc(this.posPx.x,this.posPx.y,this.middleArcRadiusPx,this.startCanvasAngle,this.startCanvasAngle-1.4835298642,!0),this.context.stroke(),this.context.beginPath(),this.context.arc(this.posPx.x,this.posPx.y,this.middleArcRadiusPx,this.endCanvasAngle+1.4835298642,this.endCanvasAngle,!0),this.context.stroke(),this.context.beginPath(),this.context.arc(this.posPx.x,this.posPx.y,this.innerArcRadiusPx,this.startCanvasAngle,this.endCanvasAngle,!0),this.context.stroke(),this.context.beginPath(),this.context.arc(this.posPx.x,this.posPx.y,this.innerMostArcRPx,this.startCanvasAngle,this.endCanvasAngle,!0);for(var t=0;t<this.tickPtStarts.length;t++)this.context.moveTo(this.tickPtStarts[t].x,this.tickPtStarts[t].y),this.context.lineTo(this.tickPtEnds[t].x,this.tickPtEnds[t].y);this.context.fillStyle=this.textColorA,this.context.textAlign="center";for(var e=0;e<=18;e++)this.context.translate(this.outerLabelPos[e].x,this.outerLabelPos[e].y),this.context.rotate(this.lbStartAngle-e*this.PIBy18),9==e?(this.context.font=this.labelFont90,this.context.textBaseline="bottom",this.context.fillText("90",0,this.labelSize90CoorPx)):(this.context.textBaseline="bottom",this.context.font=this.labelFont,this.context.fillText(10*e,0,0),this.context.fillText(10*(18-e),0,this.distLbsCoorPx)),this.context.rotate(-(this.lbStartAngle-e*this.PIBy18)),this.context.translate(-this.outerLabelPos[e].x,-this.outerLabelPos[e].y);this.context.setTransform(this.defaultTransform);for(var i=1;i<=17;i++)this.context.moveTo(this.raysPosStart[i].x,this.raysPosStart[i].y),this.context.lineTo(this.raysPosEnd[i].x,this.raysPosEnd[i].y);this.context.moveTo(this.raysPosEnd[0].x,this.raysPosEnd[0].y),this.context.lineTo(this.raysPosEnd[18].x,this.raysPosEnd[18].y),this.context.moveTo(this.posPx.x,this.posPx.y),this.context.lineTo(this.raysPosEnd[9].x,this.raysPosEnd[9].y),this.context.stroke(),this.isHelperOn&&this.helper.render()}}},{key:"measure",value:function(t,e,i,s){var o=this,h=1600*Math.pow(Math.abs(i),1/2.8);this.helper.updateAngle(0),this.helper.updateSide(!1),this.helper.show(),this.moveTo(t,e,i,(function(){new n.a.Tween({angle:0}).to({angle:Math.abs(i)},h).easing(n.a.Easing.Cubic.InOut).onStart((function(){})).onUpdate((function(t){o.helper.updateAngle(t.angle)})).onComplete((function(){o.pencil?o.retunedPoint=o.pencil.drawPoint(o.container.getCoorFromPixPt(o.helper.indicatorTipPx),(function(){s&&s(o.retunedPoint)}),a.a.TWO_PI-(a.a.TWO_PI+o.helper.endAngle)%a.a.TWO_PI):(o.retunedPoint=new k(o.container.getCoorFromPixPt(o.helper.indicatorTipPx)),o.container.addItem(o.retunedPoint))})).start()}))}},{key:"moveTo",value:function(t,e,i,s){var o=this,h=this.startAngle,r={x:e.x-t.x,y:e.y-t.y},l=ot.getAngleCC(r);if(l<Math.PI/2||l>a.a.THREE_PI_BY_2?this.helper.updateSide(!0):this.helper.updateSide(!1),i<0&&(l+=Math.PI),h>(l%=a.a.TWO_PI)?h-l>Math.PI&&(h=-(a.a.TWO_PI-h)):l-h>Math.PI&&(l=-(a.a.TWO_PI-l)),this.visible){var c=new n.a.Tween({x:this.pos.x,y:this.pos.y,startAngle:h,textAngTimer:0}).to({x:t.x,y:t.y,startAngle:l,textAngTimer:1},900).easing(n.a.Easing.Sinusoidal.InOut).onUpdate((function(t){o.pos.x=t.x,o.pos.y=t.y,o.startAngle=t.startAngle,t.textAngTimer<=.5?o.textColorA="rgba("+o.textColorRGB[0]+", "+o.textColorRGB[1]+", "+o.textColorRGB[2]+", "+(1-t.textAngTimer/.5)+")":t.textAngTimer>.8?o.textColorA="rgba("+o.textColorRGB[0]+", "+o.textColorRGB[1]+", "+o.textColorRGB[2]+", "+(1-(1-t.textAngTimer)/.2)+")":t.textAngTimer>.5&&!o.textAngChanged&&(o.lbStartAngle=-a.a.THREE_PI_BY_2-l,o.textAngChanged=!0),o.updatePixelLocation()})).onComplete((function(){o.removeFromRunningTweens(c),o.textAngChanged=!1,s&&s()}));c.start(),this.addToRunningTweens(c)}else{this.pos.x=t.x,this.pos.y=t.y,this.startAngle=l,this.updatePixelLocation();var u=new n.a.Tween({opacity:0}).to({opacity:1},1e3).easing(ht.smooth).onStart((function(){o.lbStartAngle=-a.a.THREE_PI_BY_2-o.startAngle,o.adjustScale(),o.visible=!0,o.isHelperOn&&o.helper.show()})).onUpdate((function(t){o.borderColorA="rgba("+o.colorRGB[0]+", "+o.colorRGB[1]+", "+o.colorRGB[2]+", "+t.opacity*o.defaultBorderOpacity+")",o.innerColorA="rgba("+o.colorRGB[0]+", "+o.colorRGB[1]+", "+o.colorRGB[2]+", "+t.opacity*o.defaultInnerOpacity+")",o.tickColorA="rgba("+o.tickColorRGB[0]+", "+o.tickColorRGB[1]+", "+o.tickColorRGB[2]+", "+t.opacity*o.defaultTickOpacity+")",o.textColorA="rgba("+o.textColorRGB[0]+", "+o.textColorRGB[1]+", "+o.textColorRGB[2]+", "+t.opacity*o.defaultTextOpacity+")"})).onComplete((function(){o.removeFromRunningTweens(u),s&&s()}));u.start(),this.addToRunningTweens(u)}}},{key:"generatePoints",value:function(){this.startCanvasAngle=a.a.TWO_PI-this.startAngle,this.startCanvasAngleOF=this.startCanvasAngle+.1,this.endCanvasAngle=this.startCanvasAngle+Math.PI,this.endCanvasAngleOF=this.startCanvasAngle+Math.PI-.1,this.lbRotationAngle=-a.a.THREE_PI_BY_2+this.startCanvasAngle;for(var t=0;t<=180;t++)this.tempAngle=this.startAngle+this.PIBy180*t,this.tickPtStarts[t].x=this.posPx.x+this.radiusPx*Math.cos(this.tempAngle),this.tickPtStarts[t].y=this.posPx.y+-Math.sin(this.tempAngle)*this.radiusPx,t%10==0?(this.tickPtEnds[t].x=this.posPx.x+this.majorTickEnd*Math.cos(this.tempAngle),this.tickPtEnds[t].y=this.posPx.y+-Math.sin(this.tempAngle)*this.majorTickEnd):t%5==0?(this.tickPtEnds[t].x=this.posPx.x+this.midTickEnd*Math.cos(this.tempAngle),this.tickPtEnds[t].y=this.posPx.y+-Math.sin(this.tempAngle)*this.midTickEnd):(this.tickPtEnds[t].x=this.posPx.x+this.minorTickEnd*Math.cos(this.tempAngle),this.tickPtEnds[t].y=this.posPx.y+-Math.sin(this.tempAngle)*this.minorTickEnd);for(var e=0;e<=18;e++)this.tempAngle=this.startAngle+this.PIBy180*e*10,this.outerLabelPos[e].x=this.posPx.x+this.outerLbPosRadiusPx*Math.cos(this.tempAngle),this.outerLabelPos[e].y=this.posPx.y+-Math.sin(this.tempAngle)*this.outerLbPosRadiusPx,this.innerLabelPos[e].x=this.posPx.x+this.innerLbPosRadiusPx*Math.cos(this.tempAngle),this.innerLabelPos[e].y=this.posPx.y+-Math.sin(this.tempAngle)*this.innerLbPosRadiusPx,9==e?(this.raysPosEnd[e].x=this.posPx.x+this.rightAngLineLenPx*Math.cos(this.tempAngle),this.raysPosEnd[e].y=this.posPx.y+-Math.sin(this.tempAngle)*this.rightAngLineLenPx,this.raysPosStart[e].x=this.raysPosEnd[e].x,this.raysPosStart[e].y=this.raysPosEnd[e].y):(this.raysPosStart[e].x=this.posPx.x+this.innerMostArcRPx*Math.cos(this.tempAngle),this.raysPosStart[e].y=this.posPx.y+-Math.sin(this.tempAngle)*this.innerMostArcRPx,this.raysPosEnd[e].x=this.posPx.x+this.innerArcRadiusPx*Math.cos(this.tempAngle),this.raysPosEnd[e].y=this.posPx.y+-Math.sin(this.tempAngle)*this.innerArcRadiusPx)}},{key:"handlePanStart",value:function(t){var e=this;if(this.helperHandleEvent)this.helper.handlePanStart(t);else if(ot.getDistance(t,this.posPx)<this.innerArcRadiusPx)this.toMove=!0,this.diffFromCenter.set(t.x-this.posPx.x,t.y-this.posPx.y);else{this.toMove=!1;var i=this.container.getCoorFromPix(t.x,t.y),s=ot.getAngleCC({x:i.x-this.pos.x,y:i.y-this.pos.y});this.angleDiff=s-this.startAngle,new n.a.Tween({opacity:1}).to({opacity:0},400).easing(n.a.Easing.Quartic.Out).onUpdate((function(t){e.textColorA="rgba("+e.textColorRGB[0]+", "+e.textColorRGB[1]+", "+e.textColorRGB[2]+", "+t.opacity+")"})).start()}}},{key:"handlePanMove",value:function(t){if(this.helperHandleEvent)this.helper.handlePanMove(t);else if(this.toMove)this.moveToPx(t.x-this.diffFromCenter.x,t.y-this.diffFromCenter.y);else{var e=this.container.getCoorFromPix(t.x,t.y),i=ot.getAngleCC({x:e.x-this.pos.x,y:e.y-this.pos.y});this.startAngle=(i-this.angleDiff)%a.a.TWO_PI,this.updatePixelLocation()}}},{key:"handlePanEnd",value:function(t){var e=this;this.helperHandleEvent?this.helper.handlePanEnd(t):this.toMove||new n.a.Tween({opacity:0}).to({opacity:1},500).easing(n.a.Easing.Quadratic.InOut).onStart((function(){e.lbStartAngle=-a.a.THREE_PI_BY_2-e.startAngle})).onUpdate((function(t){e.textColorA="rgba("+e.textColorRGB[0]+", "+e.textColorRGB[1]+", "+e.textColorRGB[2]+", "+t.opacity+")"})).start()}},{key:"moveToPx",value:function(t,e){this.container.getCoorFromPixFT(t,e,this.pos),this.updatePixelLocation()}},{key:"rotate",value:function(t){this.startAngle=t,this.updatePixelLocation()}},{key:"updatePixelLocation",value:function(){this.container.getPixFromCoorPtFT(this.pos,this.posPx),this.radiusPx=this.radius/this.container.coorPerPixel,this.minorTickEnd=this.radiusPx-this.minorTickLen/this.container.coorPerPixel,this.majorTickEnd=this.radiusPx-this.majorTickLen/this.container.coorPerPixel,this.midTickEnd=this.radiusPx-this.midTickLen/this.container.coorPerPixel,this.outerLbPosRadiusPx=this.outerLbPosRadius/this.container.coorPerPixel,this.innerLbPosRadiusPx=this.innerLbPosRadius/this.container.coorPerPixel,this.middleArcRadiusPx=this.middleArcRadius/this.container.coorPerPixel,this.innerArcRadiusPx=this.innerArcRadius/this.container.coorPerPixel,this.innerMostArcRPx=this.innerMostArcR/this.container.coorPerPixel,this.distLbsCoorPx=this.distLbsCoor/this.container.coorPerPixel,this.rightAngLineLenPx=this.rightAngLineLen/this.container.coorPerPixel,this.generatePoints(),this.helper.update()}},{key:"hide",value:function(t){var e=this;this.visible&&new n.a.Tween({opacity:1}).to({opacity:0},600).easing(n.a.Easing.Sinusoidal.In).onStart((function(){e.isHelperOn&&e.helper.hide()})).onUpdate((function(t){e.borderColorA="rgba("+e.colorRGB[0]+", "+e.colorRGB[1]+", "+e.colorRGB[2]+", "+t.opacity*e.defaultBorderOpacity+")",e.innerColorA="rgba("+e.colorRGB[0]+", "+e.colorRGB[1]+", "+e.colorRGB[2]+", "+t.opacity*e.defaultInnerOpacity+")",e.tickColorA="rgba("+e.tickColorRGB[0]+", "+e.tickColorRGB[1]+", "+e.tickColorRGB[2]+", "+t.opacity*e.defaultTickOpacity+")",e.textColorA="rgba("+e.textColorRGB[0]+", "+e.textColorRGB[1]+", "+e.textColorRGB[2]+", "+t.opacity*e.defaultTextOpacity+")"})).onComplete((function(i){e.visible=!1,t&&t()})).start()}},{key:"checkSelection",value:function(t){return this.isHelperOn&&this.helper.checkSelection(t)?(this.helperHandleEvent=!0,!0):(this.helperHandleEvent=!1,this.context.beginPath(),this.context.arc(this.posPx.x,this.posPx.y,this.radiusPx,this.startCanvasAngleOF,this.endCanvasAngleOF,!0),this.context.isPointInPath(t.x,t.y))}},{key:"adjustScale",value:function(){this.labelSize90CoorPx=this.labelSize90Coor/this.container.coorPerPixel,this.labelFont="bold "+(this.labelSizeInCoor/this.container.coorPerPixel).toFixed(1)+"pt Computer Modern",this.labelFont90="bold "+this.labelSize90CoorPx.toFixed(1)+"pt Computer Modern"}},{key:"adjustSizesWithPixelDensity",value:function(){this.tickLineWidth=this.tickLineWidth*this.container.devicePixelRatio}},{key:"getBoundingBoxCoor",value:function(){}},{key:"addToRunningTweens",value:function(t){this.runningTweens.push(t)}},{key:"removeFromRunningTweens",value:function(t){for(var e=0;e<this.runningTweens.length;e++)if(this.runningTweens[e]._id==t._id){this.runningTweens.splice(e,1);break}}},{key:"stopAllRunningTweens",value:function(){this.runningTweens.forEach((function(t){t.stop()})),this.runningTweens.length=0}},{key:"delete",value:function(){this.container.removeItem(this),this.pencil&&this.pencil.delete(),this.isHelperOn&&this.helper.destroyAll(),this.retunedPoint&&this.retunedPoint.delete()}}]),t}();rt.id=0;var at=function(){function t(e,i){it(this,t),this.protra=e,this.context=i,this.container=e.container,this.color="#ff00f0",this.measuredAngle=Math.PI/4,this.innerColorOpacity=.15,this.colorRGB=ot.hexToRgb(this.color),this.updateOpacity(0),this.stickWidth=1.7,this.indicatorVisble=!1,this.stick1PosPx=new h,this.stick2PosPx=new h,this.indicatorTipPx=new h,this.indicatorLeftPx=new h,this.indicatorRightPx=new h,this.stick1UnitVect=new h,this.stick1Vect=new h,this.leftPointAngle=0,this.rightPointAngle=0,this.indicatorLen=void 0,this.onRight=!1,this.label=new et.a(this.container.stage.containerElement,{width:50,height:14,horizontalAlign:et.a.HORIZONTAL_ALIGN_MIDDLE,verticalAlign:et.a.VERTICAL_ALIGN_BOTTOM,reactable:!1}),this.angleText=document.createElement("p"),this.angleText.innerText="22°",this.angleText.style.fontSize="13px",this.angleText.style.fontWeight="bold",this.angleText.style.margin="0px",this.angleText.style.textAlign="center",this.angleText.style.background="#cdcdcd",this.angleText.style.padding="2px 5px 0px 5px",this.angleText.style.borderRadius="3px",this.label.frame.style.opacity=0,this.label.frame.appendChild(this.angleText),this.angleInDegree=(this.measuredAngle%a.a.TWO_PI*a.a.ONE_EIGHTY_BY_PI).toFixed(1)}return st(t,[{key:"show",value:function(){var t=this;this.angleText.style.color="#333333",this.showTween=new n.a.Tween({opacity:0}).to({opacity:1},900).easing(n.a.Easing.Sinusoidal.InOut).onStart((function(){t.visible=!0,t.protra.isHelperOn=!0,t.label.show()})).onUpdate((function(e){t.updateOpacity(e.opacity)})).onComplete((function(){})),this.protra.stopped||this.showTween.start()}},{key:"hide",value:function(){var t=this;new n.a.Tween({opacity:1}).to({opacity:0},600).easing(n.a.Easing.Sinusoidal.InOut).onStart((function(){t.label.hide()})).onUpdate((function(e){t.updateOpacity(e.opacity)})).onComplete((function(){t.visible=!1,t.protra.isHelperOn=!1})).start()}},{key:"destroyAll",value:function(){this.visible=!1,this.showTween.stop(),this.label.delete()}},{key:"update",value:function(){this.onRight?(this.startAngle=this.protra.startCanvasAngle,this.startAngle>a.a.TWO_PI&&(this.startAngle-=a.a.TWO_PI),this.endAngle=this.startAngle-this.measuredAngle):(this.startAngle=this.protra.endCanvasAngle,this.endAngle=this.startAngle+this.measuredAngle,this.startAngle<0&&(this.startAngle=a.a.TWO_PI+this.startAngle)),this.stick1UnitVect.set(Math.cos(this.endAngle),Math.sin(this.endAngle)),this.stick1PosPx.set(this.protra.posPx.x+this.stick1UnitVect.x*this.protra.radiusPx,this.protra.posPx.y+this.stick1UnitVect.y*this.protra.radiusPx),this.stick2PosPx.set(this.protra.posPx.x+Math.cos(this.startAngle)*this.protra.radiusPx,this.protra.posPx.y+Math.sin(this.startAngle)*this.protra.radiusPx),this.leftPointAngle=this.endAngle-.35,this.rightPointAngle=this.endAngle+.35,this.indicatorLen=this.protra.radiusPx/10,this.indicatorTipPx.set(this.protra.posPx.x+this.stick1UnitVect.x*(this.protra.radiusPx+4),this.protra.posPx.y+this.stick1UnitVect.y*(this.protra.radiusPx+4)),this.indicatorLeftPx.set(this.stick1PosPx.x+Math.cos(this.leftPointAngle)*this.indicatorLen,this.stick1PosPx.y+Math.sin(this.leftPointAngle)*this.indicatorLen),this.indicatorRightPx.set(this.stick1PosPx.x+Math.cos(this.rightPointAngle)*this.indicatorLen,this.stick1PosPx.y+Math.sin(this.rightPointAngle)*this.indicatorLen),this.indicatorVisble?this.distFromTipToLbBase=this.protra.radiusPx+Math.cos(.35)*this.indicatorLen+5:this.distFromTipToLbBase=this.protra.radiusPx+8*Math.cos(.35),this.label.setPosition(this.protra.posPx.x/this.container.devicePixelRatio+this.stick1UnitVect.x*(7+this.distFromTipToLbBase/this.container.devicePixelRatio),this.protra.posPx.y/this.container.devicePixelRatio+this.stick1UnitVect.y*(7+this.distFromTipToLbBase/this.container.devicePixelRatio)),this.label.setAngle(180*this.endAngle/Math.PI),this.angleText.innerText=this.angleInDegree+"°"}},{key:"updateOpacity",value:function(t){this.innerColorA="rgba("+this.colorRGB[0]+", "+this.colorRGB[1]+", "+this.colorRGB[2]+", "+this.innerColorOpacity*t+")",this.stickHighlightColor="rgba("+this.colorRGB[0]+", "+this.colorRGB[1]+", "+this.colorRGB[2]+", "+.3*t+")",this.stickColorRGBa="rgba("+this.colorRGB[0]+", "+this.colorRGB[1]+", "+this.colorRGB[2]+", "+t+")"}},{key:"updateAngle",value:function(t){this.measuredAngle=t,this.angleInDegree=(this.measuredAngle%a.a.TWO_PI*a.a.ONE_EIGHTY_BY_PI).toFixed(1),this.update()}},{key:"updateSide",value:function(t){this.onRight=t,this.update()}},{key:"render",value:function(){this.visible&&(this.context.beginPath(),this.context.lineWidth=this.stickWidth,this.context.strokeStyle=this.stickColorRGBa,this.context.setLineDash([5,3]),this.context.moveTo(this.protra.posPx.x,this.protra.posPx.y),this.context.lineTo(this.stick1PosPx.x,this.stick1PosPx.y),this.context.moveTo(this.protra.posPx.x,this.protra.posPx.y),this.context.lineTo(this.stick2PosPx.x,this.stick2PosPx.y),this.context.stroke(),this.context.setLineDash([]),this.context.fillStyle=this.innerColorA,this.context.beginPath(),this.context.moveTo(this.protra.posPx.x,this.protra.posPx.y),this.context.arc(this.protra.posPx.x,this.protra.posPx.y,this.protra.radiusPx,this.startAngle,this.endAngle,this.onRight),this.context.closePath(),this.context.fill(),this.indicatorVisble&&(this.context.lineJoin="round",this.context.beginPath(),this.context.moveTo(this.indicatorTipPx.x,this.indicatorTipPx.y),this.context.lineTo(this.indicatorLeftPx.x,this.indicatorLeftPx.y),this.context.lineTo(this.indicatorRightPx.x,this.indicatorRightPx.y),this.context.closePath(),this.context.fill(),this.context.stroke()),this.stickHighlightVisible&&(this.context.beginPath(),this.context.strokeStyle=this.stickHighlightColor,this.context.lineWidth=this.stickHighlightWidth,this.context.moveTo(this.protra.posPx.x,this.protra.posPx.y),this.context.lineTo(this.stick1PosPx.x,this.stick1PosPx.y),this.context.stroke()))}},{key:"checkSelection",value:function(t){this.stick1VectorPx=new h(this.stick1PosPx.x-this.protra.posPx.x,this.stick1PosPx.y-this.protra.posPx.y),this.vectorToTestPtPx=new h(t.x-this.protra.posPx.x,t.y-this.protra.posPx.y);var e=this.stick1VectorPx.dot(this.vectorToTestPtPx)/this.stick1VectorPx.getLength();return e>=this.protra.innerArcRadiusPx&&e<=this.stick1VectorPx.getLength()+(this.indicatorLen+20)&&Math.sqrt(Math.pow(this.vectorToTestPtPx.getLength(),2)-Math.pow(e,2))<this.indicatorLen/1.8}},{key:"handlePanStart",value:function(t){var e,i=this,s=this.container.getCoorFromPix(t.x,t.y);e=this.endAngle<0?a.a.TWO_PI+this.endAngle:this.endAngle,this.panOffsetAngle=ot.getAngle({x:s.x-this.protra.pos.x,y:s.y-this.protra.pos.y})-e,this.onRight||(this.panOffsetAngle=-1*this.panOffsetAngle),new n.a.Tween({opacity:0,width:0}).to({opacity:.3,width:8},350).easing(n.a.Easing.Back.Out).onStart((function(){i.stickHighlightVisible=!0})).onUpdate((function(t){i.stickHighlightColor="rgba("+i.colorRGB[0]+", "+i.colorRGB[1]+", "+i.colorRGB[2]+", "+t.opacity+")",i.stickHighlightWidth=t.width})).start()}},{key:"handlePanMove",value:function(t){var e=this.container.getCoorFromPix(t.x,t.y),i=ot.getAngle({x:e.x-this.protra.pos.x,y:e.y-this.protra.pos.y});this.onRight?this.measuredAngle=this.startAngle-i:this.measuredAngle=i-this.startAngle,this.measuredAngle+=this.panOffsetAngle,this.measuredAngle<0&&(this.measuredAngle=a.a.TWO_PI+this.measuredAngle),Math.abs(this.measuredAngle-a.a.PI_BY_2)<.02&&(this.measuredAngle=a.a.PI_BY_2),this.measuredAngle>Math.PI&&(this.measuredAngle>a.a.THREE_PI_BY_2?this.measuredAngle=0:this.measuredAngle=Math.PI),this.updateAngle(this.measuredAngle)}},{key:"handlePanEnd",value:function(t){var e=this;new n.a.Tween({opacity:.3,width:this.stickHighlightWidth}).to({opacity:0,width:0},350).easing(n.a.Easing.Back.Out).onStart((function(){e.stickHighlightVisible=!0})).onUpdate((function(t){e.stickHighlightColor="rgba("+e.colorRGB[0]+", "+e.colorRGB[1]+", "+e.colorRGB[2]+", "+t.opacity+")",e.stickHighlightWidth=t.width})).onComplete((function(){e.stickHighlightVisible=!1})).start()}}]),t}();function lt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ct=i(2),ut=i(4),dt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.plasticColor="#323335",this.handColor="#4C579C",this.leadColor="#000000",this.pencilColor="#FFA921",this.strokeColor="#888888",this.pHeadColor="#DFBF98",this.tipColor="#dddddd",this.allPointsCoor=[],this.allPointsDefaultCoor=[],this.allPointsPx=[],this.leftPts=[],this.rightPts=[],this.centerPts=[],this.leftPtsDefault=[],this.rightPtsDefault=[],this.centerPtsDefault=[],this.ptsHandleTop=[new h(-.1301,9.75476),new h(.12956,9.7544),new h(.2,8.3),new h(-.2,8.3)],this.ptsHandleTopPx=[],this.pivotPosDefault=new h(0,7.8),this.pivotPos=this.pivotPosDefault.clone(),this.pivotPosPx=new h,this.diskRadius=.6,this.ptsRightHand=[new h(0,7.8),new h(.5342,7.79491),new h(.38806,3.15668),new h(.43457,2.9238),new h(1.15764,2.7343),new h(1.04933,2.30367),new h(.32096,2.4924),new h(0,2.8)],this.ptsRightHandPx=[],this.ptsLeftHand=[new h(0,7.8),new h(0,1.6),new h(-.2591,1.57668),new h(-.36316,2.15759),new h(-.53351,7.79715)],this.ptsLeftHandPx=[],this.ptsTip=[new h(-.05013,1.64915),new h(0,0),new h(-.21697,1.63398)],this.ptsTipPx=[],this.ptsPencilHead=[new h(.17565,.42166),new h(0,0),new h(.03811,.45979)],this.ptsPencilHeadPx=[],this.ptsPencilNeck=[new h(.49433,1.17559),new h(.17565,.42166),new h(.03811,.45979),new h(.09782,1.27233)],this.ptsPencilNeckPx=[],this.ptsPencilBody=[new h(1.67756,6.07266),new h(.49433,1.17559),new h(.09782,1.27233),new h(1.28032,6.17071)],this.ptsPencilBodyPx=[],this.ptsRing=[new h(1.1043,2.88027),new h(.93945,2.19126),new h(.78294,2.23433),new h(.94596,2.92058)],this.ptsRingPx=[];for(var i=0;i<this.ptsHandleTop.length;i++)this.ptsHandleTopPx.push(new h),this.allPointsPx.push(this.ptsHandleTopPx[i]),this.allPointsCoor.push(this.ptsHandleTop[i]),this.allPointsDefaultCoor.push(this.ptsHandleTop[i].clone()),this.centerPts.push(this.ptsHandleTop[i]),this.centerPtsDefault.push(this.allPointsDefaultCoor[this.allPointsDefaultCoor.length-1]);for(var n=0;n<this.ptsRightHand.length;n++)this.ptsRightHandPx.push(new h),this.allPointsPx.push(this.ptsRightHandPx[n]),this.allPointsCoor.push(this.ptsRightHand[n]),this.allPointsDefaultCoor.push(this.ptsRightHand[n].clone()),this.rightPts.push(this.ptsRightHand[n]),this.rightPtsDefault.push(this.allPointsDefaultCoor[this.allPointsDefaultCoor.length-1]);for(var s=0;s<this.ptsLeftHand.length;s++)this.ptsLeftHandPx.push(new h),this.allPointsPx.push(this.ptsLeftHandPx[s]),this.allPointsCoor.push(this.ptsLeftHand[s]),this.allPointsDefaultCoor.push(this.ptsLeftHand[s].clone()),this.leftPts.push(this.ptsLeftHand[s]),this.leftPtsDefault.push(this.allPointsDefaultCoor[this.allPointsDefaultCoor.length-1]);for(var o=0;o<this.ptsTip.length;o++)this.ptsTipPx.push(new h),this.allPointsPx.push(this.ptsTipPx[o]),this.allPointsCoor.push(this.ptsTip[o]),this.allPointsDefaultCoor.push(this.ptsTip[o].clone()),this.leftPts.push(this.ptsTip[o]),this.leftPtsDefault.push(this.allPointsDefaultCoor[this.allPointsDefaultCoor.length-1]);for(var r=0;r<this.ptsPencilHead.length;r++)this.ptsPencilHeadPx.push(new h),this.allPointsPx.push(this.ptsPencilHeadPx[r]),this.allPointsCoor.push(this.ptsPencilHead[r]),this.allPointsDefaultCoor.push(this.ptsPencilHead[r].clone()),this.rightPts.push(this.ptsPencilHead[r]),this.rightPtsDefault.push(this.allPointsDefaultCoor[this.allPointsDefaultCoor.length-1]);for(var a=0;a<this.ptsPencilNeck.length;a++)this.ptsPencilNeckPx.push(new h),this.allPointsPx.push(this.ptsPencilNeckPx[a]),this.allPointsCoor.push(this.ptsPencilNeck[a]),this.allPointsDefaultCoor.push(this.ptsPencilNeck[a].clone()),this.rightPts.push(this.ptsPencilNeck[a]),this.rightPtsDefault.push(this.allPointsDefaultCoor[this.allPointsDefaultCoor.length-1]);for(var l=0;l<this.ptsPencilBody.length;l++)this.ptsPencilBodyPx.push(new h),this.allPointsPx.push(this.ptsPencilBodyPx[l]),this.allPointsCoor.push(this.ptsPencilBody[l]),this.allPointsDefaultCoor.push(this.ptsPencilBody[l].clone()),this.rightPts.push(this.ptsPencilBody[l]),this.rightPtsDefault.push(this.allPointsDefaultCoor[this.allPointsDefaultCoor.length-1]);for(var c=0;c<this.ptsRing.length;c++)this.ptsRingPx.push(new h),this.allPointsPx.push(this.ptsRingPx[c]),this.allPointsCoor.push(this.ptsRing[c]),this.allPointsDefaultCoor.push(this.ptsRing[c].clone()),this.rightPts.push(this.ptsRing[c]),this.rightPtsDefault.push(this.allPointsDefaultCoor[this.allPointsDefaultCoor.length-1]);this.flipSide(),this.visible=!1,this.attachedItemCallbacks=[],this.radiusLine=new D({x:0,y:0},{x:0,y:0},{autoDraw:!1,segments:[4,4],lineWidth:1,color:"#888888"}),this.pos=new h,this.radius=0,this.type="Compass",this.id="Compass"+t.id++,this.radiusLineTip=new h,this.radiusLineTipPx=new h}var e,i,s;return e=t,(i=[{key:"setContext",value:function(t,e){this.context=t,this.container=e,this.container.addItem(this.radiusLine),this.label=new et.a(this.container.stage.containerElement,{width:100,height:"auto",horizontalAlign:et.a.HORIZONTAL_ALIGN_MIDDLE,verticalAlign:et.a.VERTICAL_ALIGN_BOTTOM,reactable:!1}),this.angleText=document.createElement("p"),this.angleText.innerText="0.0",this.angleText.style.fontSize="12px",this.angleText.style.fontWeight="bold",this.angleText.style.background="#cdcdcd",this.angleText.style.margin="0px",this.angleText.style.padding="2px 5px 0px 5px",this.angleText.style.textAlign="center",this.angleText.style.borderRadius="3px",this.label.frame.style.opacity=0,this.label.frame.appendChild(this.angleText),this.label.boundingRect=this.label.frame.getBoundingClientRect(),this.labelPosPx=new h,this.updatePixelLocation()}},{key:"updateOpacity",value:function(t){this.plasticColorRGB=ct.hexToRgb(this.plasticColor),this.plasticCRGBa="rgba("+this.plasticColorRGB[0]+", "+this.plasticColorRGB[1]+", "+this.plasticColorRGB[2]+", "+t+")",this.handColorRGB=ct.hexToRgb(this.handColor),this.handColorRGBa="rgba("+this.handColorRGB[0]+", "+this.handColorRGB[1]+", "+this.handColorRGB[2]+", "+t+")",this.leadColorRGB=ct.hexToRgb(this.leadColor),this.leadColorRGBa="rgba("+this.leadColorRGB[0]+", "+this.leadColorRGB[1]+", "+this.leadColorRGB[2]+", "+t+")",this.pencilColorRGB=ct.hexToRgb(this.pencilColor),this.pencilColorRGBa="rgba("+this.pencilColorRGB[0]+", "+this.pencilColorRGB[1]+", "+this.pencilColorRGB[2]+", "+t+")",this.strokeColorRGB=ct.hexToRgb(this.strokeColor),this.strokeColorRGBa="rgba("+this.strokeColorRGB[0]+", "+this.strokeColorRGB[1]+", "+this.strokeColorRGB[2]+", "+t+")",this.pHeadColorRGB=ct.hexToRgb(this.pHeadColor),this.pHeadColorRGBa="rgba("+this.pHeadColorRGB[0]+", "+this.pHeadColorRGB[1]+", "+this.pHeadColorRGB[2]+", "+t+")",this.tipColorRGB=ct.hexToRgb(this.tipColor),this.tipColorRGBa="rgba("+this.tipColorRGB[0]+", "+this.tipColorRGB[1]+", "+this.tipColorRGB[2]+", "+t+")"}},{key:"updatePixelLocation",value:function(){var t;for(t=0;t<this.allPointsCoor.length;t++)this.container.getPixFromCoorPtFT(this.allPointsCoor[t],this.allPointsPx[t]);this.diskRadiusPx=this.diskRadius/this.container.coorPerPixel,this.nutRadiusPx=this.diskRadiusPx/3,this.container.getPixFromCoorPtFT(this.pivotPos,this.pivotPosPx),this.container.getPixFromCoorPtFT(this.radiusLineTip,this.radiusLineTipPx),this.notifyChanges()}},{key:"render",value:function(){if(this.visible){var t;for(this.context.beginPath(),this.context.lineJoin="round",this.context.lineWidth=2,this.context.strokeStyle=this.strokeColorRGBa,this.context.fillStyle="#ff0000",this.context.fillStyle=this.plasticCRGBa,this.context.moveTo(this.ptsHandleTopPx[0].x,this.ptsHandleTopPx[0].y),t=1;t<this.ptsHandleTopPx.length;t++)this.context.lineTo(this.ptsHandleTopPx[t].x,this.ptsHandleTopPx[t].y);for(this.context.lineTo(this.ptsHandleTopPx[0].x,this.ptsHandleTopPx[0].y),this.context.fill(),this.context.beginPath(),this.context.fillStyle=this.pencilColorRGBa,this.context.strokeStyle=this.pencilColorRGBa,this.context.moveTo(this.ptsPencilBodyPx[0].x,this.ptsPencilBodyPx[0].y),t=1;t<this.ptsPencilBodyPx.length;t++)this.context.lineTo(this.ptsPencilBodyPx[t].x,this.ptsPencilBodyPx[t].y);for(this.context.lineTo(this.ptsPencilBodyPx[0].x,this.ptsPencilBodyPx[0].y),this.context.fill(),this.context.stroke(),this.context.beginPath(),this.context.fillStyle=this.pHeadColorRGBa,this.context.strokeStyle=this.pHeadColorRGBa,this.context.moveTo(this.ptsPencilNeckPx[0].x,this.ptsPencilNeckPx[0].y),t=1;t<this.ptsPencilNeckPx.length;t++)this.context.lineTo(this.ptsPencilNeckPx[t].x,this.ptsPencilNeckPx[t].y);for(this.context.lineTo(this.ptsPencilNeckPx[0].x,this.ptsPencilNeckPx[0].y),this.context.fill(),this.context.stroke(),this.context.beginPath(),this.context.fillStyle=this.tipColorRGBa,this.context.strokeStyle=this.strokeColorRGBa,this.context.moveTo(this.ptsTipPx[0].x,this.ptsTipPx[0].y),t=1;t<this.ptsTipPx.length;t++)this.context.lineTo(this.ptsTipPx[t].x,this.ptsTipPx[t].y);for(this.context.lineTo(this.ptsTipPx[0].x,this.ptsTipPx[0].y),this.context.fill(),this.context.stroke(),this.context.beginPath(),this.context.fillStyle=this.handColorRGBa,this.context.strokeStyle=this.strokeColorRGBa,this.context.moveTo(this.ptsLeftHandPx[0].x,this.ptsLeftHandPx[0].y),t=1;t<this.ptsLeftHandPx.length;t++)this.context.lineTo(this.ptsLeftHandPx[t].x,this.ptsLeftHandPx[t].y);for(this.context.lineTo(this.ptsLeftHandPx[0].x,this.ptsLeftHandPx[0].y),this.context.moveTo(this.ptsRightHandPx[0].x,this.ptsRightHandPx[0].y),t=1;t<this.ptsRightHandPx.length;t++)this.context.lineTo(this.ptsRightHandPx[t].x,this.ptsRightHandPx[t].y);for(this.context.lineTo(this.ptsRightHandPx[0].x,this.ptsRightHandPx[0].y),this.context.fill(),this.context.beginPath(),this.context.fillStyle=this.plasticCRGBa,this.context.moveTo(this.ptsRingPx[0].x,this.ptsRingPx[0].y),t=1;t<this.ptsRingPx.length;t++)this.context.lineTo(this.ptsRingPx[t].x,this.ptsRingPx[t].y);for(this.context.lineTo(this.ptsRingPx[0].x,this.ptsRingPx[0].y),this.context.fill(),this.context.fillStyle=this.plasticCRGBa,this.context.beginPath(),this.context.arc(this.pivotPosPx.x,this.pivotPosPx.y,this.diskRadiusPx,0,a.a.TWO_PI,!1),this.context.fill(),this.context.beginPath(),this.context.fillStyle=this.handColorRGBa,this.context.arc(this.pivotPosPx.x,this.pivotPosPx.y,this.nutRadiusPx,0,a.a.TWO_PI,!1),this.context.fill(),this.context.beginPath(),this.context.fillStyle=this.leadColorRGBa,this.context.strokeStyle=this.leadColorRGBa,this.context.moveTo(this.ptsPencilHeadPx[0].x,this.ptsPencilHeadPx[0].y),t=1;t<this.ptsPencilHeadPx.length;t++)this.context.lineTo(this.ptsPencilHeadPx[t].x,this.ptsPencilHeadPx[t].y);this.context.lineTo(this.ptsPencilHeadPx[0].x,this.ptsPencilHeadPx[0].y),this.context.fill(),this.context.stroke()}}},{key:"prepareToDrawArc",value:function(t,e,i,n,s){}},{key:"drawArc",value:function(t,e,i,s,o,h,r){var l=this;this.visible;var c,u=1e3*Math.pow(s*e,1/4.2),d=1e3*Math.pow(e,1/4.2);i>a.a.THREE_PI_BY_2||i<Math.PI/2?(this.faceLeft||(this.flipY(),this.pivotPosDefault.y=-1*this.pivotPosDefault.y,this.faceLeft=!0),i=Math.PI-i,c=(i+=s/2)-s):(this.faceLeft&&(this.flipY(),this.pivotPosDefault.y=-1*this.pivotPosDefault.y,this.faceLeft=!1),i=Math.PI-i,c=(i-=s/2)+s);var p=i-Math.PI;(p%=a.a.TWO_PI)<0&&(p=a.a.TWO_PI+p),this.faceLeft?this.label.setAngle(180*p/Math.PI+90):this.label.setAngle(180*p/Math.PI-90),this.translateToPivotAndRotate(t,0,i),this.updateOpacity(0),this.fadeInTween=new n.a.Tween({opacity:0}).to({opacity:1},1e3).easing(ut.smooth).onStart((function(){l.visible=!0,l.radiusLineTip.set(l.ptsTip[1].x,l.ptsTip[1].y),l.label.setPosition(l.ptsTipPx[1].x/l.container.devicePixelRatio,l.ptsTipPx[1].y/l.container.devicePixelRatio),l.angleText.style.color="#333333",l.label.show()})).onUpdate((function(t){l.updateOpacity(t.opacity)})).onComplete((function(){l.radiusTween.start()})),this.radiusTween=new n.a.Tween({radius:0}).to({radius:e},d).easing(ut.smooth).onStart((function(){l.radiusLine.show()})).onUpdate((function(e){l.translateToPivotAndRotate(t,e.radius,i),l.radiusLineTip.set(t.x-Math.cos(a.a.TWO_PI-i)*e.radius,t.y-Math.sin(a.a.TWO_PI-i)*e.radius),l.container.getPixFromCoorPtFT(l.radiusLineTip,l.radiusLineTipPx),l.radiusLine.update(t,l.radiusLineTip),l.angleText.innerText=e.radius.toFixed(1),l.labelPosPx.copyFrom(ct.getMidPoint(l.ptsTipPx[1],l.radiusLineTipPx)),l.label.setPosition(l.labelPosPx.x/l.container.devicePixelRatio,l.labelPosPx.y/l.container.devicePixelRatio)})).onComplete((function(){l.angleText.style.color="red",setTimeout((function(){l.label.hide(),l.radiusLine.animateHide(),l.arcTween.start()}),300)})),this.arcTween=new n.a.Tween({angle:i}).to({angle:c},u).easing(n.a.Easing.Quadratic.InOut).onStart((function(){o&&o(i)})).onUpdate((function(i){l.translateToPivotAndRotate(t,e,i.angle),h&&h(i.angle)})).onComplete((function(){f.start()}));var f=new n.a.Tween({opacity:1}).to({opacity:0},1e3).easing(ut.smooth).onStart((function(){})).onUpdate((function(t){l.updateOpacity(t.opacity)})).onComplete((function(){l.visible=!1,r&&r(c)}));this.fadeInTween.start()}},{key:"adjustScale",value:function(){}},{key:"flipSide",value:function(){var t;for(t=0;t<this.allPointsCoor.length;t++)this.allPointsDefaultCoor[t].x=-this.allPointsDefaultCoor[t].x}},{key:"flipY",value:function(){var t;for(t=0;t<this.allPointsCoor.length;t++)this.allPointsDefaultCoor[t].y=-this.allPointsDefaultCoor[t].y}},{key:"translateToPivotAndRotate",value:function(t,e,i){var n=Math.cos(i),s=Math.sin(i),o=-Math.sin(i),h=Math.cos(i);e/=2;var r,a=-Math.asin(e/this.pivotPosDefault.y),l=Math.cos(a),c=Math.sin(a),u=-Math.sin(a),d=Math.cos(a),p=-Math.sin(a)*this.pivotPosDefault.y,f=Math.cos(a)*this.pivotPosDefault.y;for(r=0;r<this.rightPts.length;r++)this.tempX=this.rightPtsDefault[r].x*l+(this.rightPtsDefault[r].y-this.pivotPosDefault.y)*-c-p,this.tempY=this.rightPtsDefault[r].x*-u+(this.rightPtsDefault[r].y-this.pivotPosDefault.y)*d+f,this.rightPts[r].x=t.x+n*this.tempX+s*this.tempY,this.rightPts[r].y=t.y+o*this.tempX+h*this.tempY;for(r=0;r<this.leftPts.length;r++)this.tempX=this.leftPtsDefault[r].x*l+(this.leftPtsDefault[r].y-this.pivotPosDefault.y)*c-p,this.tempY=this.leftPtsDefault[r].x*u+(this.leftPtsDefault[r].y-this.pivotPosDefault.y)*d+f,this.leftPts[r].x=t.x+n*this.tempX+s*this.tempY,this.leftPts[r].y=t.y+o*this.tempX+h*this.tempY;for(r=0;r<this.centerPts.length;r++)this.tempX=this.centerPtsDefault[r].x-p,this.tempY=this.centerPtsDefault[r].y-(this.pivotPosDefault.y-f),this.centerPts[r].x=t.x+n*this.tempX+s*this.tempY,this.centerPts[r].y=t.y+o*this.tempX+h*this.tempY;this.tempX=this.pivotPosDefault.x-p,this.pivotPos.x=t.x+n*this.tempX+s*f,this.pivotPos.y=t.y+o*this.tempX+h*f,this.updatePixelLocation()}},{key:"moveAndRotate",value:function(t,e){this.translateToPivotAndRotate(t,0,e)}},{key:"addAttachedItemCallback",value:function(t){this.attachedItemCallbacks.push(t)}},{key:"removeAttachedItemCallback",value:function(t){}},{key:"notifyChanges",value:function(){this.attachedItemCallbacks.forEach((function(t){t()})),this.labelPosPx.copyFrom(ct.getMidPoint(this.ptsTipPx[1],this.radiusLineTipPx)),this.label.setPosition(this.labelPosPx.x/this.container.devicePixelRatio,this.labelPosPx.y/this.container.devicePixelRatio)}},{key:"delete",value:function(){this.container.removeItem(this),this.radiusLine.delete(),this.label.delete()}}])&&lt(e.prototype,i),s&&lt(e,s),t}();function pt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}dt.id=0;i(1);var ft=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pos={x:100,y:30},this.itemSize="Large"}var e,i,n;return e=t,(i=[{key:"render",value:function(){var t=new Date;this.context.save(),this.context.translate(150,150),this.context.rotate(-Math.PI/2),this.context.strokeStyle="black",this.context.fillStyle="white",this.context.lineWidth=8,this.context.lineCap="round",this.context.save();for(var e=0;e<12;e++)this.context.beginPath(),this.context.rotate(Math.PI/6),this.context.moveTo(100,0),this.context.lineTo(120,0),this.context.stroke();for(this.context.restore(),this.context.save(),this.context.lineWidth=5,e=0;e<60;e++)e%5!=0&&(this.context.beginPath(),this.context.moveTo(117,0),this.context.lineTo(120,0),this.context.stroke()),this.context.rotate(Math.PI/30);this.context.restore();var i=t.getSeconds(),n=t.getMinutes(),s=t.getHours();s=s>=12?s-12:s,this.context.fillStyle="black",this.context.save(),this.context.rotate(s*(Math.PI/6)+Math.PI/360*n+Math.PI/21600*i),this.context.lineWidth=14,this.context.beginPath(),this.context.moveTo(-20,0),this.context.lineTo(80,0),this.context.stroke(),this.context.restore(),this.context.save(),this.context.rotate(Math.PI/30*n+Math.PI/1800*i),this.context.lineWidth=10,this.context.beginPath(),this.context.moveTo(-28,0),this.context.lineTo(112,0),this.context.stroke(),this.context.restore(),this.context.save(),this.context.rotate(i*Math.PI/30),this.context.strokeStyle="#D40000",this.context.fillStyle="#D40000",this.context.lineWidth=6,this.context.beginPath(),this.context.moveTo(-30,0),this.context.lineTo(83,0),this.context.stroke(),this.context.beginPath(),this.context.arc(0,0,10,0,2*Math.PI,!0),this.context.fill(),this.context.beginPath(),this.context.arc(95,0,10,0,2*Math.PI,!0),this.context.stroke(),this.context.fillStyle="rgba(0, 0, 0, 0)",this.context.arc(0,0,3,0,2*Math.PI,!0),this.context.fill(),this.context.restore(),this.context.beginPath(),this.context.lineWidth=14,this.context.strokeStyle="#325FA2",this.context.arc(0,0,142,0,2*Math.PI,!0),this.context.stroke(),this.context.restore()}},{key:"setContext",value:function(t,e){this.context=t,this.container=e,this.context&&(this.pos_px=this.container.getPixFromCoorPt(this.pos))}}])&&pt(e.prototype,i),n&&pt(e,n),t}();function xt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var gt=function(){function t(e,i,n,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initializer=e,this.playFunc=i,this.instantDrawFunc=n,this.destroyAllFunc=s,this.items=[]}var e,i,n;return e=t,(i=[{key:"play",value:function(){this.items.length=0,this.initializer(),this.playFunc?this.playFunc():console.error("Entry point or ClearFunction is not defined.")}},{key:"instantDraw",value:function(){this.initializer(),this.instantDrawFunc()}},{key:"destroyAll",value:function(){this.destroyAllFunc(),this.deleted=!0}}])&&xt(e.prototype,i),n&&xt(e,n),t}();function Pt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var yt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.slides=[],this.currentIndex=-1,this.playing=!1,this.btn_hide_desc_panel=document.getElementById("btn_hide_desc_panel"),this.btnPlay=document.getElementById("btnPlay"),this.btnPlayIcon=document.getElementById("btnPlayIcon"),this.rows=descPanel.getElementsByClassName("row"),this.lastShowedRow=-1}var e,i,n;return e=t,(i=[{key:"play",value:function(){var t=this;this.btnPlayIcon.innerText="play_arrow",-1==this.currentIndex&&(this.btn_hide_desc_panel.style.visibility="visible"),this.currentIndex==this.slides.length-1&&(this.currentIndex=-1,this.slides.forEach((function(t){t.destroyAll()})),this.slides.length=0,this.createSlides(this)),this.playing?console.error("playing..."):(this.btnPlay.classList.add("disabled"),this.currentIndex++,this.showInstruction(this.currentIndex),this.playing=!0,setTimeout((function(){t.slides[t.currentIndex].play()}),2e3))}},{key:"stop",value:function(){this.btn_hide_desc_panel.style.visibility="hidden"}},{key:"addSlide",value:function(t){this.slides.push(t),t.slideManger=this,t.slideIndex=this.slides.length-1}},{key:"playSlideAt",value:function(t){if(t<=this.currentIndex)for(var e=t;e<=this.currentIndex;e++)this.slides[e].deleteAll();else if(t>this.currentIndex){this.slides[this.currentIndex].deleteAll();for(var i=this.currentIndex;i<t;i++)this.slides[this.currentIndex].instantDraw()}this.slides[t].play(),this.currentIndex=t}},{key:"completed",value:function(t){this.currentIndex==this.slides.length-1&&(this.btnPlayIcon.innerText="replay"),this.btnPlay.classList.remove("disabled"),this.playing=!1}},{key:"playNextSlide",value:function(){this.currentIndex>=this.slides.length-1?console.error("Reached last slide."):this.slides[this.currentIndex++].play()}},{key:"playPreviousSlide",value:function(){this.currentIndex<=0&&console.error("Reached first slide."),this.slides[this.currentIndex].deleteAll(),this.slides[this.currentIndex-1].deleteAll(),this.slides[this.currentIndex-1].play(),this.currentIndex-=1}},{key:"showInstruction",value:function(t){var e=this;-1==this.lastShowedRow?$(this.rows[t]).slideDown({duration:400,easing:"easeInOutQuad"}):$(this.rows[this.lastShowedRow]).slideUp({duration:400,done:function(){$(e.rows[t]).slideDown({duration:400,easing:"easeInOutQuad"})},easing:"easeInSine"}),this.lastShowedRow=t}}])&&Pt(e.prototype,i),n&&Pt(e,n),t}();function vt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ct=i(2),Tt=i(1),wt=function(){function t(e,i){if(vt(this,t),this.instruction=e,this.container=i,this.instruments=[],e.constructor===t.StartAndEndPoint)this.startPt=e.startPt,this.endPt=e.endPt,this.constructionMethod="PR",this.pencil=new tt({showValueLabel:!e.indefinite}),this.container.addItem(this.pencil),this.ruler=new Z({}),this.container.addItem(this.ruler);else if(e.constructor===t.RefLineAndAngle){this.startPt=e.refEndPt;var n={x:e.refEndPt.x-e.refStartPt.x,y:e.refEndPt.y-e.refStartPt.y},s=Ct.getAngleCC(n),o=Math.PI-(Math.abs(e.angle)-s);e.angle<0?this.endPt=new h(this.startPt.x+Math.cos(o)*e.length,this.startPt.y+Math.sin(o)*e.length):this.endPt=new h(this.startPt.x+Math.cos(o)*e.length,this.startPt.y-Math.sin(o)*e.length),this.pencil=new tt({showValueLabel:!e.indefinite}),this.container.addItem(this.pencil),this.ruler=new Z({}),this.container.addItem(this.ruler),this.protractor=new rt({pencil:this.pencil}),this.container.addItem(this.protractor),this.constructionMethod="PRP"}"PR"===this.constructionMethod?this.drawingFunction=this.startDrawingWithPencilAndRuler:"PRP"===this.constructionMethod?(this.drawingFunction=this.startDrawingWithPencilRulerAndProtractor,this.point=new k({x:0,y:0}),this.container.addItem(this.point)):this.drawingFunction=this.startDrawingWithoutInstruments,this.line=new D(this.startPt.clone(),this.endPt.clone(),{autoDraw:!1}),this.container.addItem(this.line),this.runningTweens=[]}var e,i,s;return e=t,(i=[{key:"instantDraw",value:function(){this.line.startPt=this.startPt,this.line.endPt=this.endPt,this.line.instantDraw(),this.finished=!0}},{key:"draw",value:function(t){var e=this;this.finished=!1,this.stopped=!1,this.drawingFunction((function(){setTimeout((function(){t(e.line)}),400)}))}},{key:"startDrawingWithoutInstruments",value:function(t){var e,i=this;e=null==t?900*Math.pow(this.getLength(),1/4.2):0,new n.a.Tween({x:this.startPt.x,y:this.startPt.y}).to({x:this.endPt.x,y:this.endPt.y},e).easing(n.a.Easing.Quadratic.InOut).onStart((function(){i.endPt.copyFrom(i.startPt),i.visible=!0})).onUpdate((function(t){i.endPt.x=t.x,i.endPt.y=t.y,i.updatePixelLocation()})).onComplete((function(){i.triggerFinishedEvent()})).start()}},{key:"startDrawingWithPencil",value:function(){var t=this,e=900*Math.pow(this.getLength(),1/4.2);this.drawCallback=function(){t.pencil.move(t.endPt)},this.pencil.prepareToDrawLine(this.startPt,this.endPt,(function(){t.drawTween=new n.a.Tween({x:t.startPt.x,y:t.startPt.y}).to({x:t.endPt.x,y:t.endPt.y},e).easing(n.a.Easing.Quadratic.InOut).onStart((function(){t.endPt.copyFrom(t.startPt),t.visible=!0})).onUpdate((function(e){t.endPt.x=e.x,t.endPt.y=e.y,t.updatePixelLocation(),t.drawCallback&&t.drawCallback(t.endPt)})).onComplete((function(){t.pencil.valueLabel.textElement.style.color="red",alert("hid.."),t.pencil.hide()})).start()}))}},{key:"startDrawingWithPencilAndRuler",value:function(t){var e=this,i=900*Math.pow(Ct.getDistance(this.startPt,this.endPt),1/4.2);this.drawCallback=function(){e.pencil.move(e.line.endPt)},this.ruler.moveTo(this.line.startPt,this.line.endPt,(function(){e.pencil.prepareToDrawLine(e.line.startPt,e.line.endPt,(function(){e.drawTween=new n.a.Tween({x:e.line.startPt.x,y:e.line.startPt.y}).to({x:e.line.endPt.x,y:e.line.endPt.y},i).easing(n.a.Easing.Quadratic.InOut).onStart((function(){e.line.endPt.copyFrom(e.line.startPt),e.line.visible=!0})).onUpdate((function(t){e.line.endPt.set(t.x,t.y),e.line.updatePixelLocation(),e.drawCallback&&e.drawCallback(e.line.endPt)})).onComplete((function(){e.pencil.valueLabel.textElement.style.color="red",setTimeout((function(){e.pencil.hide(),e.ruler.hide(),t&&t()}),400)})).start()}))}))}},{key:"startDrawingWithPencilRulerAndProtractor",value:function(t){var e=this;this.protractor.pencil=this.pencil;var i=1600*Math.pow(Math.abs(this.instruction.angle),1/2.8);this.protractor.helper.updateAngle(0),this.protractor.helper.updateSide(!1),this.protractor.helper.show(),this.protractor.moveTo(this.startPt,this.instruction.refStartPt,this.instruction.angle,(function(){new n.a.Tween({angle:0}).to({angle:Math.abs(e.instruction.angle)},i).easing(n.a.Easing.Cubic.InOut).onStart((function(){})).onUpdate((function(t){e.protractor.helper.updateAngle(t.angle)})).onComplete((function(){e.protractor.helper.angleText.style.color="red",setTimeout((function(){e.pencil.drawPoint(e.container.getCoorFromPixPt(e.protractor.helper.indicatorTipPx),e.point,(function(){e.protractor.hide((function(){setTimeout((function(){e.startDrawingWithPencilAndRuler((function(){e.point.hide(),t&&t()}))}),400)}))}),Tt.TWO_PI-(Tt.TWO_PI+e.protractor.helper.endAngle)%Tt.TWO_PI)}),400)})).start()}))}},{key:"addToRunningTweens",value:function(t){this.runningTweens.push(t),console.log("added tween = "+t._id)}},{key:"destroyAll",value:function(){this.line.delete(),this.pencil&&this.pencil.delete(),this.ruler&&this.ruler.delete(),this.protractor&&this.protractor.delete(),this.returnedPoint&&this.returnedPoint.delete(),this.point&&this.point.delete()}}])&&mt(e.prototype,i),s&&mt(e,s),t}();function kt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}wt.StartAndEndPoint=function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];vt(this,t),this.startPt=new h(e.x,e.y),this.endPt=new h(i.x,i.y),this.indefinite=n},wt.RefLineAndAngle=function t(e,i,n,s){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];vt(this,t),this.refStartPt=new h(e.x,e.y),this.refEndPt=new h(i.x,i.y),this.angle=n,this.length=s,this.indefinite=o};var Rt=i(2),At=(i(1),function(){function t(e,i){kt(this,t),this.instructions=e,this.container=i,this.lines=[],this.pencil=new tt({showValueLabel:!this.instructions[0].indefinite}),this.container.addItem(this.pencil),this.ruler=new Z({}),this.container.addItem(this.ruler);for(var n=0;n<this.instructions.length;n++)this.lines.push(new D(this.instructions[n].startPt,this.instructions[n].endPt,{autoDraw:!1})),this.container.addItem(this.lines[n]);this.drawingFunction=this.drawLinesWithPencilAndRuler}var e,i,s;return e=t,(i=[{key:"instantDraw",value:function(){for(var t=0;t<this.lines.length;t++)this.lines[t].instantDraw()}},{key:"draw",value:function(t){this.drawingFunction(t)}},{key:"drawLinesWithPencilAndRuler",value:function(t){var e=this;this.drawCallback=function(t){e.pencil.move(t)},this.currentIndex=0,function i(){var s=900*Math.pow(Rt.getDistance(e.lines[e.currentIndex].startPt,e.lines[e.currentIndex].endPt),1/4.2);e.ruler.moveTo(e.lines[e.currentIndex].startPt,e.lines[e.currentIndex].endPt,(function(){e.pencil.prepareToDrawLine(e.lines[e.currentIndex].startPt,e.lines[e.currentIndex].endPt,(function(){e.drawTween=new n.a.Tween({x:e.lines[e.currentIndex].startPt.x,y:e.lines[e.currentIndex].startPt.y}).to({x:e.lines[e.currentIndex].endPt.x,y:e.lines[e.currentIndex].endPt.y},s).easing(n.a.Easing.Quadratic.InOut).onStart((function(){e.lines[e.currentIndex].endPt.copyFrom(e.lines[e.currentIndex].startPt),e.lines[e.currentIndex].visible=!0})).onUpdate((function(t){e.lines[e.currentIndex].endPt.set(t.x,t.y),e.lines[e.currentIndex].updatePixelLocation(),e.drawCallback&&e.drawCallback(e.lines[e.currentIndex].endPt)})).onComplete((function(){e.pencil.valueLabel.textElement.style.color="red",e.currentIndex<e.lines.length-1?(e.currentIndex++,e.pencil.hide(),e.pencil.showValueLabel=!e.instructions[e.currentIndex].indefinite,setTimeout((function(){i()}),600)):setTimeout((function(){e.pencil.hide(),e.ruler.hide(),t&&t()}),400)})).start()}))}))}()}},{key:"destroyAll",value:function(){this.pencil.delete(),this.ruler.delete();for(var t=0;t<this.lines.length;t++)this.lines[t].delete()}}])&&bt(e.prototype,i),s&&bt(e,s),t}());function _t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function It(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}At.StartAndEndPoint=function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];kt(this,t),this.startPt=new h(e.x,e.y),this.endPt=new h(i.x,i.y),this.indefinite=n};i(2);var Lt=i(1),Bt=function(){function t(e,i,n){_t(this,t),this.instruction=e,this.container=i,this.constructionMethod="",e.constructor===t.CenterRadiusStartEndAngle&&(this.constructionMethod+="C"),this.centerPt=new h,""===this.constructionMethod?this.drawingFunction=this.startDrawingWithoutInstruments:"C"===this.constructionMethod?(this.drawingFunction=this.startDrawingWithCompass,this.centerPt.copyFrom(e.centerPt),this.radius=e.radius,e.counterClockwise?(e.endAngle<e.startAngle?(e.endAngle+=Lt.TWO_PI,this.angleDiff=e.endAngle-e.startAngle):this.angleDiff=e.endAngle-e.startAngle,this.midAngle=(e.startAngle+this.angleDiff/2)%Lt.TWO_PI):(e.startAngle<e.endAngle?(e.startAngle+=Lt.TWO_PI,this.angleDiff=e.startAngle-e.endAngle):this.angleDiff=e.startAngle-e.endAngle,this.midAngle=(e.endAngle+this.angleDiff/2)%Lt.TWO_PI),this.isCounterClockwise=this.midAngle>Lt.THREE_PI_BY_2||this.midAngle<Math.PI/2,this.isCounterClockwise?(this.endAngle=Lt.TWO_PI-e.startAngle,this.startAngle=Lt.TWO_PI-e.endAngle):(this.startAngle=Lt.TWO_PI-e.startAngle,this.endAngle=Lt.TWO_PI-e.endAngle)):"CenterRadiusStartEndAngleWithNoC"==this.constructionMethod&&(this.drawingFunction=this.startDrawingWithoutInstruments,this.centerPt.copyFrom(e.centerPt),this.radius=e.radius,this.isCounterClockwise=e.counterClockwise,this.startAngle=(Lt.TWO_PI-e.startAngle)%Lt.TWO_PI,this.endAngle=(Lt.TWO_PI-e.endAngle)%Lt.TWO_PI,this.startAngle<0&&(this.startAngle+=Lt.TWO_PI),this.endAngle<0&&(this.endAngle+=Lt.TWO_PI),this.startAngle=this.startAngle%Lt.TWO_PI,this.endAngle=this.endAngle%Lt.TWO_PI,this.endAngle<this.startAngle&&!this.isCounterClockwise?this.endAngle+=Lt.TWO_PI:this.endAngle>this.startAngle&&this.isCounterClockwise&&(this.endAngle-=Lt.TWO_PI)),this.compass=new dt,this.container.addItem(this.compass),this.arc=new N(this.centerPt.clone(),this.radius,this.startAngle,this.endAngle,n),this.arc.isCounterClockwise=this.isCounterClockwise,this.container.addItem(this.arc)}var e,i,s;return e=t,(i=[{key:"instantDraw",value:function(){this.arc.instantDraw()}},{key:"startDrawingWithoutInstruments",value:function(){var t=this;new n.a.Tween({endAngle:this.startAngle}).to({endAngle:this.endAngle},1e3).onStart((function(){t.arc.endAngle=t.startAngle,t.arc.updatePixelLocation(),t.arc.visible=!0})).onUpdate((function(e){t.arc.endAngle=e.endAngle})).onComplete((function(){})).start()}},{key:"startDrawingWithCompass",value:function(t){var e=this;this.arc.updatePixelLocation(),this.compass.drawArc(this.centerPt,this.radius,this.midAngle,this.angleDiff,(function(t){e.arc.startAngle=Lt.TWO_PI-(-t+Math.PI),e.arc.endAngle=e.startAngle,e.arc.updatePixelLocation(),e.arc.visible=!0}),(function(t){e.arc.endAngle=Lt.TWO_PI-(-t+Math.PI)}),(function(i){e.arc.endAngle=Lt.TWO_PI-(-i+Math.PI),t&&t()}))}},{key:"draw",value:function(t){this.drawingFunction(t)}},{key:"destroyAll",value:function(){this.compass.delete(),this.arc.delete()}}])&&It(e.prototype,i),s&&It(e,s),t}();Bt.CenterRadiusStartEndAngle=function t(e,i,n,s){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];_t(this,t),this.centerPt=e,this.radius=i,this.startAngle=n,this.endAngle=s,this.counterClockwise=o}}]);